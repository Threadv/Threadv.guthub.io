<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Threadv</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Threadv">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Threadv">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Threadv">
  
    <link rel="alternate" href="/atom.xml" title="Threadv" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Threadv</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-反转单链表" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/06/10/反转单链表/" class="article-date">
  <time datetime="2019-06-10T05:07:26.000Z" itemprop="datePublished">2019-06-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/06/10/反转单链表/">简单算法题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="反转单链表"><a href="#反转单链表" class="headerlink" title="反转单链表"></a>反转单链表</h5><ul>
<li>递归</li>
</ul>
<p>1-&gt;2-&gt;3-&gt;4输出4-&gt;3-&gt;2-&gt;1</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 定义Node</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> value;</span><br><span class="line">    <span class="keyword">public</span> Node next;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(<span class="keyword">int</span> data)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = data;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> Node <span class="title">reverse</span><span class="params">(Node head)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (head == <span class="keyword">null</span> || head.next == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">        </span><br><span class="line">    Node temp = head.next;</span><br><span class="line">    Node newHead = reverse(head.next);</span><br><span class="line">    temp.next = head;</span><br><span class="line">    head.next = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">return</span> newHead;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">程序到达Node newHead = reverse(head.next);时进入递归</span><br><span class="line">我们假设此时递归到了<span class="number">3</span>结点，此时head=<span class="number">3</span>结点，temp=<span class="number">3</span>结点.next(实际上是<span class="number">4</span>结点)</span><br><span class="line">执行Node newHead = reverse(head.next);传入的head.next是<span class="number">4</span>结点，返回的newHead是<span class="number">4</span>结点。</span><br><span class="line">接下来就是弹栈过程了</span><br><span class="line"></span><br><span class="line">程序继续执行 temp.next = head就相当于<span class="number">4</span>-&gt;<span class="number">3</span></span><br><span class="line">head.next = <span class="keyword">null</span> 即把 <span class="number">3</span>结点指向<span class="number">4</span>结点的指针断掉。</span><br><span class="line">返回新链表的头结点newHead</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">注意：当retuen后，系统会恢复<span class="number">2</span>结点压栈时的现场，此时的head=<span class="number">2</span>结点；temp=<span class="number">2</span>结点.next(<span class="number">3</span>结点)，再进行上述的操作。最后完成整个链表的翻转。</span><br></pre></td></tr></table></figure>
<ul>
<li>遍历</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Node <span class="title">reverseList</span><span class="params">(Node node)</span> </span>&#123;</span><br><span class="line">    Node pre = <span class="keyword">null</span>;</span><br><span class="line">    Node next = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">while</span> (node != <span class="keyword">null</span>) &#123;</span><br><span class="line">        next = node.next;</span><br><span class="line">        node.next = pre;</span><br><span class="line">        pre = node;</span><br><span class="line">        node = next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> pre;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">准备两个空结点 pre用来保存先前结点、next用来做临时变量</span><br><span class="line">在头结点node遍历的时候此时为<span class="number">1</span>结点</span><br><span class="line"></span><br><span class="line">next = <span class="number">1</span>结点.next(<span class="number">2</span>结点)</span><br><span class="line"><span class="number">1</span>结点.next=pre(<span class="keyword">null</span>)</span><br><span class="line">pre = <span class="number">1</span>结点</span><br><span class="line">node = <span class="number">2</span>结点</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">进行下一次循环node=<span class="number">2</span>结点</span><br><span class="line"></span><br><span class="line">next = <span class="number">2</span>结点.next(<span class="number">3</span>结点)</span><br><span class="line"><span class="number">2</span>结点.next=pre(<span class="number">1</span>结点)=&gt;即完成<span class="number">2</span>-&gt;<span class="number">1</span></span><br><span class="line">pre = <span class="number">2</span>结点</span><br><span class="line">node = <span class="number">3</span>结点</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">进行循环...</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/06/10/反转单链表/" data-id="ck8d0ogsp006ybcuwijrugz60" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/简单算法题/">简单算法题</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-sql_基础使用" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/04/08/sql_基础使用/" class="article-date">
  <time datetime="2019-04-08T07:42:06.000Z" itemprop="datePublished">2019-04-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/08/sql_基础使用/">基础sql使用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="sql-示例："><a href="#sql-示例：" class="headerlink" title="sql 示例："></a>sql 示例：</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br></pre></td><td class="code"><pre><span class="line">Student(Sid,Sname,Sage,Ssex)学生表</span><br><span class="line">Sid：学号</span><br><span class="line">Sname：学生姓名</span><br><span class="line">Sage：学生年龄</span><br><span class="line">Ssex：学生性别</span><br><span class="line">Course(Cid,Cname,Tid)课程表</span><br><span class="line">Cid：课程编号</span><br><span class="line">Cname：课程名称</span><br><span class="line">Tid：教师编号</span><br><span class="line">SC(Sid,Cid,score)成绩表</span><br><span class="line">Sid：学号</span><br><span class="line">Cid：课程编号</span><br><span class="line">score：成绩</span><br><span class="line">Teacher(Tid,Tname)教师表</span><br><span class="line">Tid：教师编号：</span><br><span class="line">Tname：教师名字</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">问题：</span><br><span class="line">1、查询“001”课程比“002”课程成绩高的所有学生的学号</span><br><span class="line"><span class="keyword">select</span> a.Sid <span class="keyword">from</span> (<span class="keyword">select</span> <span class="keyword">Sid</span>,score <span class="keyword">from</span> SC <span class="keyword">where</span> Cid=<span class="string">'001'</span>)a, (<span class="keyword">select</span> <span class="keyword">sid</span>,score <span class="keyword">from</span> SC <span class="keyword">where</span> cid=<span class="string">'002'</span>)b <span class="keyword">Where</span> a.score&gt;b.score <span class="keyword">and</span> a.sid = b.sid;</span><br><span class="line"></span><br><span class="line">2、查询平均成绩大于60分的同学的学号和平均成绩</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">Sid</span>, <span class="keyword">avg</span>(score) <span class="keyword">from</span> sc <span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">Sid</span> <span class="keyword">having</span> <span class="keyword">avg</span>(score)&gt;<span class="number">60</span></span><br><span class="line"></span><br><span class="line"><span class="number">3</span>、查询所有同学的学号、姓名、选课数、总成绩</span><br><span class="line"><span class="keyword">select</span> student.Sid, student.Sname, <span class="keyword">count</span>(sc.Cid), <span class="keyword">sum</span>(score) <span class="keyword">from</span> student <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> SC <span class="keyword">on</span> student.Sid = SC.Sid <span class="keyword">group</span> <span class="keyword">by</span> Student.Sid, Sname</span><br><span class="line"></span><br><span class="line"><span class="number">4</span>、查询姓‘李’的老师的个数：</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(<span class="keyword">distinct</span>(Tname)) </span><br><span class="line"><span class="keyword">from</span> teacher </span><br><span class="line"><span class="keyword">where</span> tname <span class="keyword">like</span> <span class="string">'李%'</span>;</span><br><span class="line"></span><br><span class="line">5、查询没有学过“叶平”老师可的同学的学号、姓名：</span><br><span class="line"><span class="keyword">select</span> student.Sid, student.Sname </span><br><span class="line"><span class="keyword">from</span> Student </span><br><span class="line"><span class="keyword">where</span> <span class="keyword">Sid</span> <span class="keyword">not</span> <span class="keyword">in</span> (<span class="keyword">select</span> <span class="keyword">distinct</span>(SC.Sid) <span class="keyword">from</span> SC,Course,Teacher </span><br><span class="line"><span class="keyword">where</span> sc.cid=course.cid <span class="keyword">AND</span> teacher.Tid=course.Tid <span class="keyword">AND</span> Teahcer.Tname =<span class="string">'叶平'</span>);</span><br><span class="line"></span><br><span class="line">6、查询学过“叶平”老师所教的所有课的同学的学号、姓名：</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">Sid</span>,Sname   <span class="keyword">from</span> Student    </span><br><span class="line"><span class="keyword">where</span> <span class="keyword">Sid</span> <span class="keyword">in</span> (<span class="keyword">select</span> <span class="keyword">Sid</span> <span class="keyword">from</span> SC ,Course ,Teacher </span><br><span class="line"><span class="keyword">where</span> SC.Cid=Course.Cid <span class="keyword">and</span> Teacher.Tid=Course.Tid </span><br><span class="line"><span class="keyword">and</span> Teacher.Tname=<span class="string">'叶平'</span> <span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">Sid</span> </span><br><span class="line"><span class="keyword">having</span> <span class="keyword">count</span>(SC.Cid)=(<span class="keyword">select</span> <span class="keyword">count</span>(Cid) <span class="keyword">from</span> Course,Teacher  </span><br><span class="line"><span class="keyword">where</span> Teacher.Tid=Course.Tid <span class="keyword">and</span> Tname=<span class="string">'叶平'</span>));</span><br><span class="line"></span><br><span class="line">7、查询学过“011”并且也学过编号“002”课程的同学的学号、姓名：</span><br><span class="line"><span class="keyword">select</span> Student.Sid,Student.Sname </span><br><span class="line"><span class="keyword">from</span> Student,SC <span class="keyword">where</span> Student.Sid=SC.Sid </span><br><span class="line"><span class="keyword">and</span> SC.Cid=<span class="string">'001'</span><span class="keyword">and</span> </span><br><span class="line"><span class="keyword">exists</span>( <span class="keyword">Select</span> * <span class="keyword">from</span> SC <span class="keyword">as</span> SC_2 <span class="keyword">where</span> SC_2.Sid=SC.Sid <span class="keyword">and</span> SC_2.Cid=<span class="string">'002'</span>);</span><br><span class="line"></span><br><span class="line">8、查询课程编号“002”的成绩比课程编号“001”课程低的所有同学的学号、姓名：</span><br><span class="line"><span class="keyword">Select</span> <span class="keyword">Sid</span>,Sname </span><br><span class="line"><span class="keyword">from</span> (<span class="keyword">select</span> Student.Sid,Student.Sname,score ,</span><br><span class="line">(<span class="keyword">select</span> score <span class="keyword">from</span> SC SC_2 <span class="keyword">where</span> SC_2.Sid=Student.Sid <span class="keyword">and</span> SC_2.Cid=<span class="string">'002'</span>) score2    </span><br><span class="line"><span class="keyword">from</span> Student,SC </span><br><span class="line"><span class="keyword">where</span> Student.Sid=SC.Sid <span class="keyword">and</span> Cid=<span class="string">'001'</span>) S_2 </span><br><span class="line"><span class="keyword">where</span> score2 &lt; score; </span><br><span class="line"></span><br><span class="line">9、查询所有课程成绩小于60的同学的学号、姓名：</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">Sid</span>, sname </span><br><span class="line"><span class="keyword">from</span> student </span><br><span class="line"><span class="keyword">where</span> <span class="keyword">sid</span> <span class="keyword">not</span> <span class="keyword">in</span> </span><br><span class="line">(<span class="keyword">select</span> student.sid <span class="keyword">from</span> student, sc <span class="keyword">where</span> s.sid = sc.sid <span class="keyword">and</span> score&gt;<span class="number">60</span>);</span><br><span class="line"></span><br><span class="line">10、查询没有学全所有课的同学的学号、姓名：</span><br><span class="line"><span class="keyword">select</span> student.sid, student.sname </span><br><span class="line"><span class="keyword">from</span> student, sc</span><br><span class="line"><span class="keyword">where</span> student.sid=sc.sid </span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> student.sid, student.sname </span><br><span class="line"><span class="keyword">having</span> <span class="keyword">count</span>(cid)&lt;(<span class="keyword">select</span> <span class="keyword">count</span>(cid) <span class="keyword">from</span> course);</span><br><span class="line"></span><br><span class="line">11、查询至少有一门课与学号为“1001”同学所学相同的同学的学号和姓名：</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sid</span>, Sname </span><br><span class="line"><span class="keyword">from</span> Student, SC </span><br><span class="line"><span class="keyword">where</span> student.sid = sc.sid </span><br><span class="line"><span class="keyword">and</span> cid <span class="keyword">in</span> (<span class="keyword">select</span> cid <span class="keyword">from</span> SC <span class="keyword">where</span> <span class="keyword">sid</span>=<span class="string">'1001'</span>);</span><br><span class="line"></span><br><span class="line">12、查询至少学过学号为“001”同学所有一门课的其他同学学号和姓名；</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> sc.sid , sname </span><br><span class="line"><span class="keyword">from</span> student, sc </span><br><span class="line"><span class="keyword">where</span> student.sid=sc.sid </span><br><span class="line"><span class="keyword">and</span> cid <span class="keyword">in</span> (<span class="keyword">select</span> Cid <span class="keyword">from</span> sc <span class="keyword">where</span> <span class="keyword">sid</span>=<span class="string">'001'</span>);</span><br><span class="line"></span><br><span class="line">13、把“SC”表中“叶平”老师教的课的成绩都更改为此课程的平均成绩：</span><br><span class="line"><span class="keyword">Update</span> Sc <span class="keyword">Set</span> Score=(<span class="keyword">Select</span> <span class="keyword">Avg</span>(s2_Score) <span class="keyword">From</span> sc s2 <span class="keyword">Where</span> s2.cid=sc.cid)  </span><br><span class="line"><span class="keyword">Where</span> cid <span class="keyword">IN</span></span><br><span class="line">(<span class="keyword">Select</span> cid <span class="keyword">From</span> sc cs <span class="keyword">INNER</span> <span class="keyword">JOIN</span> Teacher tc <span class="keyword">ON</span> cs.tid=tc.tid <span class="keyword">WHERE</span> tname =<span class="string">'叶平'</span>)</span><br><span class="line"></span><br><span class="line"><span class="number">14</span>、查询和“<span class="number">1002</span>”号的同学学习的课程完全相同的其他同学学号和姓名：</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sid</span> <span class="keyword">from</span> sc <span class="keyword">where</span> cid  <span class="keyword">in</span> </span><br><span class="line">(<span class="keyword">select</span> cid <span class="keyword">from</span> sc <span class="keyword">where</span> <span class="keyword">sid</span>=<span class="string">'1002'</span>) </span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">sid</span> <span class="keyword">having</span> <span class="keyword">count</span>(*)=</span><br><span class="line">(<span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> sc <span class="keyword">where</span> <span class="keyword">sid</span>=<span class="string">'1002'</span>);</span><br><span class="line"></span><br><span class="line">15、删除学习“叶平”老师课的SC表记录：</span><br><span class="line">delect sc </span><br><span class="line">from course, Teacher </span><br><span class="line">where course.cid=sc.cid </span><br><span class="line">and course.tid=teacher.tid </span><br><span class="line">and tname='叶平';</span><br><span class="line"></span><br><span class="line">16、向SC表中插入一些记录，这些记录要求符合以下条件：没有上过编号“003”课程的同学学号、002号课的平均成绩：</span><br><span class="line"><span class="keyword">Insert</span> SC <span class="keyword">select</span> <span class="keyword">Sid</span>,<span class="string">'002'</span>,</span><br><span class="line">(<span class="keyword">Select</span> <span class="keyword">avg</span>(score) <span class="keyword">from</span> SC <span class="keyword">where</span> Cid=<span class="string">'002'</span>) </span><br><span class="line"><span class="keyword">from</span> Student <span class="keyword">where</span> <span class="keyword">Sid</span> <span class="keyword">not</span> <span class="keyword">in</span> (<span class="keyword">Select</span> <span class="keyword">Sid</span> <span class="keyword">from</span> SC <span class="keyword">where</span> Cid=<span class="string">'002'</span>);</span><br><span class="line"></span><br><span class="line">17、按平均成绩从高到低显示所有学生的“数据库”、“企业管理”、“英语”三门的课程成绩，按如下形式显示：学生ID，数据库，企业管理，英语，有效课程数，有效平均分：</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sid</span> <span class="keyword">as</span> 学生<span class="keyword">ID</span>,</span><br><span class="line">(<span class="keyword">select</span> score <span class="keyword">from</span> sc <span class="keyword">where</span> sc.sid=t.sid <span class="keyword">and</span> cid=<span class="string">'004'</span>) <span class="keyword">as</span> 数据库,</span><br><span class="line">(<span class="keyword">select</span> score <span class="keyword">from</span> sc <span class="keyword">where</span> sc.sid=t.sid <span class="keyword">and</span> cid=<span class="string">'001'</span>) <span class="keyword">as</span> 企业管理,</span><br><span class="line">(<span class="keyword">select</span> score <span class="keyword">from</span> sc <span class="keyword">where</span> sc.sid=t.sid <span class="keyword">and</span> cid=<span class="string">'006'</span>) <span class="keyword">as</span> 英语,</span><br><span class="line"><span class="keyword">count</span>(*) <span class="keyword">as</span> 有效课程数, <span class="keyword">avg</span>(t.score) <span class="keyword">as</span> 平局成绩</span><br><span class="line"><span class="keyword">from</span> sc <span class="keyword">as</span> t</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">sid</span> </span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">avg</span>(t.score)</span><br><span class="line"></span><br><span class="line"><span class="number">18</span>、查询各科成绩最高和最低的分： 以如下的形式显示：课程<span class="keyword">ID</span>，最高分，最低分</span><br><span class="line"><span class="keyword">select</span> L.cid <span class="keyword">as</span> 课程<span class="keyword">ID</span>, L.score <span class="keyword">as</span> 最高分,</span><br><span class="line">R.score <span class="keyword">as</span> 最低分</span><br><span class="line"><span class="keyword">from</span> sc L, sc R </span><br><span class="line"><span class="keyword">where</span> L.cid = R.cid </span><br><span class="line"><span class="keyword">and</span> L.score = (<span class="keyword">select</span> <span class="keyword">max</span>(IL.score) </span><br><span class="line">        <span class="keyword">from</span> sc IL, student <span class="keyword">as</span> IM </span><br><span class="line">        <span class="keyword">where</span> L.cid=IL.cid <span class="keyword">and</span> IM.sid=IL.sid</span><br><span class="line">        <span class="keyword">group</span> <span class="keyword">by</span> IL.cid)</span><br><span class="line"><span class="keyword">and</span> R.score = (<span class="keyword">select</span> <span class="keyword">min</span>(IR.score)</span><br><span class="line">        <span class="keyword">from</span> sc <span class="keyword">as</span> IR</span><br><span class="line">        <span class="keyword">where</span> R.cid=IR.cid</span><br><span class="line">        <span class="keyword">group</span> <span class="keyword">by</span> IR.cid);</span><br><span class="line"></span><br><span class="line">19、按各科平均成绩从低到高和及格率的百分数从高到低顺序：</span><br><span class="line"><span class="keyword">SELECT</span> t.Cid <span class="keyword">AS</span> 课程号,</span><br><span class="line"><span class="keyword">max</span>(course.Cname)<span class="keyword">AS</span> 课程名,</span><br><span class="line"><span class="keyword">isnull</span>(<span class="keyword">AVG</span>(score),<span class="number">0</span>) <span class="keyword">AS</span> 平均成绩,</span><br><span class="line"><span class="number">100</span> * <span class="keyword">SUM</span>(<span class="keyword">CASE</span> <span class="keyword">WHEN</span>  <span class="keyword">isnull</span>(score,<span class="number">0</span>)&gt;=<span class="number">60</span> <span class="keyword">THEN</span> <span class="number">1</span> <span class="keyword">ELSE</span> <span class="number">0</span> <span class="keyword">END</span>)/<span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> 及格百分数     </span><br><span class="line"><span class="keyword">FROM</span> SC T,Course     </span><br><span class="line"><span class="keyword">where</span> t.Cid=course.Cid     </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> t.Cid      </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="number">100</span> * <span class="keyword">SUM</span>(<span class="keyword">CASE</span> <span class="keyword">WHEN</span>  <span class="keyword">isnull</span>(score,<span class="number">0</span>)&gt;=<span class="number">60</span> <span class="keyword">THEN</span> <span class="number">1</span> <span class="keyword">ELSE</span> <span class="number">0</span> <span class="keyword">END</span>)/<span class="keyword">COUNT</span>(*) <span class="keyword">DESC</span> </span><br><span class="line"></span><br><span class="line"><span class="number">20</span>、查询如下课程平均成绩和及格率的百分数(用”<span class="number">1</span>行”显示): 企业管理（<span class="number">001</span>），马克思（<span class="number">002</span>），OO&amp;UML （<span class="number">003</span>），数据库（<span class="number">004</span>）：</span><br><span class="line"><span class="number">21</span>、查询不同老师所教不同课程平均分从高到低显示：</span><br><span class="line"> <span class="keyword">SELECT</span> <span class="keyword">max</span>(Z.Tid) <span class="keyword">AS</span> 教师<span class="keyword">ID</span>,</span><br><span class="line"> <span class="keyword">MAX</span>(Z.Tname) <span class="keyword">AS</span> 教师姓名,</span><br><span class="line"> C.Cid <span class="keyword">AS</span> 课程<span class="keyword">ID</span>,</span><br><span class="line"> <span class="keyword">AVG</span>(Score) <span class="keyword">AS</span> 平均成绩     </span><br><span class="line"> <span class="keyword">FROM</span> SC <span class="keyword">AS</span> T,Course <span class="keyword">AS</span> C ,Teacher <span class="keyword">AS</span> Z    </span><br><span class="line"> <span class="keyword">where</span> T.Cid=C.Cid <span class="keyword">and</span> C.Tid=Z.Tid   </span><br><span class="line"> <span class="keyword">GROUP</span> <span class="keyword">BY</span> C.Cid    </span><br><span class="line"> <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">AVG</span>(Score) <span class="keyword">DESC</span></span><br><span class="line"></span><br><span class="line"><span class="number">22</span>、查询如下课程成绩第<span class="number">3</span>名到第<span class="number">6</span>名的学生成绩单：企业管理(<span class="number">001</span>)，马克思(<span class="number">002</span>)，UML(<span class="number">003</span>)，数据库(<span class="number">004</span>)：</span><br><span class="line"><span class="number">23</span>、统计下列各科成绩，各分数段人数：课程<span class="keyword">ID</span>，课程名称，[<span class="number">100</span><span class="number">-85</span>],[<span class="number">85</span><span class="number">-70</span>],[<span class="number">70</span><span class="number">-60</span>],[ 小于<span class="number">60</span>] ：</span><br><span class="line"><span class="keyword">SELECT</span> SC.Cid <span class="keyword">as</span> 课程<span class="keyword">ID</span>, Cname <span class="keyword">as</span> 课程名称,</span><br><span class="line"><span class="keyword">SUM</span>(<span class="keyword">CASE</span> <span class="keyword">WHEN</span> score <span class="keyword">BETWEEN</span> <span class="number">85</span> <span class="keyword">AND</span> <span class="number">100</span> <span class="keyword">THEN</span> <span class="number">1</span> <span class="keyword">ELSE</span> <span class="number">0</span> <span class="keyword">END</span>) <span class="keyword">AS</span> [<span class="number">100</span> - <span class="number">85</span>]  ,</span><br><span class="line"><span class="keyword">SUM</span>(<span class="keyword">CASE</span> <span class="keyword">WHEN</span> score <span class="keyword">BETWEEN</span> <span class="number">70</span> <span class="keyword">AND</span> <span class="number">85</span> <span class="keyword">THEN</span> <span class="number">1</span> <span class="keyword">ELSE</span> <span class="number">0</span> <span class="keyword">END</span>) <span class="keyword">AS</span> [<span class="number">85</span> - <span class="number">70</span>],</span><br><span class="line"><span class="keyword">SUM</span>(<span class="keyword">CASE</span> <span class="keyword">WHEN</span> score <span class="keyword">BETWEEN</span> <span class="number">60</span> <span class="keyword">AND</span> <span class="number">70</span> <span class="keyword">THEN</span> <span class="number">1</span> <span class="keyword">ELSE</span> <span class="number">0</span> <span class="keyword">END</span>) <span class="keyword">AS</span> [<span class="number">70</span> - <span class="number">60</span>],</span><br><span class="line"><span class="keyword">SUM</span>(<span class="keyword">CASE</span> <span class="keyword">WHEN</span> score &lt; <span class="number">60</span> <span class="keyword">THEN</span> <span class="number">1</span> <span class="keyword">ELSE</span> <span class="number">0</span> <span class="keyword">END</span>) <span class="keyword">AS</span> [<span class="number">60</span> -]     </span><br><span class="line"><span class="keyword">FROM</span> SC,Course     </span><br><span class="line"><span class="keyword">where</span> SC.Cid=Course.Cid     </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> SC.Cid,Cname;</span><br><span class="line"></span><br><span class="line">24、查询学生平均成绩及其名次：</span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">1</span>+(<span class="keyword">SELECT</span> <span class="keyword">COUNT</span>( <span class="keyword">distinct</span> 平均成绩)                </span><br><span class="line"><span class="keyword">FROM</span> (<span class="keyword">SELECT</span> <span class="keyword">Sid</span>,<span class="keyword">AVG</span>(score) <span class="keyword">AS</span> 平均成绩                       </span><br><span class="line"><span class="keyword">FROM</span> SC                   </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">Sid</span>  ) <span class="keyword">AS</span> T1  <span class="keyword">WHERE</span> 平均成绩 &gt; T2.平均成绩) <span class="keyword">as</span> 名次,       </span><br><span class="line"><span class="keyword">Sid</span> <span class="keyword">as</span> 学生学号,平均成绩      </span><br><span class="line"><span class="keyword">FROM</span> (<span class="keyword">SELECT</span> <span class="keyword">Sid</span>,<span class="keyword">AVG</span>(score) 平均成绩             </span><br><span class="line"><span class="keyword">FROM</span> SC         </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">Sid</span> ) <span class="keyword">AS</span> T2      </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> 平均成绩 <span class="keyword">desc</span>; </span><br><span class="line"></span><br><span class="line">25、查询各科成绩前三名的记录（不考虑成绩并列情况）：</span><br><span class="line"><span class="keyword">SELECT</span> t1.Sid <span class="keyword">as</span> 学生<span class="keyword">ID</span>,t1.Cid <span class="keyword">as</span> 课程<span class="keyword">ID</span>,Score <span class="keyword">as</span> 分数       </span><br><span class="line"><span class="keyword">FROM</span> SC t1        </span><br><span class="line"><span class="keyword">WHERE</span> score <span class="keyword">IN</span> </span><br><span class="line">(<span class="keyword">SELECT</span> TOP <span class="number">3</span> score               </span><br><span class="line"><span class="keyword">FROM</span> SC               </span><br><span class="line"><span class="keyword">WHERE</span> t1.Cid= Cid             </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> score <span class="keyword">DESC</span>)        </span><br><span class="line"></span><br><span class="line"><span class="number">26</span>、查询每门课程被选修的学生数：</span><br><span class="line"><span class="keyword">select</span> cid, <span class="keyword">count</span>(<span class="keyword">sid</span>) </span><br><span class="line"><span class="keyword">from</span> sc </span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> cid;</span><br><span class="line"></span><br><span class="line">27、查询出只选修一门课程的全部学生的学号和姓名：</span><br><span class="line"><span class="keyword">select</span> sc.sid, student.sname, <span class="keyword">count</span>(cid) <span class="keyword">as</span> 选课数</span><br><span class="line"><span class="keyword">from</span> sc,student </span><br><span class="line"><span class="keyword">where</span> sc.sid =student.sid </span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> sc.sid,Student.sname </span><br><span class="line"><span class="keyword">having</span> <span class="keyword">count</span>(cid)=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">28、查询男生、女生人数：</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(Ssex) <span class="keyword">as</span> 男生人数 </span><br><span class="line"><span class="keyword">from</span> student </span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> Ssex </span><br><span class="line"><span class="keyword">having</span> Ssex=<span class="string">'男'</span>；</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(Ssex) <span class="keyword">as</span> 女生人数 </span><br><span class="line"><span class="keyword">from</span> student </span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> Ssex </span><br><span class="line"><span class="keyword">having</span> Ssex=<span class="string">'女'</span>;</span><br><span class="line"></span><br><span class="line">29、查询姓“张”的学生名单：</span><br><span class="line"><span class="keyword">select</span> sname </span><br><span class="line"><span class="keyword">from</span> student </span><br><span class="line"><span class="keyword">where</span> sname <span class="keyword">like</span> <span class="string">'张%'</span>;</span><br><span class="line"></span><br><span class="line">30、查询同名同姓的学生名单，并统计同名人数：</span><br><span class="line"><span class="keyword">select</span> sanme,<span class="keyword">count</span>(*) </span><br><span class="line"><span class="keyword">from</span> student </span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> sname </span><br><span class="line">havang <span class="keyword">count</span>(*)&gt;<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">31、1981年出生的学生名单（注：student表中sage列的类型是datetime）:</span><br><span class="line"><span class="keyword">select</span> sname, <span class="keyword">convert</span>(<span class="built_in">char</span>(<span class="number">11</span>),<span class="keyword">DATEPART</span>(<span class="keyword">year</span>,sage)) <span class="keyword">as</span> age</span><br><span class="line"><span class="keyword">from</span> student </span><br><span class="line"><span class="keyword">where</span> <span class="keyword">convert</span>(<span class="built_in">char</span>(<span class="number">11</span>),<span class="keyword">DATEPART</span>(<span class="keyword">year</span>,Sage))=<span class="string">'1981'</span>;</span><br><span class="line"></span><br><span class="line">32、查询平均成绩大于85的所有学生的学号、姓名和平均成绩：</span><br><span class="line"><span class="keyword">select</span> Sname,SC.Sid ,<span class="keyword">avg</span>(score)     </span><br><span class="line"><span class="keyword">from</span> Student,SC      </span><br><span class="line"><span class="keyword">where</span> Student.Sid=SC.Sid </span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> SC.Sid,Sname </span><br><span class="line"><span class="keyword">having</span>    <span class="keyword">avg</span>(score)&gt;<span class="number">85</span>;</span><br><span class="line"></span><br><span class="line">33、查询每门课程的平均成绩，结果按平均成绩升序排序，平均成绩相同时，按课程号降序排列：</span><br><span class="line"><span class="keyword">select</span> Cid, <span class="keyword">avg</span>(score) </span><br><span class="line"><span class="keyword">from</span> sc </span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> cid </span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">avg</span>(score), cid <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line">34、查询课程名称为“数据库”，且分数低于60的学生名字和分数：</span><br><span class="line"><span class="keyword">select</span> sname, <span class="keyword">isnull</span>(score,<span class="number">0</span>) </span><br><span class="line"><span class="keyword">from</span> student, sc ,course </span><br><span class="line"><span class="keyword">where</span> sc.sid=student.sid  <span class="keyword">and</span> sc.cid=course.cid <span class="keyword">and</span> course.cname=<span class="string">'数据库'</span> <span class="keyword">and</span> score&lt;<span class="number">60</span>;</span><br><span class="line"></span><br><span class="line">35、查询所有学生的选课情况：</span><br><span class="line"><span class="keyword">select</span> sc.sid,sc.cid,sname,cname </span><br><span class="line"><span class="keyword">from</span> sc,student course </span><br><span class="line"><span class="keyword">where</span> sc.sid=student.sid <span class="keyword">and</span> sc.cid=course.cid;</span><br><span class="line"></span><br><span class="line">36、查询任何一门课程成绩在70分以上的姓名、课程名称和分数：</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> student.sid,student.sname,sc.cid,sc.score </span><br><span class="line"><span class="keyword">from</span> student,sc </span><br><span class="line"><span class="keyword">where</span> sc.score&gt;=<span class="number">70</span> <span class="keyword">and</span> sc.sid=student.sid;</span><br><span class="line"></span><br><span class="line">37、查询不及格的课程，并按课程号从大到小的排列：</span><br><span class="line"><span class="keyword">select</span> cid </span><br><span class="line"><span class="keyword">from</span> sc </span><br><span class="line"><span class="keyword">where</span> score&lt;<span class="number">60</span> </span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> cid;</span><br><span class="line"></span><br><span class="line">38、查询课程编号为“003”且课程成绩在80分以上的学生的学号和姓名：</span><br><span class="line"><span class="keyword">select</span> sc.sid,student.sname </span><br><span class="line"><span class="keyword">from</span> sc,student </span><br><span class="line"><span class="keyword">where</span> sc.sid=student.sid <span class="keyword">and</span> score&gt;<span class="number">80</span> <span class="keyword">and</span> cid=<span class="string">'003'</span>;</span><br><span class="line"></span><br><span class="line">39、求选了课程的学生人数：</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> sc;</span><br><span class="line"></span><br><span class="line">40、查询选修“叶平”老师所授课程的学生中，成绩最高的学生姓名及其成绩：</span><br><span class="line"><span class="keyword">select</span> student.sname,score </span><br><span class="line"><span class="keyword">from</span> student,sc,course c, teacher </span><br><span class="line"><span class="keyword">where</span> student.sid=sc.Sid <span class="keyword">and</span> sc.cid=c.cid</span><br><span class="line"><span class="keyword">and</span> c.Tid=teacher.Tid</span><br><span class="line"><span class="keyword">and</span> teacher.tname=<span class="string">'叶平'</span> </span><br><span class="line"><span class="keyword">and</span> sc.score=(<span class="keyword">select</span> <span class="keyword">max</span>(score) <span class="keyword">from</span> sc <span class="keyword">where</span> cid=c.cid);</span><br><span class="line"></span><br><span class="line">41、查询各个课程及相应的选修人数：</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> sc <span class="keyword">group</span> <span class="keyword">by</span> cid;</span><br><span class="line"></span><br><span class="line">42、查询不同课程成绩相同的学生和学号、课程号、学生成绩：</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> a.sid,b.score </span><br><span class="line"><span class="keyword">from</span> sc a ,sc b </span><br><span class="line"><span class="keyword">where</span> a.score=b.score </span><br><span class="line"><span class="keyword">and</span> a.cid&lt;&gt;b.cid;</span><br><span class="line"></span><br><span class="line">43、查询每门课程成绩最好的前两名：</span><br><span class="line"><span class="keyword">select</span> t1.sid <span class="keyword">as</span> 学生<span class="keyword">ID</span>,t1.cid  课程<span class="keyword">ID</span>, Score <span class="keyword">as</span> 分数</span><br><span class="line"><span class="keyword">from</span> sc t1 </span><br><span class="line"><span class="keyword">where</span> score <span class="keyword">in</span> (<span class="keyword">select</span> top <span class="number">2</span> score <span class="keyword">from</span> sc </span><br><span class="line">        <span class="keyword">where</span> t1.cid=cid</span><br><span class="line">        <span class="keyword">order</span> <span class="keyword">by</span> score <span class="keyword">desc</span>)</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> t1.cid;</span><br><span class="line"></span><br><span class="line">44、统计每门课程的学生选修人数(超过10人的课程才统计)。要求输出课程号和选修人数，查询结果按人数降序排序，若人数相同，按课程号升序排序：</span><br><span class="line"><span class="keyword">select</span> cid <span class="keyword">as</span> 课程号,<span class="keyword">count</span>(*) <span class="keyword">as</span> 人数</span><br><span class="line"><span class="keyword">from</span> sc </span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> cid</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">count</span>(*) <span class="keyword">desc</span> cid;</span><br><span class="line"></span><br><span class="line">45、检索至少选修两门课程的学生学号：</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sid</span> </span><br><span class="line"><span class="keyword">from</span> sc </span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">sid</span> </span><br><span class="line"><span class="keyword">having</span> <span class="keyword">count</span>(*)&gt;=<span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">46、查询全部学生选修的课程和课程号和课程名：</span><br><span class="line"><span class="keyword">select</span> cid ,cname</span><br><span class="line"><span class="keyword">from</span> course </span><br><span class="line"><span class="keyword">where</span> cid <span class="keyword">in</span> (<span class="keyword">select</span> cid <span class="keyword">from</span> sc <span class="keyword">group</span> <span class="keyword">by</span> cid);</span><br><span class="line"></span><br><span class="line">47、查询没学过”叶平”老师讲授的任一门课程的学生姓名：</span><br><span class="line"><span class="keyword">select</span> sname </span><br><span class="line"><span class="keyword">from</span> student </span><br><span class="line"><span class="keyword">where</span> <span class="keyword">sid</span> <span class="keyword">not</span> <span class="keyword">in</span> (<span class="keyword">select</span> <span class="keyword">sid</span> <span class="keyword">from</span> course,teacher,sc <span class="keyword">where</span> course.tid=teacher.tid <span class="keyword">and</span> sc.cid=course.cid </span><br><span class="line"><span class="keyword">and</span> tname=<span class="string">'叶平'</span>);</span><br><span class="line"></span><br><span class="line">48、查询两门以上不及格课程的同学的学号以及其平均成绩：</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sid</span>,<span class="keyword">avg</span>(<span class="keyword">isnull</span>(score,<span class="number">0</span>)) </span><br><span class="line"><span class="keyword">from</span> sc </span><br><span class="line"><span class="keyword">where</span> <span class="keyword">sid</span> <span class="keyword">in</span> (<span class="keyword">select</span> <span class="keyword">sid</span> <span class="keyword">from</span> sc <span class="keyword">where</span> score&lt;<span class="number">60</span> <span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">sid</span> <span class="keyword">having</span> <span class="keyword">count</span>(*)&gt;<span class="number">2</span>)</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">sid</span>;</span><br><span class="line"></span><br><span class="line">49、检索“004”课程分数小于60，按分数降序排列的同学学号：</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sid</span> </span><br><span class="line"><span class="keyword">from</span> sc </span><br><span class="line"><span class="keyword">where</span> cid=<span class="string">'004'</span> </span><br><span class="line"><span class="keyword">and</span> score&lt;<span class="number">60</span> </span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> score <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line">50、删除“002”同学的“001”课程的成绩：</span><br><span class="line">delect from sc </span><br><span class="line">where sid='002' </span><br><span class="line">and cid='001';</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/04/08/sql_基础使用/" data-id="ck8d0ogrt005qbcuwzbqh93d4" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/">mysql</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-java_GItChat_java" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/04/06/java_GItChat_java/" class="article-date">
  <time datetime="2019-04-06T03:53:43.000Z" itemprop="datePublished">2019-04-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/06/java_GItChat_java/">Java 基础Gchat</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br><span class="line">1256</span><br><span class="line">1257</span><br><span class="line">1258</span><br><span class="line">1259</span><br><span class="line">1260</span><br><span class="line">1261</span><br><span class="line">1262</span><br><span class="line">1263</span><br><span class="line">1264</span><br><span class="line">1265</span><br><span class="line">1266</span><br><span class="line">1267</span><br><span class="line">1268</span><br><span class="line">1269</span><br><span class="line">1270</span><br><span class="line">1271</span><br><span class="line">1272</span><br><span class="line">1273</span><br><span class="line">1274</span><br><span class="line">1275</span><br><span class="line">1276</span><br><span class="line">1277</span><br><span class="line">1278</span><br><span class="line">1279</span><br><span class="line">1280</span><br><span class="line">1281</span><br><span class="line">1282</span><br><span class="line">1283</span><br><span class="line">1284</span><br><span class="line">1285</span><br><span class="line">1286</span><br><span class="line">1287</span><br><span class="line">1288</span><br><span class="line">1289</span><br><span class="line">1290</span><br><span class="line">1291</span><br><span class="line">1292</span><br><span class="line">1293</span><br><span class="line">1294</span><br><span class="line">1295</span><br><span class="line">1296</span><br><span class="line">1297</span><br><span class="line">1298</span><br><span class="line">1299</span><br><span class="line">1300</span><br><span class="line">1301</span><br><span class="line">1302</span><br><span class="line">1303</span><br><span class="line">1304</span><br><span class="line">1305</span><br><span class="line">1306</span><br><span class="line">1307</span><br><span class="line">1308</span><br><span class="line">1309</span><br><span class="line">1310</span><br><span class="line">1311</span><br><span class="line">1312</span><br><span class="line">1313</span><br><span class="line">1314</span><br><span class="line">1315</span><br><span class="line">1316</span><br><span class="line">1317</span><br><span class="line">1318</span><br><span class="line">1319</span><br><span class="line">1320</span><br><span class="line">1321</span><br><span class="line">1322</span><br><span class="line">1323</span><br><span class="line">1324</span><br><span class="line">1325</span><br><span class="line">1326</span><br><span class="line">1327</span><br><span class="line">1328</span><br><span class="line">1329</span><br><span class="line">1330</span><br><span class="line">1331</span><br><span class="line">1332</span><br><span class="line">1333</span><br><span class="line">1334</span><br><span class="line">1335</span><br><span class="line">1336</span><br><span class="line">1337</span><br><span class="line">1338</span><br><span class="line">1339</span><br><span class="line">1340</span><br><span class="line">1341</span><br><span class="line">1342</span><br><span class="line">1343</span><br><span class="line">1344</span><br><span class="line">1345</span><br><span class="line">1346</span><br><span class="line">1347</span><br><span class="line">1348</span><br><span class="line">1349</span><br><span class="line">1350</span><br><span class="line">1351</span><br><span class="line">1352</span><br><span class="line">1353</span><br><span class="line">1354</span><br><span class="line">1355</span><br><span class="line">1356</span><br><span class="line">1357</span><br><span class="line">1358</span><br><span class="line">1359</span><br><span class="line">1360</span><br><span class="line">1361</span><br><span class="line">1362</span><br><span class="line">1363</span><br><span class="line">1364</span><br><span class="line">1365</span><br><span class="line">1366</span><br><span class="line">1367</span><br><span class="line">1368</span><br><span class="line">1369</span><br><span class="line">1370</span><br><span class="line">1371</span><br><span class="line">1372</span><br><span class="line">1373</span><br><span class="line">1374</span><br><span class="line">1375</span><br><span class="line">1376</span><br><span class="line">1377</span><br><span class="line">1378</span><br><span class="line">1379</span><br><span class="line">1380</span><br><span class="line">1381</span><br><span class="line">1382</span><br><span class="line">1383</span><br><span class="line">1384</span><br><span class="line">1385</span><br><span class="line">1386</span><br><span class="line">1387</span><br><span class="line">1388</span><br><span class="line">1389</span><br><span class="line">1390</span><br><span class="line">1391</span><br><span class="line">1392</span><br><span class="line">1393</span><br><span class="line">1394</span><br><span class="line">1395</span><br><span class="line">1396</span><br><span class="line">1397</span><br><span class="line">1398</span><br><span class="line">1399</span><br><span class="line">1400</span><br><span class="line">1401</span><br><span class="line">1402</span><br><span class="line">1403</span><br><span class="line">1404</span><br><span class="line">1405</span><br><span class="line">1406</span><br><span class="line">1407</span><br><span class="line">1408</span><br><span class="line">1409</span><br><span class="line">1410</span><br><span class="line">1411</span><br><span class="line">1412</span><br><span class="line">1413</span><br><span class="line">1414</span><br><span class="line">1415</span><br><span class="line">1416</span><br><span class="line">1417</span><br><span class="line">1418</span><br><span class="line">1419</span><br><span class="line">1420</span><br><span class="line">1421</span><br><span class="line">1422</span><br><span class="line">1423</span><br><span class="line">1424</span><br><span class="line">1425</span><br><span class="line">1426</span><br><span class="line">1427</span><br><span class="line">1428</span><br><span class="line">1429</span><br><span class="line">1430</span><br><span class="line">1431</span><br><span class="line">1432</span><br><span class="line">1433</span><br><span class="line">1434</span><br><span class="line">1435</span><br><span class="line">1436</span><br><span class="line">1437</span><br><span class="line">1438</span><br><span class="line">1439</span><br><span class="line">1440</span><br><span class="line">1441</span><br><span class="line">1442</span><br><span class="line">1443</span><br><span class="line">1444</span><br><span class="line">1445</span><br><span class="line">1446</span><br><span class="line">1447</span><br><span class="line">1448</span><br><span class="line">1449</span><br><span class="line">1450</span><br><span class="line">1451</span><br><span class="line">1452</span><br><span class="line">1453</span><br><span class="line">1454</span><br><span class="line">1455</span><br><span class="line">1456</span><br><span class="line">1457</span><br><span class="line">1458</span><br><span class="line">1459</span><br><span class="line">1460</span><br><span class="line">1461</span><br><span class="line">1462</span><br><span class="line">1463</span><br><span class="line">1464</span><br><span class="line">1465</span><br><span class="line">1466</span><br><span class="line">1467</span><br><span class="line">1468</span><br><span class="line">1469</span><br><span class="line">1470</span><br><span class="line">1471</span><br><span class="line">1472</span><br><span class="line">1473</span><br><span class="line">1474</span><br><span class="line">1475</span><br><span class="line">1476</span><br><span class="line">1477</span><br><span class="line">1478</span><br><span class="line">1479</span><br><span class="line">1480</span><br><span class="line">1481</span><br><span class="line">1482</span><br><span class="line">1483</span><br><span class="line">1484</span><br><span class="line">1485</span><br><span class="line">1486</span><br><span class="line">1487</span><br><span class="line">1488</span><br><span class="line">1489</span><br><span class="line">1490</span><br><span class="line">1491</span><br><span class="line">1492</span><br><span class="line">1493</span><br><span class="line">1494</span><br><span class="line">1495</span><br><span class="line">1496</span><br><span class="line">1497</span><br><span class="line">1498</span><br><span class="line">1499</span><br><span class="line">1500</span><br><span class="line">1501</span><br><span class="line">1502</span><br><span class="line">1503</span><br><span class="line">1504</span><br><span class="line">1505</span><br><span class="line">1506</span><br><span class="line">1507</span><br><span class="line">1508</span><br><span class="line">1509</span><br><span class="line">1510</span><br></pre></td><td class="code"><pre><span class="line">Java 基础G</span><br><span class="line"></span><br><span class="line">1. JDK 和 JRE 有什么区别？</span><br><span class="line"></span><br><span class="line">JDK：Java Development Kit 的简称，Java 开发工具包，提供了 Java 的开发环境和运行环境。</span><br><span class="line">JRE：Java Runtime Environment 的简称，Java 运行环境，为 Java 的运行提供了所需环境。</span><br><span class="line">具体来说 JDK 其实包含了 JRE，同时还包含了编译 Java 源码的编译器 Javac，还包含了很多 Java 程序调试和分析的工具。简单来说：如果你需要运行 Java 程序，只需安装 JRE 就可以了，如果你需要编写 Java 程序，需要安装 JDK。</span><br><span class="line"></span><br><span class="line">2. == 和 equals 的区别是什么？</span><br><span class="line"></span><br><span class="line">== 解读</span><br><span class="line"></span><br><span class="line">对于基本类型和引用类型 == 的作用效果是不同的，如下所示：</span><br><span class="line"></span><br><span class="line">基本类型：比较的是值是否相同；</span><br><span class="line">引用类型：比较的是引用是否相同；</span><br><span class="line">代码示例：</span><br><span class="line"></span><br><span class="line">String x = &quot;string&quot;;</span><br><span class="line">String y = &quot;string&quot;;</span><br><span class="line">String z = new String(&quot;string&quot;);</span><br><span class="line">System.out.println(x==y); // true</span><br><span class="line">System.out.println(x==z); // false</span><br><span class="line">System.out.println(x.equals(y)); // true</span><br><span class="line">System.out.println(x.equals(z)); // true</span><br><span class="line">代码解读：因为 x 和 y 指向的是同一个引用，所以 == 也是 true，而 new String()方法则重写开辟了内存空间，所以 == 结果为 false，而 equals 比较的一直是值，所以结果都为 true。</span><br><span class="line"></span><br><span class="line">equals 解读</span><br><span class="line"></span><br><span class="line">equals 本质上就是 ==，只不过 String 和 Integer 等重写了 equals 方法，把它变成了值比较。看下面的代码就明白了。</span><br><span class="line"></span><br><span class="line">首先来看默认情况下 equals 比较一个有相同值的对象，代码如下：</span><br><span class="line"></span><br><span class="line">class Cat &#123;</span><br><span class="line">    public Cat(String name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private String name;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Cat c1 = new Cat(&quot;tt&quot;);</span><br><span class="line">Cat c2 = new Cat(&quot;tt&quot;);</span><br><span class="line">System.out.println(c1.equals(c2)); // false</span><br><span class="line">输出结果出乎我们的意料，竟然是 false？这是怎么回事，看了 equals 源码就知道了，源码如下：</span><br><span class="line"></span><br><span class="line">public boolean equals(Object obj) &#123;</span><br><span class="line">        return (this == obj);</span><br><span class="line">&#125;</span><br><span class="line">原来 equals 本质上就是 ==。</span><br><span class="line"></span><br><span class="line">那问题来了，两个相同值的 String 对象，为什么返回的是 true？代码如下：</span><br><span class="line"></span><br><span class="line">String s1 = new String(&quot;老王&quot;);</span><br><span class="line">String s2 = new String(&quot;老王&quot;);</span><br><span class="line">System.out.println(s1.equals(s2)); // true</span><br><span class="line">同样的，当我们进入 String 的 equals 方法，找到了答案，代码如下：</span><br><span class="line"></span><br><span class="line">public boolean equals(Object anObject) &#123;</span><br><span class="line">    if (this == anObject) &#123;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">    if (anObject instanceof String) &#123;</span><br><span class="line">        String anotherString = (String)anObject;</span><br><span class="line">        int n = value.length;</span><br><span class="line">        if (n == anotherString.value.length) &#123;</span><br><span class="line">            char v1[] = value;</span><br><span class="line">            char v2[] = anotherString.value;</span><br><span class="line">            int i = 0;</span><br><span class="line">            while (n-- != 0) &#123;</span><br><span class="line">                if (v1[i] != v2[i])</span><br><span class="line">                    return false;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">            return true;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return false;</span><br><span class="line">&#125;</span><br><span class="line">原来是 String 重写了 Object 的 equals 方法，把引用比较改成了值比较。</span><br><span class="line"></span><br><span class="line">总结 ：== 对于基本类型来说是值比较，对于引用类型来说是比较的是引用；而 equals 默认情况下是引用比较，只是很多类重新了 equals 方法，比如 String、Integer 等把它变成了值比较，所以一般情况下 equals 比较的是值是否相等。</span><br><span class="line"></span><br><span class="line">3. 两个对象的 hashCode() 相同，则 equals() 也一定为 true，对吗？</span><br><span class="line"></span><br><span class="line">不对，两个对象的 hashCode() 相同，equals() 不一定 true。</span><br><span class="line"></span><br><span class="line">代码示例：</span><br><span class="line"></span><br><span class="line">String str1 = &quot;通话&quot;;</span><br><span class="line">String str2 = &quot;重地&quot;;</span><br><span class="line">System. out. println(String. format(&quot;str1：%d | str2：%d&quot;,  str1. hashCode(),str2. hashCode()));</span><br><span class="line">System. out. println(str1. equals(str2));</span><br><span class="line">执行的结果：</span><br><span class="line"></span><br><span class="line">str1：1179395 | str2：1179395</span><br><span class="line"></span><br><span class="line">false</span><br><span class="line">代码解读：很显然“通话”和“重地”的 hashCode() 相同，然而 equals() 则为 false，因为在散列表中，hashCode() 相等即两个键值对的哈希值相等，然而哈希值相等，并不一定能得出键值对相等。</span><br><span class="line"></span><br><span class="line">4. final 在 Java 中有什么作用？</span><br><span class="line"></span><br><span class="line">final 修饰的类叫最终类，该类不能被继承。</span><br><span class="line">final 修饰的方法不能被重写。</span><br><span class="line">final 修饰的变量叫常量，常量必须初始化，初始化之后值就不能被修改。</span><br><span class="line">5. Java 中的 Math. round(-1. 5) 等于多少？</span><br><span class="line"></span><br><span class="line">等于 -1，因为在数轴上取值时，中间值（0.5）向右取整，所以正 0.5 是往上取整，负 0.5 是直接舍弃。</span><br><span class="line"></span><br><span class="line">6. String 属于基础的数据类型吗？</span><br><span class="line"></span><br><span class="line">String 不属于基础类型，基础类型有 8 种：byte、boolean、char、short、int、float、long、double，而 String 属于对象。</span><br><span class="line"></span><br><span class="line">7. Java 中操作字符串都有哪些类？它们之间有什么区别？</span><br><span class="line"></span><br><span class="line">操作字符串的类有：String、StringBuffer、StringBuilder。</span><br><span class="line"></span><br><span class="line">String 和 StringBuffer、StringBuilder 的区别在于 String 声明的是不可变的对象，每次操作都会生成新的 String 对象，然后将指针指向新的 String 对象，而 StringBuffer、StringBuilder 可以在原有对象的基础上进行操作，所以在经常改变字符串内容的情况下最好不要使用 String。</span><br><span class="line"></span><br><span class="line">StringBuffer 和 StringBuilder 最大的区别在于，StringBuffer 是线程安全的，而 StringBuilder 是非线程安全的，但 StringBuilder 的性能却高于 StringBuffer，所以在单线程环境下推荐使用 StringBuilder，多线程环境下推荐使用 StringBuffer。</span><br><span class="line"></span><br><span class="line">8. String str=&quot;i&quot;与 String str=new String(&quot;i&quot;)一样吗？</span><br><span class="line"></span><br><span class="line">不一样，因为内存的分配方式不一样。String str=&quot;i&quot;的方式，Java 虚拟机会将其分配到常量池中；而 String str=new String(&quot;i&quot;) 则会被分到堆内存中。</span><br><span class="line"></span><br><span class="line">9. 如何将字符串反转？</span><br><span class="line"></span><br><span class="line">使用 StringBuilder 或者 stringBuffer 的 reverse() 方法。</span><br><span class="line"></span><br><span class="line">示例代码：</span><br><span class="line"></span><br><span class="line">// StringBuffer reverse</span><br><span class="line">StringBuffer stringBuffer = new StringBuffer();</span><br><span class="line">stringBuffer. append(&quot;abcdefg&quot;);</span><br><span class="line">System. out. println(stringBuffer. reverse()); // gfedcba</span><br><span class="line">// StringBuilder reverse</span><br><span class="line">StringBuilder stringBuilder = new StringBuilder();</span><br><span class="line">stringBuilder. append(&quot;abcdefg&quot;);</span><br><span class="line">System. out. println(stringBuilder. reverse()); // gfedcba</span><br><span class="line">10. String 类的常用方法都有那些？</span><br><span class="line"></span><br><span class="line">indexOf()：返回指定字符的索引。</span><br><span class="line">charAt()：返回指定索引处的字符。</span><br><span class="line">replace()：字符串替换。</span><br><span class="line">trim()：去除字符串两端空白。</span><br><span class="line">split()：分割字符串，返回一个分割后的字符串数组。</span><br><span class="line">getBytes()：返回字符串的 byte 类型数组。</span><br><span class="line">length()：返回字符串长度。</span><br><span class="line">toLowerCase()：将字符串转成小写字母。</span><br><span class="line">toUpperCase()：将字符串转成大写字符。</span><br><span class="line">substring()：截取字符串。</span><br><span class="line">equals()：字符串比较。</span><br><span class="line">11. 抽象类必须要有抽象方法吗？</span><br><span class="line"></span><br><span class="line">不需要，抽象类不一定非要有抽象方法。</span><br><span class="line"></span><br><span class="line">示例代码：</span><br><span class="line"></span><br><span class="line">abstract class Cat &#123;</span><br><span class="line">    public static void sayHi() &#123;</span><br><span class="line">        System. out. println(&quot;hi~&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">上面代码，抽象类并没有抽象方法但完全可以正常运行。</span><br><span class="line"></span><br><span class="line">12. 普通类和抽象类有哪些区别？</span><br><span class="line"></span><br><span class="line">普通类不能包含抽象方法，抽象类可以包含抽象方法。</span><br><span class="line">抽象类不能直接实例化，普通类可以直接实例化。</span><br><span class="line">13. 抽象类能使用 final 修饰吗？</span><br><span class="line"></span><br><span class="line">不能，定义抽象类就是让其他类继承的，如果定义为 final 该类就不能被继承，这样彼此就会产生矛盾，所以 final 不能修饰抽象类，如下图所示，编辑器也会提示错误信息：</span><br><span class="line"></span><br><span class="line">编译器保存图</span><br><span class="line"></span><br><span class="line">14. 接口和抽象类有什么区别？</span><br><span class="line"></span><br><span class="line">实现：抽象类的子类使用 extends 来继承；接口必须使用 implements 来实现接口。</span><br><span class="line">构造函数：抽象类可以有构造函数；接口不能有。</span><br><span class="line">实现数量：类可以实现很多个接口；但是只能继承一个抽象类。</span><br><span class="line">访问修饰符：接口中的方法默认使用 public 修饰；抽象类中的方法可以是任意访问修饰符。</span><br><span class="line">15. Java 中 IO 流分为几种？</span><br><span class="line"></span><br><span class="line">按功能来分：输入流（input）、输出流（output）。</span><br><span class="line"></span><br><span class="line">按类型来分：字节流和字符流。</span><br><span class="line"></span><br><span class="line">字节流和字符流的区别是：字节流按 8 位传输以字节为单位输入输出数据，字符流按 16 位传输以字符为单位输入输出数据。</span><br><span class="line"></span><br><span class="line">16. BIO、NIO、AIO 有什么区别？</span><br><span class="line"></span><br><span class="line">BIO：Block IO 同步阻塞式 IO，就是我们平常使用的传统 IO，它的特点是模式简单使用方便，并发处理能力低。</span><br><span class="line">NIO：Non IO 同步非阻塞 IO，是传统 IO 的升级，客户端和服务器端通过 Channel（通道）通讯，实现了多路复用。</span><br><span class="line">AIO：Asynchronous IO 是 NIO 的升级，也叫 NIO2，实现了异步非堵塞 IO ，异步 IO 的操作基于事件和回调机制。</span><br><span class="line">17. Files的常用方法都有哪些？</span><br><span class="line"></span><br><span class="line">Files. exists()：检测文件路径是否存在。</span><br><span class="line">Files. createFile()：创建文件。</span><br><span class="line">Files. createDirectory()：创建文件夹。</span><br><span class="line">Files. delete()：删除一个文件或目录。</span><br><span class="line">Files. copy()：复制文件。</span><br><span class="line">Files. move()：移动文件。</span><br><span class="line">Files. size()：查看文件个数。</span><br><span class="line">Files. read()：读取文件。</span><br><span class="line">Files. write()：写入文件。</span><br><span class="line">容器</span><br><span class="line"></span><br><span class="line">18. Java 容器都有哪些？</span><br><span class="line"></span><br><span class="line">Java 容器分为 Collection 和 Map 两大类，其下又有很多子类，如下所示：</span><br><span class="line"></span><br><span class="line">Collection</span><br><span class="line">List</span><br><span class="line">ArrayList</span><br><span class="line">LinkedList</span><br><span class="line">Vector</span><br><span class="line">Stack</span><br><span class="line">Set</span><br><span class="line">HashSet</span><br><span class="line">LinkedHashSet</span><br><span class="line">TreeSet</span><br><span class="line">Map</span><br><span class="line">HashMap</span><br><span class="line">LinkedHashMap</span><br><span class="line">TreeMap</span><br><span class="line">ConcurrentHashMap</span><br><span class="line">Hashtable</span><br><span class="line">19. Collection 和 Collections 有什么区别？</span><br><span class="line"></span><br><span class="line">Collection 是一个集合接口，它提供了对集合对象进行基本操作的通用接口方法，所有集合都是它的子类，比如 List、Set 等。</span><br><span class="line">Collections 是一个包装类，包含了很多静态方法，不能被实例化，就像一个工具类，比如提供的排序方法： Collections. sort(list)。</span><br><span class="line">20. List、Set、Map 之间的区别是什么？</span><br><span class="line"></span><br><span class="line">List、Set、Map 的区别主要体现在两个方面：元素是否有序、是否允许元素重复。</span><br><span class="line"></span><br><span class="line">三者之间的区别，如下表：</span><br><span class="line"></span><br><span class="line">区别图</span><br><span class="line"></span><br><span class="line">21. HashMap 和 Hashtable 有什么区别？</span><br><span class="line"></span><br><span class="line">存储：HashMap 运行 key 和 value 为 null，而 Hashtable 不允许。</span><br><span class="line">线程安全：Hashtable 是线程安全的，而 HashMap 是非线程安全的。</span><br><span class="line">推荐使用：在 Hashtable 的类注释可以看到，Hashtable 是保留类不建议使用，推荐在单线程环境下使用 HashMap 替代，如果需要多线程使用则用 ConcurrentHashMap 替代。</span><br><span class="line">22. 如何决定使用 HashMap 还是 TreeMap？</span><br><span class="line"></span><br><span class="line">对于在 Map 中插入、删除、定位一个元素这类操作，HashMap 是最好的选择，因为相对而言 HashMap 的插入会更快，但如果你要对一个 key 集合进行有序的遍历，那 TreeMap 是更好的选择。</span><br><span class="line"></span><br><span class="line">23. 说一下 HashMap 的实现原理？</span><br><span class="line"></span><br><span class="line">HashMap 基于 Hash 算法实现的，我们通过 put(key,value)存储，get(key)来获取。当传入 key 时，HashMap 会根据 key. hashCode() 计算出 hash 值，根据 hash 值将 value 保存在 bucket 里。当计算出的 hash 值相同时，我们称之为 hash 冲突，HashMap 的做法是用链表和红黑树存储相同 hash 值的 value。当 hash 冲突的个数比较少时，使用链表否则使用红黑树。</span><br><span class="line"></span><br><span class="line">24. 说一下 HashSet 的实现原理？</span><br><span class="line"></span><br><span class="line">HashSet 是基于 HashMap 实现的，HashSet 底层使用 HashMap 来保存所有元素，因此 HashSet 的实现比较简单，相关 HashSet 的操作，基本上都是直接调用底层 HashMap 的相关方法来完成，HashSet 不允许重复的值。</span><br><span class="line"></span><br><span class="line">25. ArrayList 和 LinkedList 的区别是什么？</span><br><span class="line"></span><br><span class="line">数据结构实现：ArrayList 是动态数组的数据结构实现，而 LinkedList 是双向链表的数据结构实现。</span><br><span class="line">随机访问效率：ArrayList 比 LinkedList 在随机访问的时候效率要高，因为 LinkedList 是线性的数据存储方式，所以需要移动指针从前往后依次查找。</span><br><span class="line">增加和删除效率：在非首尾的增加和删除操作，LinkedList 要比 ArrayList 效率要高，因为 ArrayList 增删操作要影响数组内的其他数据的下标。</span><br><span class="line">综合来说，在需要频繁读取集合中的元素时，更推荐使用 ArrayList，而在插入和删除操作较多时，更推荐使用 LinkedList。</span><br><span class="line"></span><br><span class="line">26. 如何实现数组和 List 之间的转换？</span><br><span class="line"></span><br><span class="line">数组转 List：使用 Arrays. asList(array) 进行转换。</span><br><span class="line">List 转数组：使用 List 自带的 toArray() 方法。</span><br><span class="line">代码示例：</span><br><span class="line"></span><br><span class="line">// list to array</span><br><span class="line">List&lt;String&gt; list = new ArrayList&lt;String&gt;();</span><br><span class="line">list. add(&quot;tt&quot;);</span><br><span class="line">list. add(&quot;的博客&quot;);</span><br><span class="line">list. toArray();</span><br><span class="line">// array to list</span><br><span class="line">String[] array = new String[]&#123;&quot;tt&quot;,&quot;的博客&quot;&#125;;</span><br><span class="line">Arrays. asList(array);</span><br><span class="line">27. ArrayList 和 Vector 的区别是什么？</span><br><span class="line"></span><br><span class="line">线程安全：Vector 使用了 Synchronized 来实现线程同步，是线程安全的，而 ArrayList 是非线程安全的。</span><br><span class="line">性能：ArrayList 在性能方面要优于 Vector。</span><br><span class="line">扩容：ArrayList 和 Vector 都会根据实际的需要动态的调整容量，只不过在 Vector 扩容每次会增加 1 倍，而 ArrayList 只会增加 50%。</span><br><span class="line">28. Array 和 ArrayList 有何区别？</span><br><span class="line"></span><br><span class="line">Array 可以存储基本数据类型和对象，ArrayList 只能存储对象。</span><br><span class="line">Array 是指定固定大小的，而 ArrayList 大小是自动扩展的。</span><br><span class="line">Array 内置方法没有 ArrayList 多，比如 addAll、removeAll、iteration 等方法只有 ArrayList 有。</span><br><span class="line">29. 在 Queue 中 poll()和 remove()有什么区别？</span><br><span class="line"></span><br><span class="line">相同点：都是返回第一个元素，并在队列中删除返回的对象。</span><br><span class="line">不同点：如果没有元素 poll()会返回 null，而 remove()会直接抛出 NoSuchElementException 异常。</span><br><span class="line">代码示例：</span><br><span class="line"></span><br><span class="line">Queue&lt;String&gt; queue = new LinkedList&lt;String&gt;();</span><br><span class="line">queue. offer(&quot;string&quot;); // add</span><br><span class="line">System. out. println(queue. poll());</span><br><span class="line">System. out. println(queue. remove());</span><br><span class="line">System. out. println(queue. size());</span><br><span class="line">30. 哪些集合类是线程安全的？</span><br><span class="line"></span><br><span class="line">Vector、Hashtable、Stack 都是线程安全的，而像 HashMap 则是非线程安全的，不过在 JDK 1.5 之后随着 Java. util. concurrent 并发包的出现，它们也有了自己对应的线程安全类，比如 HashMap 对应的线程安全类就是 ConcurrentHashMap。</span><br><span class="line"></span><br><span class="line">31. 迭代器 Iterator 是什么？</span><br><span class="line"></span><br><span class="line">Iterator 接口提供遍历任何 Collection 的接口。我们可以从一个 Collection 中使用迭代器方法来获取迭代器实例。迭代器取代了 Java 集合框架中的 Enumeration，迭代器允许调用者在迭代过程中移除元素。</span><br><span class="line"></span><br><span class="line">32. Iterator 怎么使用？有什么特点？</span><br><span class="line"></span><br><span class="line">Iterator 使用代码如下：</span><br><span class="line"></span><br><span class="line">List&lt;String&gt; list = new ArrayList&lt;&gt;();</span><br><span class="line">Iterator&lt;String&gt; it = list. iterator();</span><br><span class="line">while(it. hasNext())&#123;</span><br><span class="line">  String obj = it. next();</span><br><span class="line">  System. out. println(obj);</span><br><span class="line">&#125;</span><br><span class="line">Iterator 的特点是更加安全，因为它可以确保，在当前遍历的集合元素被更改的时候，就会抛出 ConcurrentModificationException 异常。</span><br><span class="line"></span><br><span class="line">33. Iterator 和 ListIterator 有什么区别？</span><br><span class="line"></span><br><span class="line">Iterator 可以遍历 Set 和 List 集合，而 ListIterator 只能遍历 List。</span><br><span class="line">Iterator 只能单向遍历，而 ListIterator 可以双向遍历（向前/后遍历）。</span><br><span class="line">ListIterator 从 Iterator 接口继承，然后添加了一些额外的功能，比如添加一个元素、替换一个元素、获取前面或后面元素的索引位置。</span><br><span class="line">34. 怎么确保一个集合不能被修改？</span><br><span class="line"></span><br><span class="line">可以使用 Collections. unmodifiableCollection(Collection c) 方法来创建一个只读集合，这样改变集合的任何操作都会抛出 Java. lang. UnsupportedOperationException 异常。</span><br><span class="line"></span><br><span class="line">示例代码如下：</span><br><span class="line"></span><br><span class="line">List&lt;String&gt; list = new ArrayList&lt;&gt;();</span><br><span class="line">list. add(&quot;x&quot;);</span><br><span class="line">Collection&lt;String&gt; clist = Collections. unmodifiableCollection(list);</span><br><span class="line">clist. add(&quot;y&quot;); // 运行时此行报错</span><br><span class="line">System. out. println(list. size());</span><br><span class="line">多线程</span><br><span class="line"></span><br><span class="line">35. 并行和并发有什么区别？</span><br><span class="line"></span><br><span class="line">并行：多个处理器或多核处理器同时处理多个任务。</span><br><span class="line">并发：多个任务在同一个 CPU 核上，按细分的时间片轮流(交替)执行，从逻辑上来看那些任务是同时执行。</span><br><span class="line">如下图：</span><br><span class="line"></span><br><span class="line">并发和并行</span><br><span class="line"></span><br><span class="line">并发 = 两个队列和一台咖啡机。</span><br><span class="line"></span><br><span class="line">并行 = 两个队列和两台咖啡机。</span><br><span class="line"></span><br><span class="line">36. 线程和进程的区别？</span><br><span class="line"></span><br><span class="line">一个程序下至少有一个进程，一个进程下至少有一个线程，一个进程下也可以有多个线程来增加程序的执行速度。</span><br><span class="line"></span><br><span class="line">37. 守护线程是什么？</span><br><span class="line"></span><br><span class="line">守护线程是运行在后台的一种特殊进程。它独立于控制终端并且周期性地执行某种任务或等待处理某些发生的事件。在 Java 中垃圾回收线程就是特殊的守护线程。</span><br><span class="line"></span><br><span class="line">38. 创建线程有哪几种方式？</span><br><span class="line"></span><br><span class="line">创建线程有三种方式：</span><br><span class="line"></span><br><span class="line">继承 Thread 重写 run 方法；</span><br><span class="line">实现 Runnable 接口；</span><br><span class="line">实现 Callable 接口。</span><br><span class="line">39. 说一下 runnable 和 callable 有什么区别？</span><br><span class="line"></span><br><span class="line">runnable 没有返回值，callable 可以拿到有返回值，callable 可以看作是 runnable 的补充。</span><br><span class="line"></span><br><span class="line">40. 线程有哪些状态？</span><br><span class="line"></span><br><span class="line">线程的状态：</span><br><span class="line"></span><br><span class="line">NEW 尚未启动</span><br><span class="line">RUNNABLE 正在执行中</span><br><span class="line">BLOCKED 阻塞的（被同步锁或者IO锁阻塞）</span><br><span class="line">WAITING 永久等待状态</span><br><span class="line">TIMED_WAITING 等待指定的时间重新被唤醒的状态</span><br><span class="line">TERMINATED 执行完成</span><br><span class="line">41. sleep() 和 wait() 有什么区别？</span><br><span class="line"></span><br><span class="line">类的不同：sleep() 来自 Thread，wait() 来自 Object。</span><br><span class="line">释放锁：sleep() 不释放锁；wait() 释放锁。</span><br><span class="line">用法不同：sleep() 时间到会自动恢复；wait() 可以使用 notify()/notifyAll()直接唤醒。</span><br><span class="line">42. notify()和 notifyAll()有什么区别？</span><br><span class="line"></span><br><span class="line">notifyAll()会唤醒所有的线程，notify()之后唤醒一个线程。notifyAll() 调用后，会将全部线程由等待池移到锁池，然后参与锁的竞争，竞争成功则继续执行，如果不成功则留在锁池等待锁被释放后再次参与竞争。而 notify()只会唤醒一个线程，具体唤醒哪一个线程由虚拟机控制。</span><br><span class="line"></span><br><span class="line">43. 线程的 run() 和 start() 有什么区别？</span><br><span class="line"></span><br><span class="line">start() 方法用于启动线程，run() 方法用于执行线程的运行时代码。run() 可以重复调用，而 start() 只能调用一次。</span><br><span class="line"></span><br><span class="line">44. 创建线程池有哪几种方式？</span><br><span class="line"></span><br><span class="line">线程池创建有七种方式，最核心的是最后一种：</span><br><span class="line"></span><br><span class="line">newSingleThreadExecutor()：它的特点在于工作线程数目被限制为 1，操作一个无界的工作队列，所以它保证了所有任务的都是被顺序执行，最多会有一个任务处于活动状态，并且不允许使用者改动线程池实例，因此可以避免其改变线程数目；</span><br><span class="line"></span><br><span class="line">newCachedThreadPool()：它是一种用来处理大量短时间工作任务的线程池，具有几个鲜明特点：它会试图缓存线程并重用，当无缓存线程可用时，就会创建新的工作线程；如果线程闲置的时间超过 60 秒，则被终止并移出缓存；长时间闲置时，这种线程池，不会消耗什么资源。其内部使用 SynchronousQueue 作为工作队列；</span><br><span class="line"></span><br><span class="line">newFixedThreadPool(int nThreads)：重用指定数目（nThreads）的线程，其背后使用的是无界的工作队列，任何时候最多有 nThreads 个工作线程是活动的。这意味着，如果任务数量超过了活动队列数目，将在工作队列中等待空闲线程出现；如果有工作线程退出，将会有新的工作线程被创建，以补足指定的数目 nThreads；</span><br><span class="line"></span><br><span class="line">newSingleThreadScheduledExecutor()：创建单线程池，返回 ScheduledExecutorService，可以进行定时或周期性的工作调度；</span><br><span class="line"></span><br><span class="line">newScheduledThreadPool(int corePoolSize)：和newSingleThreadScheduledExecutor()类似，创建的是个 ScheduledExecutorService，可以进行定时或周期性的工作调度，区别在于单一工作线程还是多个工作线程；</span><br><span class="line"></span><br><span class="line">newWorkStealingPool(int parallelism)：这是一个经常被人忽略的线程池，Java 8 才加入这个创建方法，其内部会构建ForkJoinPool，利用Work-Stealing算法，并行地处理任务，不保证处理顺序；</span><br><span class="line"></span><br><span class="line">ThreadPoolExecutor()：是最原始的线程池创建，上面1-3创建方式都是对ThreadPoolExecutor的封装。</span><br><span class="line"></span><br><span class="line">45. 线程池都有哪些状态？</span><br><span class="line"></span><br><span class="line">RUNNING：这是最正常的状态，接受新的任务，处理等待队列中的任务。</span><br><span class="line">SHUTDOWN：不接受新的任务提交，但是会继续处理等待队列中的任务。</span><br><span class="line">STOP：不接受新的任务提交，不再处理等待队列中的任务，中断正在执行任务的线程。</span><br><span class="line">TIDYING：所有的任务都销毁了，workCount 为 0，线程池的状态在转换为 TIDYING 状态时，会执行钩子方法 terminated()。</span><br><span class="line">TERMINATED：terminated()方法结束后，线程池的状态就会变成这个。</span><br><span class="line">46. 线程池中 submit() 和 execute() 方法有什么区别？</span><br><span class="line"></span><br><span class="line">execute()：只能执行 Runnable 类型的任务。</span><br><span class="line">submit()：可以执行 Runnable 和 Callable 类型的任务。</span><br><span class="line">Callable 类型的任务可以获取执行的返回值，而 Runnable 执行无返回值。</span><br><span class="line"></span><br><span class="line">47. 在 Java 程序中怎么保证多线程的运行安全？</span><br><span class="line"></span><br><span class="line">方法一：使用安全类，比如 Java. util. concurrent 下的类。</span><br><span class="line">方法二：使用自动锁 synchronized。</span><br><span class="line">方法三：使用手动锁 Lock。</span><br><span class="line">手动锁 Java 示例代码如下：</span><br><span class="line"></span><br><span class="line">Lock lock = new ReentrantLock();</span><br><span class="line">lock. lock();</span><br><span class="line">try &#123;</span><br><span class="line">    System. out. println(&quot;获得锁&quot;);</span><br><span class="line">&#125; catch (Exception e) &#123;</span><br><span class="line">    // TODO: handle exception</span><br><span class="line">&#125; finally &#123;</span><br><span class="line">    System. out. println(&quot;释放锁&quot;);</span><br><span class="line">    lock. unlock();</span><br><span class="line">&#125;</span><br><span class="line">48. 多线程中 synchronized 锁升级的原理是什么？</span><br><span class="line"></span><br><span class="line">synchronized 锁升级原理：在锁对象的对象头里面有一个 threadid 字段，在第一次访问的时候 threadid 为空，jvm 让其持有偏向锁，并将 threadid 设置为其线程 id，再次进入的时候会先判断 threadid 是否与其线程 id 一致，如果一致则可以直接使用此对象，如果不一致，则升级偏向锁为轻量级锁，通过自旋循环一定次数来获取锁，执行一定次数之后，如果还没有正常获取到要使用的对象，此时就会把锁从轻量级升级为重量级锁，此过程就构成了 synchronized 锁的升级。</span><br><span class="line"></span><br><span class="line">锁的升级的目的：锁升级是为了减低了锁带来的性能消耗。在 Java 6 之后优化 synchronized 的实现方式，使用了偏向锁升级为轻量级锁再升级到重量级锁的方式，从而减低了锁带来的性能消耗。</span><br><span class="line"></span><br><span class="line">49. 什么是死锁？</span><br><span class="line"></span><br><span class="line">当线程 A 持有独占锁a，并尝试去获取独占锁 b 的同时，线程 B 持有独占锁 b，并尝试获取独占锁 a 的情况下，就会发生 AB 两个线程由于互相持有对方需要的锁，而发生的阻塞现象，我们称为死锁。</span><br><span class="line"></span><br><span class="line">50. 怎么防止死锁？</span><br><span class="line"></span><br><span class="line">尽量使用 tryLock(long timeout, TimeUnit unit)的方法(ReentrantLock、ReentrantReadWriteLock)，设置超时时间，超时可以退出防止死锁。</span><br><span class="line">尽量使用 Java. util. concurrent 并发类代替自己手写锁。</span><br><span class="line">尽量降低锁的使用粒度，尽量不要几个功能用同一把锁。</span><br><span class="line">尽量减少同步的代码块。</span><br><span class="line">51. ThreadLocal 是什么？有哪些使用场景？</span><br><span class="line"></span><br><span class="line">ThreadLocal 为每个使用该变量的线程提供独立的变量副本，所以每一个线程都可以独立地改变自己的副本，而不会影响其它线程所对应的副本。</span><br><span class="line"></span><br><span class="line">ThreadLocal 的经典使用场景是数据库连接和 session 管理等。</span><br><span class="line"></span><br><span class="line">52. 说一下 synchronized 底层实现原理？</span><br><span class="line"></span><br><span class="line">synchronized 是由一对 monitorenter/monitorexit 指令实现的，monitor 对象是同步的基本实现单元。在 Java 6 之前，monitor 的实现完全是依靠操作系统内部的互斥锁，因为需要进行用户态到内核态的切换，所以同步操作是一个无差别的重量级操作，性能也很低。但在 Java 6 的时候，Java 虚拟机 对此进行了大刀阔斧地改进，提供了三种不同的 monitor 实现，也就是常说的三种不同的锁：偏向锁（Biased Locking）、轻量级锁和重量级锁，大大改进了其性能。</span><br><span class="line"></span><br><span class="line">53. synchronized 和 volatile 的区别是什么？</span><br><span class="line"></span><br><span class="line">volatile 是变量修饰符；synchronized 是修饰类、方法、代码段。</span><br><span class="line">volatile 仅能实现变量的修改可见性，不能保证原子性；而 synchronized 则可以保证变量的修改可见性和原子性。</span><br><span class="line">volatile 不会造成线程的阻塞；synchronized 可能会造成线程的阻塞。</span><br><span class="line">54. synchronized 和 Lock 有什么区别？</span><br><span class="line"></span><br><span class="line">synchronized 可以给类、方法、代码块加锁；而 lock 只能给代码块加锁。</span><br><span class="line">synchronized 不需要手动获取锁和释放锁，使用简单，发生异常会自动释放锁，不会造成死锁；而 lock 需要自己加锁和释放锁，如果使用不当没有 unLock()去释放锁就会造成死锁。</span><br><span class="line">通过 Lock 可以知道有没有成功获取锁，而 synchronized 却无法办到。</span><br><span class="line">55. synchronized 和 ReentrantLock 区别是什么？</span><br><span class="line"></span><br><span class="line">synchronized 早期的实现比较低效，对比 ReentrantLock，大多数场景性能都相差较大，但是在 Java 6 中对 synchronized 进行了非常多的改进。</span><br><span class="line"></span><br><span class="line">主要区别如下：</span><br><span class="line"></span><br><span class="line">ReentrantLock 使用起来比较灵活，但是必须有释放锁的配合动作；</span><br><span class="line">ReentrantLock 必须手动获取与释放锁，而 synchronized 不需要手动释放和开启锁；</span><br><span class="line">ReentrantLock 只适用于代码块锁，而 synchronized 可用于修饰方法、代码块等。</span><br><span class="line">volatile 标记的变量不会被编译器优化；synchronized 标记的变量可以被编译器优化。</span><br><span class="line">56. 说一下 atomic 的原理？</span><br><span class="line"></span><br><span class="line">atomic 主要利用 CAS (Compare And Wwap) 和 volatile 和 native 方法来保证原子操作，从而避免 synchronized 的高开销，执行效率大为提升。</span><br><span class="line"></span><br><span class="line">反射</span><br><span class="line"></span><br><span class="line">57. 什么是反射？</span><br><span class="line"></span><br><span class="line">反射是在运行状态中，对于任意一个类，都能够知道这个类的所有属性和方法；对于任意一个对象，都能够调用它的任意一个方法和属性；这种动态获取的信息以及动态调用对象的方法的功能称为 Java 语言的反射机制。</span><br><span class="line"></span><br><span class="line">58. 什么是 Java 序列化？什么情况下需要序列化？</span><br><span class="line"></span><br><span class="line">Java 序列化是为了保存各种对象在内存中的状态，并且可以把保存的对象状态再读出来。</span><br><span class="line"></span><br><span class="line">以下情况需要使用 Java 序列化：</span><br><span class="line"></span><br><span class="line">想把的内存中的对象状态保存到一个文件中或者数据库中时候；</span><br><span class="line">想用套接字在网络上传送对象的时候；</span><br><span class="line">想通过RMI（远程方法调用）传输对象的时候。</span><br><span class="line">59. 动态代理是什么？有哪些应用？</span><br><span class="line"></span><br><span class="line">动态代理是运行时动态生成代理类。</span><br><span class="line"></span><br><span class="line">动态代理的应用有 spring aop、hibernate 数据查询、测试框架的后端 mock、rpc，Java注解对象获取等。</span><br><span class="line"></span><br><span class="line">60. 怎么实现动态代理？</span><br><span class="line"></span><br><span class="line">JDK 原生动态代理和 cglib 动态代理。JDK 原生动态代理是基于接口实现的，而 cglib 是基于继承当前类的子类实现的。</span><br><span class="line"></span><br><span class="line">对象拷贝</span><br><span class="line"></span><br><span class="line">61. 为什么要使用克隆？</span><br><span class="line"></span><br><span class="line">克隆的对象可能包含一些已经修改过的属性，而 new 出来的对象的属性都还是初始化时候的值，所以当需要一个新的对象来保存当前对象的“状态”就靠克隆方法了。</span><br><span class="line"></span><br><span class="line">62. 如何实现对象克隆？</span><br><span class="line"></span><br><span class="line">实现 Cloneable 接口并重写 Object 类中的 clone() 方法。</span><br><span class="line">实现 Serializable 接口，通过对象的序列化和反序列化实现克隆，可以实现真正的深度克隆。</span><br><span class="line">63. 深拷贝和浅拷贝区别是什么？</span><br><span class="line"></span><br><span class="line">浅克隆：当对象被复制时只复制它本身和其中包含的值类型的成员变量，而引用类型的成员对象并没有复制。</span><br><span class="line">深克隆：除了对象本身被复制外，对象所包含的所有成员变量也将复制。</span><br><span class="line">Java Web</span><br><span class="line"></span><br><span class="line">64. JSP 和 servlet 有什么区别？</span><br><span class="line"></span><br><span class="line">JSP 是 servlet 技术的扩展，本质上就是 servlet 的简易方式。servlet 和 JSP 最主要的不同点在于，servlet 的应用逻辑是在 Java 文件中，并且完全从表示层中的 html 里分离开来，而 JSP 的情况是 Java 和 html 可以组合成一个扩展名为 JSP 的文件。JSP 侧重于视图，servlet 主要用于控制逻辑。</span><br><span class="line"></span><br><span class="line">65. JSP 有哪些内置对象？作用分别是什么？</span><br><span class="line"></span><br><span class="line">JSP 有 9 大内置对象：</span><br><span class="line"></span><br><span class="line">request：封装客户端的请求，其中包含来自 get 或 post 请求的参数；</span><br><span class="line">response：封装服务器对客户端的响应；</span><br><span class="line">pageContext：通过该对象可以获取其他对象；</span><br><span class="line">session：封装用户会话的对象；</span><br><span class="line">application：封装服务器运行环境的对象；</span><br><span class="line">out：输出服务器响应的输出流对象；</span><br><span class="line">config：Web 应用的配置对象；</span><br><span class="line">page：JSP 页面本身（相当于 Java 程序中的 this）；</span><br><span class="line">exception：封装页面抛出异常的对象。</span><br><span class="line">66. 说一下 JSP 的 4 种作用域？</span><br><span class="line"></span><br><span class="line">page：代表与一个页面相关的对象和属性。</span><br><span class="line">request：代表与客户端发出的一个请求相关的对象和属性。一个请求可能跨越多个页面，涉及多个 Web 组件；需要在页面显示的临时数据可以置于此作用域。</span><br><span class="line">session：代表与某个用户与服务器建立的一次会话相关的对象和属性。跟某个用户相关的数据应该放在用户自己的 session 中。</span><br><span class="line">application：代表与整个 Web 应用程序相关的对象和属性，它实质上是跨越整个 Web 应用程序，包括多个页面、请求和会话的一个全局作用域。</span><br><span class="line">67. session 和 cookie 有什么区别？</span><br><span class="line"></span><br><span class="line">存储位置不同：session 存储在服务器端；cookie 存储在浏览器端。</span><br><span class="line">安全性不同：cookie 安全性一般，在浏览器存储，可以被伪造和修改。</span><br><span class="line">容量和个数限制：cookie 有容量限制，每个站点下的 cookie 也有个数限制。</span><br><span class="line">存储的多样性：session 可以存储在 Redis 中、数据库中、应用程序中；而 cookie 只能存储在浏览器中。</span><br><span class="line">68. 说一下 session 的工作原理？</span><br><span class="line"></span><br><span class="line">session 的工作原理是客户端登录完成之后，服务器会创建对应的 session，session 创建完之后，会把 session 的 id 发送给客户端，客户端再存储到浏览器中。这样客户端每次访问服务器时，都会带着 sessionid，服务器拿到 sessionid 之后，在内存找到与之对应的 session 这样就可以正常工作了。</span><br><span class="line"></span><br><span class="line">69. 如果客户端禁止 cookie 能实现 session 还能用吗？</span><br><span class="line"></span><br><span class="line">可以用，session 只是依赖 cookie 存储 sessionid，如果 cookie 被禁用了，可以使用 url 中添加 sessionid 的方式保证 session 能正常使用。</span><br><span class="line"></span><br><span class="line">70. spring mvc 和 struts 的区别是什么？</span><br><span class="line"></span><br><span class="line">拦截级别：struts2 是类级别的拦截；spring mvc 是方法级别的拦截。</span><br><span class="line">数据独立性：spring mvc 的方法之间基本上独立的，独享 request 和 response 数据，请求数据通过参数获取，处理结果通过 ModelMap 交回给框架，方法之间不共享变量；而 struts2 虽然方法之间也是独立的，但其所有 action 变量是共享的，这不会影响程序运行，却给我们编码和读程序时带来了一定的麻烦。</span><br><span class="line">拦截机制：struts2 有以自己的 interceptor 机制，spring mvc 用的是独立的 aop 方式，这样导致struts2 的配置文件量比 spring mvc 大。</span><br><span class="line">对 ajax 的支持：spring mvc 集成了ajax，所有 ajax 使用很方便，只需要一个注解 @ResponseBody 就可以实现了；而 struts2 一般需要安装插件或者自己写代码才行。</span><br><span class="line">71. 如何避免 SQL 注入？</span><br><span class="line"></span><br><span class="line">使用预处理 PreparedStatement。</span><br><span class="line">使用正则表达式过滤掉字符中的特殊字符。</span><br><span class="line">72. 什么是 XSS 攻击，如何避免？</span><br><span class="line"></span><br><span class="line">XSS 攻击：即跨站脚本攻击，它是 Web 程序中常见的漏洞。原理是攻击者往 Web 页面里插入恶意的脚本代码（css 代码、Javascript 代码等），当用户浏览该页面时，嵌入其中的脚本代码会被执行，从而达到恶意攻击用户的目的，如盗取用户 cookie、破坏页面结构、重定向到其他网站等。</span><br><span class="line"></span><br><span class="line">预防 XSS 的核心是必须对输入的数据做过滤处理。</span><br><span class="line"></span><br><span class="line">73. 什么是 CSRF 攻击，如何避免？</span><br><span class="line"></span><br><span class="line">CSRF：Cross-Site Request Forgery（中文：跨站请求伪造），可以理解为攻击者盗用了你的身份，以你的名义发送恶意请求，比如：以你名义发送邮件、发消息、购买商品，虚拟货币转账等。</span><br><span class="line"></span><br><span class="line">防御手段：</span><br><span class="line"></span><br><span class="line">验证请求来源地址；</span><br><span class="line">关键操作添加验证码；</span><br><span class="line">在请求地址添加 token 并验证。</span><br><span class="line">异常</span><br><span class="line"></span><br><span class="line">74. throw 和 throws 的区别？</span><br><span class="line"></span><br><span class="line">throw：是真实抛出一个异常。</span><br><span class="line">throws：是声明可能会抛出一个异常。</span><br><span class="line">75. final、finally、finalize 有什么区别？</span><br><span class="line"></span><br><span class="line">final：是修饰符，如果修饰类，此类不能被继承；如果修饰方法和变量，则表示此方法和此变量不能在被改变，只能使用。</span><br><span class="line">finally：是 try&#123;&#125; catch&#123;&#125; finally&#123;&#125; 最后一部分，表示不论发生任何情况都会执行，finally 部分可以省略，但如果 finally 部分存在，则一定会执行 finally 里面的代码。</span><br><span class="line">finalize： 是 Object 类的一个方法，在垃圾收集器执行的时候会调用被回收对象的此方法。</span><br><span class="line">76. try-catch-finally 中哪个部分可以省略？</span><br><span class="line"></span><br><span class="line">try-catch-finally 其中 catch 和 finally 都可以被省略，但是不能同时省略，也就是说有 try 的时候，必须后面跟一个 catch 或者 finally。</span><br><span class="line"></span><br><span class="line">77. try-catch-finally 中，如果 catch 中 return 了，finally 还会执行吗？</span><br><span class="line"></span><br><span class="line">finally 一定会执行，即使是 catch 中 return 了，catch 中的 return 会等 finally 中的代码执行完之后，才会执行。</span><br><span class="line"></span><br><span class="line">78. 常见的异常类有哪些？</span><br><span class="line"></span><br><span class="line">NullPointerException 空指针异常</span><br><span class="line">ClassNotFoundException 指定类不存在</span><br><span class="line">NumberFormatException 字符串转换为数字异常</span><br><span class="line">IndexOutOfBoundsException 数组下标越界异常</span><br><span class="line">ClassCastException 数据类型转换异常</span><br><span class="line">FileNotFoundException 文件未找到异常</span><br><span class="line">NoSuchMethodException 方法不存在异常</span><br><span class="line">IOException IO 异常</span><br><span class="line">SocketException Socket 异常</span><br><span class="line">网络</span><br><span class="line"></span><br><span class="line">79. http 响应码 301 和 302 代表的是什么？有什么区别？</span><br><span class="line"></span><br><span class="line">301：永久重定向。</span><br><span class="line"></span><br><span class="line">302：暂时重定向。</span><br><span class="line"></span><br><span class="line">它们的区别是，301 对搜索引擎优化（SEO）更加有利；302 有被提示为网络拦截的风险。</span><br><span class="line"></span><br><span class="line">80. forward 和 redirect 的区别？</span><br><span class="line"></span><br><span class="line">forward 是转发 和 redirect 是重定向：</span><br><span class="line"></span><br><span class="line">地址栏 url 显示：foward url 不会发生改变，redirect url 会发生改变；</span><br><span class="line">数据共享：forward 可以共享 request 里的数据，redirect 不能共享；</span><br><span class="line">效率：forward 比 redirect 效率高。</span><br><span class="line">81. 简述 tcp 和 udp的区别？</span><br><span class="line"></span><br><span class="line">tcp 和 udp 是 OSI 模型中的运输层中的协议。tcp 提供可靠的通信传输，而 udp 则常被用于让广播和细节控制交给应用的通信传输。</span><br><span class="line"></span><br><span class="line">两者的区别大致如下：</span><br><span class="line"></span><br><span class="line">tcp 面向连接，udp 面向非连接即发送数据前不需要建立链接；</span><br><span class="line">tcp 提供可靠的服务（数据传输），udp 无法保证；</span><br><span class="line">tcp 面向字节流，udp 面向报文；</span><br><span class="line">tcp 数据传输慢，udp 数据传输快；</span><br><span class="line">82. tcp 为什么要三次握手，两次不行吗？为什么？</span><br><span class="line"></span><br><span class="line">如果采用两次握手，那么只要服务器发出确认数据包就会建立连接，但由于客户端此时并未响应服务器端的请求，那此时服务器端就会一直在等待客户端，这样服务器端就白白浪费了一定的资源。若采用三次握手，服务器端没有收到来自客户端的再此确认，则就会知道客户端并没有要求建立请求，就不会浪费服务器的资源。</span><br><span class="line"></span><br><span class="line">83. 说一下 tcp 粘包是怎么产生的？</span><br><span class="line"></span><br><span class="line">tcp 粘包可能发生在发送端或者接收端，分别来看两端各种产生粘包的原因：</span><br><span class="line"></span><br><span class="line">发送端粘包：发送端需要等缓冲区满才发送出去，造成粘包；</span><br><span class="line">接收方粘包：接收方不及时接收缓冲区的包，造成多个包接收。</span><br><span class="line">84. OSI 的七层模型都有哪些？</span><br><span class="line"></span><br><span class="line">物理层：利用传输介质为数据链路层提供物理连接，实现比特流的透明传输。</span><br><span class="line">数据链路层：负责建立和管理节点间的链路。</span><br><span class="line">网络层：通过路由选择算法，为报文或分组通过通信子网选择最适当的路径。</span><br><span class="line">传输层：向用户提供可靠的端到端的差错和流量控制，保证报文的正确传输。</span><br><span class="line">会话层：向两个实体的表示层提供建立和使用连接的方法。</span><br><span class="line">表示层：处理用户信息的表示问题，如编码、数据格式转换和加密解密等。</span><br><span class="line">应用层：直接向用户提供服务，完成用户希望在网络上完成的各种工作。</span><br><span class="line">85. get 和 post 请求有哪些区别？</span><br><span class="line"></span><br><span class="line">get 请求会被浏览器主动缓存，而 post 不会。</span><br><span class="line">get 传递参数有大小限制，而 post 没有。</span><br><span class="line">post 参数传输更安全，get 的参数会明文限制在 url 上，post 不会。</span><br><span class="line">86. 如何实现跨域？</span><br><span class="line"></span><br><span class="line">实现跨域有以下几种方案：</span><br><span class="line"></span><br><span class="line">服务器端运行跨域 设置 CORS 等于 *；</span><br><span class="line">在单个接口使用注解 @CrossOrigin 运行跨域；</span><br><span class="line">使用 jsonp 跨域；</span><br><span class="line">87. 说一下 JSONP 实现原理？</span><br><span class="line"></span><br><span class="line">jsonp：JSON with Padding，它是利用script标签的 src 连接可以访问不同源的特性，加载远程返回的“JS 函数”来执行的。</span><br><span class="line"></span><br><span class="line">设计模式</span><br><span class="line"></span><br><span class="line">88. 说一下你熟悉的设计模式？</span><br><span class="line"></span><br><span class="line">单例模式：保证被创建一次，节省系统开销。</span><br><span class="line">工厂模式（简单工厂、抽象工厂）：解耦代码。</span><br><span class="line">观察者模式：定义了对象之间的一对多的依赖，这样一来，当一个对象改变时，它的所有的依赖者都会收到通知并自动更新。</span><br><span class="line">外观模式：提供一个统一的接口，用来访问子系统中的一群接口，外观定义了一个高层的接口，让子系统更容易使用。</span><br><span class="line">模版方法模式：定义了一个算法的骨架，而将一些步骤延迟到子类中，模版方法使得子类可以在不改变算法结构的情况下，重新定义算法的步骤。</span><br><span class="line">状态模式：允许对象在内部状态改变时改变它的行为，对象看起来好像修改了它的类。</span><br><span class="line">89. 简单工厂和抽象工厂有什么区别？</span><br><span class="line"></span><br><span class="line">简单工厂：用来生产同一等级结构中的任意产品，对于增加新的产品，无能为力。</span><br><span class="line">工厂方法：用来生产同一等级结构中的固定产品，支持增加任意产品。</span><br><span class="line">抽象工厂：用来生产不同产品族的全部产品，对于增加新的产品，无能为力；支持增加产品族。</span><br><span class="line">Spring/Spring MVC</span><br><span class="line"></span><br><span class="line">90. 为什么要使用 spring？</span><br><span class="line"></span><br><span class="line">spring 提供 ioc 技术，容器会帮你管理依赖的对象，从而不需要自己创建和管理依赖对象了，更轻松的实现了程序的解耦。</span><br><span class="line">spring 提供了事务支持，使得事务操作变的更加方便。</span><br><span class="line">spring 提供了面向切片编程，这样可以更方便的处理某一类的问题。</span><br><span class="line">更方便的框架集成，spring 可以很方便的集成其他框架，比如 MyBatis、hibernate 等。</span><br><span class="line">91. 解释一下什么是 aop？</span><br><span class="line"></span><br><span class="line">aop 是面向切面编程，通过预编译方式和运行期动态代理实现程序功能的统一维护的一种技术。</span><br><span class="line"></span><br><span class="line">简单来说就是统一处理某一“切面”（类）的问题的编程思想，比如统一处理日志、异常等。</span><br><span class="line"></span><br><span class="line">92. 解释一下什么是 ioc？</span><br><span class="line"></span><br><span class="line">ioc：Inversionof Control（中文：控制反转）是 spring 的核心，对于 spring 框架来说，就是由 spring 来负责控制对象的生命周期和对象间的关系。</span><br><span class="line"></span><br><span class="line">简单来说，控制指的是当前对象对内部成员的控制权；控制反转指的是，这种控制权不由当前对象管理了，由其他（类,第三方容器）来管理。</span><br><span class="line"></span><br><span class="line">93. spring 有哪些主要模块？</span><br><span class="line"></span><br><span class="line">spring core：框架的最基础部分，提供 ioc 和依赖注入特性。</span><br><span class="line">spring context：构建于 core 封装包基础上的 context 封装包，提供了一种框架式的对象访问方法。</span><br><span class="line">spring dao：Data Access Object 提供了JDBC的抽象层。</span><br><span class="line">spring aop：提供了面向切面的编程实现，让你可以自定义拦截器、切点等。</span><br><span class="line">spring Web：提供了针对 Web 开发的集成特性，例如文件上传，利用 servlet listeners 进行 ioc 容器初始化和针对 Web 的 ApplicationContext。</span><br><span class="line">spring Web mvc：spring 中的 mvc 封装包提供了 Web 应用的 Model-View-Controller（MVC）的实现。</span><br><span class="line">94. spring 常用的注入方式有哪些？</span><br><span class="line"></span><br><span class="line">setter 属性注入</span><br><span class="line">构造方法注入</span><br><span class="line">注解方式注入</span><br><span class="line">95. spring 中的 bean 是线程安全的吗？</span><br><span class="line"></span><br><span class="line">spring 中的 bean 默认是单例模式，spring 框架并没有对单例 bean 进行多线程的封装处理。</span><br><span class="line"></span><br><span class="line">实际上大部分时候 spring bean 无状态的（比如 dao 类），所有某种程度上来说 bean 也是安全的，但如果 bean 有状态的话（比如 view model 对象），那就要开发者自己去保证线程安全了，最简单的就是改变 bean 的作用域，把“singleton”变更为“prototype”，这样请求 bean 相当于 new Bean()了，所以就可以保证线程安全了。</span><br><span class="line"></span><br><span class="line">有状态就是有数据存储功能。</span><br><span class="line">无状态就是不会保存数据。</span><br><span class="line">96. spring 支持几种 bean 的作用域？</span><br><span class="line"></span><br><span class="line">spring 支持 5 种作用域，如下：</span><br><span class="line"></span><br><span class="line">singleton：spring ioc 容器中只存在一个 bean 实例，bean 以单例模式存在，是系统默认值；</span><br><span class="line">prototype：每次从容器调用 bean 时都会创建一个新的示例，既每次 getBean()相当于执行 new Bean()操作；</span><br><span class="line">Web 环境下的作用域：</span><br><span class="line">request：每次 http 请求都会创建一个 bean；</span><br><span class="line">session：同一个 http session 共享一个 bean 实例；</span><br><span class="line">global-session：用于 portlet 容器，因为每个 portlet 有单独的 session，globalsession 提供一个全局性的 http session。</span><br><span class="line">注意： 使用 prototype 作用域需要慎重的思考，因为频繁创建和销毁 bean 会带来很大的性能开销。</span><br><span class="line"></span><br><span class="line">97. spring 自动装配 bean 有哪些方式？</span><br><span class="line"></span><br><span class="line">no：默认值，表示没有自动装配，应使用显式 bean 引用进行装配。</span><br><span class="line">byName：它根据 bean 的名称注入对象依赖项。</span><br><span class="line">byType：它根据类型注入对象依赖项。</span><br><span class="line">构造函数：通过构造函数来注入依赖项，需要设置大量的参数。</span><br><span class="line">autodetect：容器首先通过构造函数使用 autowire 装配，如果不能，则通过 byType 自动装配。</span><br><span class="line">98. spring 事务实现方式有哪些？</span><br><span class="line"></span><br><span class="line">声明式事务：声明式事务也有两种实现方式，基于 xml 配置文件的方式和注解方式（在类上添加 @Transaction 注解）。</span><br><span class="line">编码方式：提供编码的形式管理和维护事务。</span><br><span class="line">99. 说一下 spring 的事务隔离？</span><br><span class="line"></span><br><span class="line">spring 有五大隔离级别，默认值为 ISOLATION_DEFAULT（使用数据库的设置），其他四个隔离级别和数据库的隔离级别一致：</span><br><span class="line"></span><br><span class="line">ISOLATION_DEFAULT：用底层数据库的设置隔离级别，数据库设置的是什么我就用什么；</span><br><span class="line"></span><br><span class="line">ISOLATIONREADUNCOMMITTED：未提交读，最低隔离级别、事务未提交前，就可被其他事务读取（会出现幻读、脏读、不可重复读）；</span><br><span class="line"></span><br><span class="line">ISOLATIONREADCOMMITTED：提交读，一个事务提交后才能被其他事务读取到（会造成幻读、不可重复读），SQL server 的默认级别；</span><br><span class="line"></span><br><span class="line">ISOLATIONREPEATABLEREAD：可重复读，保证多次读取同一个数据时，其值都和事务开始时候的内容是一致，禁止读取到别的事务未提交的数据（会造成幻读），MySQL 的默认级别；</span><br><span class="line"></span><br><span class="line">ISOLATION_SERIALIZABLE：序列化，代价最高最可靠的隔离级别，该隔离级别能防止脏读、不可重复读、幻读。</span><br><span class="line"></span><br><span class="line">脏读 ：表示一个事务能够读取另一个事务中还未提交的数据。比如，某个事务尝试插入记录 A，此时该事务还未提交，然后另一个事务尝试读取到了记录 A。</span><br><span class="line"></span><br><span class="line">不可重复读 ：是指在一个事务内，多次读同一数据。</span><br><span class="line"></span><br><span class="line">幻读 ：指同一个事务内多次查询返回的结果集不一样。比如同一个事务 A 第一次查询时候有 n 条记录，但是第二次同等条件下查询却有 n+1 条记录，这就好像产生了幻觉。发生幻读的原因也是另外一个事务新增或者删除或者修改了第一个事务结果集里面的数据，同一个记录的数据内容被修改了，所有数据行的记录就变多或者变少了。</span><br><span class="line"></span><br><span class="line">100. 说一下 spring mvc 运行流程？</span><br><span class="line"></span><br><span class="line">spring mvc 先将请求发送给 DispatcherServlet。</span><br><span class="line">DispatcherServlet 查询一个或多个 HandlerMapping，找到处理请求的 Controller。</span><br><span class="line">DispatcherServlet 再把请求提交到对应的 Controller。</span><br><span class="line">Controller 进行业务逻辑处理后，会返回一个ModelAndView。</span><br><span class="line">Dispathcher 查询一个或多个 ViewResolver 视图解析器，找到 ModelAndView 对象指定的视图对象。</span><br><span class="line">视图对象负责渲染返回给客户端。</span><br><span class="line">101. spring mvc 有哪些组件？</span><br><span class="line"></span><br><span class="line">前置控制器 DispatcherServlet。</span><br><span class="line">映射控制器 HandlerMapping。</span><br><span class="line">处理器 Controller。</span><br><span class="line">模型和视图 ModelAndView。</span><br><span class="line">视图解析器 ViewResolver。</span><br><span class="line">102. @RequestMapping 的作用是什么？</span><br><span class="line"></span><br><span class="line">将 http 请求映射到相应的类/方法上。</span><br><span class="line"></span><br><span class="line">103. @Autowired 的作用是什么？</span><br><span class="line"></span><br><span class="line">@Autowired 它可以对类成员变量、方法及构造函数进行标注，完成自动装配的工作，通过@Autowired 的使用来消除 set/get 方法。</span><br><span class="line"></span><br><span class="line">Spring Boot/Spring Cloud</span><br><span class="line"></span><br><span class="line">104. 什么是 spring boot？</span><br><span class="line"></span><br><span class="line">spring boot 是为 spring 服务的，是用来简化新 spring 应用的初始搭建以及开发过程的。</span><br><span class="line"></span><br><span class="line">105. 为什么要用 spring boot？</span><br><span class="line"></span><br><span class="line">配置简单</span><br><span class="line">独立运行</span><br><span class="line">自动装配</span><br><span class="line">无代码生成和 xml 配置</span><br><span class="line">提供应用监控</span><br><span class="line">易上手</span><br><span class="line">提升开发效率</span><br><span class="line">106. spring boot 核心配置文件是什么？</span><br><span class="line"></span><br><span class="line">spring boot 核心的两个配置文件：</span><br><span class="line"></span><br><span class="line">bootstrap (. yml 或者 . properties)：boostrap 由父 ApplicationContext 加载的，比 applicaton 优先加载，且 boostrap 里面的属性不能被覆盖；</span><br><span class="line">application (. yml 或者 . properties)：用于 spring boot 项目的自动化配置。</span><br><span class="line">107. spring boot 配置文件有哪几种类型？它们有什么区别？</span><br><span class="line"></span><br><span class="line">配置文件有 . properties 格式和 . yml 格式，它们主要的区别是书法风格不同。</span><br><span class="line"></span><br><span class="line">. properties 配置如下：</span><br><span class="line"></span><br><span class="line">spring. RabbitMQ. port=5672</span><br><span class="line">. yml 配置如下：</span><br><span class="line"></span><br><span class="line">spring:</span><br><span class="line">    RabbitMQ:</span><br><span class="line">        port: 5672</span><br><span class="line">. yml 格式不支持 @PropertySource 注解导入。</span><br><span class="line"></span><br><span class="line">108. spring boot 有哪些方式可以实现热部署？</span><br><span class="line"></span><br><span class="line">使用 devtools 启动热部署，添加 devtools 库，在配置文件中把 spring. devtools. restart. enabled 设置为 true；</span><br><span class="line">使用 Intellij Idea 编辑器，勾上自动编译或手动重新编译。</span><br><span class="line">109. jpa 和 hibernate 有什么区别？</span><br><span class="line"></span><br><span class="line">jpa 全称 Java Persistence API，是 Java 持久化接口规范，hibernate 属于 jpa 的具体实现。</span><br><span class="line"></span><br><span class="line">110. 什么是 spring cloud？</span><br><span class="line"></span><br><span class="line">spring cloud 是一系列框架的有序集合。它利用 spring boot 的开发便利性巧妙地简化了分布式系统基础设施的开发，如服务发现注册、配置中心、消息总线、负载均衡、断路器、数据监控等，都可以用 spring boot 的开发风格做到一键启动和部署。</span><br><span class="line"></span><br><span class="line">111. spring cloud 断路器的作用是什么？</span><br><span class="line"></span><br><span class="line">在分布式架构中，断路器模式的作用也是类似的，当某个服务单元发生故障（类似用电器发生短路）之后，通过断路器的故障监控（类似熔断保险丝），向调用方返回一个错误响应，而不是长时间的等待。这样就不会使得线程因调用故障服务被长时间占用不释放，避免了故障在分布式系统中的蔓延。</span><br><span class="line"></span><br><span class="line">112. spring cloud 的核心组件有哪些？</span><br><span class="line"></span><br><span class="line">Eureka：服务注册于发现。</span><br><span class="line">Feign：基于动态代理机制，根据注解和选择的机器，拼接请求 url 地址，发起请求。</span><br><span class="line">Ribbon：实现负载均衡，从一个服务的多台机器中选择一台。</span><br><span class="line">Hystrix：提供线程池，不同的服务走不同的线程池，实现了不同服务调用的隔离，避免了服务雪崩的问题。</span><br><span class="line">Zuul：网关管理，由 Zuul 网关转发请求给对应的服务。</span><br><span class="line">Hibernate</span><br><span class="line"></span><br><span class="line">113. 为什么要使用 hibernate？</span><br><span class="line"></span><br><span class="line">hibernate 是对 jdbc 的封装，大大简化了数据访问层的繁琐的重复性代码。</span><br><span class="line">hibernate 是一个优秀的 ORM 实现，很多程度上简化了 DAO 层的编码功能。</span><br><span class="line">可以很方便的进行数据库的移植工作。</span><br><span class="line">提供了缓存机制，是程序执行更改的高效。</span><br><span class="line">114. 什么是 ORM 框架？</span><br><span class="line"></span><br><span class="line">ORM（Object Relation Mapping）对象关系映射，是把数据库中的关系数据映射成为程序中的对象。</span><br><span class="line"></span><br><span class="line">使用 ORM 的优点：提高了开发效率降低了开发成本、开发更简单更对象化、可移植更强。</span><br><span class="line"></span><br><span class="line">115. hibernate 中如何在控制台查看打印的 SQL 语句？</span><br><span class="line"></span><br><span class="line">在 Config 里面把 hibernate. show_SQL 设置为 true 就可以。但不建议开启，开启之后会降低程序的运行效率。</span><br><span class="line"></span><br><span class="line">116. hibernate 有几种查询方式？</span><br><span class="line"></span><br><span class="line">三种：hql、原生 SQL、条件查询 Criteria。</span><br><span class="line"></span><br><span class="line">117. hibernate 实体类可以被定义为 final 吗？</span><br><span class="line"></span><br><span class="line">实体类可以定义为 final 类，但这样的话就不能使用 hibernate 代理模式下的延迟关联提供性能了，所以不建议定义实体类为 final。</span><br><span class="line"></span><br><span class="line">118. 在 hibernate 中使用 Integer 和 int 做映射有什么区别？</span><br><span class="line"></span><br><span class="line">Integer 类型为对象，它的值允许为 null，而 int 属于基础数据类型，值不能为 null。</span><br><span class="line"></span><br><span class="line">119. hibernate 是如何工作的？</span><br><span class="line"></span><br><span class="line">读取并解析配置文件。</span><br><span class="line">读取并解析映射文件，创建 SessionFactory。</span><br><span class="line">打开 Session。</span><br><span class="line">创建事务。</span><br><span class="line">进行持久化操作。</span><br><span class="line">提交事务。</span><br><span class="line">关闭 Session。</span><br><span class="line">关闭 SessionFactory。</span><br><span class="line">120. get()和 load()的区别？</span><br><span class="line"></span><br><span class="line">数据查询时，没有 OID 指定的对象，get() 返回 null；load() 返回一个代理对象。</span><br><span class="line">load()支持延迟加载；get() 不支持延迟加载。</span><br><span class="line">121. 说一下 hibernate 的缓存机制？</span><br><span class="line"></span><br><span class="line">hibernate 常用的缓存有一级缓存和二级缓存：</span><br><span class="line"></span><br><span class="line">一级缓存：也叫 Session 缓存，只在 Session 作用范围内有效，不需要用户干涉，由 hibernate 自身维护，可以通过：evict(object)清除 object 的缓存；clear()清除一级缓存中的所有缓存；flush()刷出缓存；</span><br><span class="line"></span><br><span class="line">二级缓存：应用级别的缓存，在所有 Session 中都有效，支持配置第三方的缓存，如：EhCache。</span><br><span class="line"></span><br><span class="line">122. hibernate 对象有哪些状态？</span><br><span class="line"></span><br><span class="line">临时/瞬时状态：直接 new 出来的对象，该对象还没被持久化（没保存在数据库中），不受 Session 管理。</span><br><span class="line">持久化状态：当调用 Session 的 save/saveOrupdate/get/load/list 等方法的时候，对象就是持久化状态。</span><br><span class="line">游离状态：Session 关闭之后对象就是游离状态。</span><br><span class="line">123. 在 hibernate 中 getCurrentSession 和 openSession 的区别是什么？</span><br><span class="line"></span><br><span class="line">getCurrentSession 会绑定当前线程，而 openSession 则不会。</span><br><span class="line">getCurrentSession 事务是 Spring 控制的，并且不需要手动关闭，而 openSession 需要我们自己手动开启和提交事务。</span><br><span class="line">124. hibernate 实体类必须要有无参构造函数吗？为什么？</span><br><span class="line"></span><br><span class="line">hibernate 中每个实体类必须提供一个无参构造函数，因为 hibernate 框架要使用 reflection api，通过调用 ClassnewInstance() 来创建实体类的实例，如果没有无参的构造函数就会抛出异常。</span><br><span class="line"></span><br><span class="line">MyBatis</span><br><span class="line"></span><br><span class="line">125. MyBatis 中 #&#123;&#125;和 $&#123;&#125;的区别是什么？</span><br><span class="line"></span><br><span class="line">\#&#123;&#125;是预编译处理，$&#123;&#125;是字符替换。 在使用 #&#123;&#125;时，MyBatis 会将 SQL 中的 #&#123;&#125;替换成“?”，配合 PreparedStatement 的 set 方法赋值，这样可以有效的防止 SQL 注入，保证程序的运行安全。</span><br><span class="line"></span><br><span class="line">126. MyBatis 有几种分页方式？</span><br><span class="line"></span><br><span class="line">分页方式：逻辑分页和物理分页。</span><br><span class="line"></span><br><span class="line">逻辑分页： 使用 MyBatis 自带的 RowBounds 进行分页，它是一次性查询很多数据，然后在数据中再进行检索。</span><br><span class="line"></span><br><span class="line">物理分页： 自己手写 SQL 分页或使用分页插件 PageHelper，去数据库查询指定条数的分页数据的形式。</span><br><span class="line"></span><br><span class="line">127. RowBounds 是一次性查询全部结果吗？为什么？</span><br><span class="line"></span><br><span class="line">RowBounds 表面是在“所有”数据中检索数据，其实并非是一次性查询出所有数据，因为 MyBatis 是对 jdbc 的封装，在 jdbc 驱动中有一个 Fetch Size 的配置，它规定了每次最多从数据库查询多少条数据，假如你要查询更多数据，它会在你执行 next()的时候，去查询更多的数据。就好比你去自动取款机取 10000 元，但取款机每次最多能取 2500 元，所以你要取 4 次才能把钱取完。只是对于 jdbc 来说，当你调用 next()的时候会自动帮你完成查询工作。这样做的好处可以有效的防止内存溢出。</span><br><span class="line"></span><br><span class="line">Fetch Size 官方相关文档：http://t. cn/EfSE2g3</span><br><span class="line"></span><br><span class="line">128. MyBatis 逻辑分页和物理分页的区别是什么？</span><br><span class="line"></span><br><span class="line">逻辑分页是一次性查询很多数据，然后再在结果中检索分页的数据。这样做弊端是需要消耗大量的内存、有内存溢出的风险、对数据库压力较大。</span><br><span class="line">物理分页是从数据库查询指定条数的数据，弥补了一次性全部查出的所有数据的种种缺点，比如需要大量的内存，对数据库查询压力较大等问题。</span><br><span class="line">129. MyBatis 是否支持延迟加载？延迟加载的原理是什么？</span><br><span class="line"></span><br><span class="line">MyBatis 支持延迟加载，设置 lazyLoadingEnabled=true 即可。</span><br><span class="line"></span><br><span class="line">延迟加载的原理的是调用的时候触发加载，而不是在初始化的时候就加载信息。比如调用 a. getB(). getName()，这个时候发现 a. getB() 的值为 null，此时会单独触发事先保存好的关联 B 对象的 SQL，先查询出来 B，然后再调用 a. setB(b)，而这时候再调用 a. getB(). getName() 就有值了，这就是延迟加载的基本原理。</span><br><span class="line"></span><br><span class="line">130. 说一下 MyBatis 的一级缓存和二级缓存？</span><br><span class="line"></span><br><span class="line">一级缓存：基于 PerpetualCache 的 HashMap 本地缓存，它的声明周期是和 SQLSession 一致的，有多个 SQLSession 或者分布式的环境中数据库操作，可能会出现脏数据。当 Session flush 或 close 之后，该 Session 中的所有 Cache 就将清空，默认一级缓存是开启的。</span><br><span class="line">二级缓存：也是基于 PerpetualCache 的 HashMap 本地缓存，不同在于其存储作用域为 Mapper 级别的，如果多个SQLSession之间需要共享缓存，则需要使用到二级缓存，并且二级缓存可自定义存储源，如 Ehcache。默认不打开二级缓存，要开启二级缓存，使用二级缓存属性类需要实现 Serializable 序列化接口(可用来保存对象的状态)。</span><br><span class="line">开启二级缓存数据查询流程：二级缓存 -&gt; 一级缓存 -&gt; 数据库。</span><br><span class="line"></span><br><span class="line">缓存更新机制：当某一个作用域(一级缓存 Session/二级缓存 Mapper)进行了C/U/D 操作后，默认该作用域下所有 select 中的缓存将被 clear。</span><br><span class="line"></span><br><span class="line">131. MyBatis 和 hibernate 的区别有哪些？</span><br><span class="line"></span><br><span class="line">灵活性：MyBatis 更加灵活，自己可以写 SQL 语句，使用起来比较方便。</span><br><span class="line">可移植性：MyBatis 有很多自己写的 SQL，因为每个数据库的 SQL 可以不相同，所以可移植性比较差。</span><br><span class="line">学习和使用门槛：MyBatis 入门比较简单，使用门槛也更低。</span><br><span class="line">二级缓存：hibernate 拥有更好的二级缓存，它的二级缓存可以自行更换为第三方的二级缓存。</span><br><span class="line">132. MyBatis 有哪些执行器（Executor）？</span><br><span class="line"></span><br><span class="line">MyBatis 有三种基本的Executor执行器：</span><br><span class="line"></span><br><span class="line">SimpleExecutor：每执行一次 update 或 select 就开启一个 Statement 对象，用完立刻关闭 Statement 对象；</span><br><span class="line">ReuseExecutor：执行 update 或 select，以 SQL 作为 key 查找 Statement 对象，存在就使用，不存在就创建，用完后不关闭 Statement 对象，而是放置于 Map 内供下一次使用。简言之，就是重复使用 Statement 对象；</span><br><span class="line">BatchExecutor：执行 update（没有 select，jdbc 批处理不支持 select），将所有 SQL 都添加到批处理中（addBatch()），等待统一执行（executeBatch()），它缓存了多个 Statement 对象，每个 Statement 对象都是 addBatch()完毕后，等待逐一执行 executeBatch()批处理，与 jdbc 批处理相同。</span><br><span class="line">133. MyBatis 分页插件的实现原理是什么？</span><br><span class="line"></span><br><span class="line">分页插件的基本原理是使用 MyBatis 提供的插件接口，实现自定义插件，在插件的拦截方法内拦截待执行的 SQL，然后重写 SQL，根据 dialect 方言，添加对应的物理分页语句和物理分页参数。</span><br><span class="line"></span><br><span class="line">134. MyBatis 如何编写一个自定义插件？</span><br><span class="line"></span><br><span class="line">自定义插件实现原理</span><br><span class="line"></span><br><span class="line">MyBatis 自定义插件针对 MyBatis 四大对象（Executor、StatementHandler、ParameterHandler、ResultSetHandler）进行拦截：</span><br><span class="line"></span><br><span class="line">Executor：拦截内部执行器，它负责调用 StatementHandler 操作数据库，并把结果集通过 ResultSetHandler 进行自动映射，另外它还处理了二级缓存的操作；</span><br><span class="line">StatementHandler：拦截 SQL 语法构建的处理，它是 MyBatis 直接和数据库执行 SQL 脚本的对象，另外它也实现了 MyBatis 的一级缓存；</span><br><span class="line">ParameterHandler：拦截参数的处理；</span><br><span class="line">ResultSetHandler：拦截结果集的处理。</span><br><span class="line">自定义插件实现关键</span><br><span class="line"></span><br><span class="line">MyBatis 插件要实现 Interceptor 接口，接口包含的方法，如下：</span><br><span class="line"></span><br><span class="line">public interface Interceptor &#123;   </span><br><span class="line">   Object intercept(Invocation invocation) throws Throwable;       </span><br><span class="line">   Object plugin(Object target);    </span><br><span class="line">   void setProperties(Properties properties);</span><br><span class="line">&#125;</span><br><span class="line">setProperties 方法是在 MyBatis 进行配置插件的时候可以配置自定义相关属性，即：接口实现对象的参数配置；</span><br><span class="line">plugin 方法是插件用于封装目标对象的，通过该方法我们可以返回目标对象本身，也可以返回一个它的代理，可以决定是否要进行拦截进而决定要返回一个什么样的目标对象，官方提供了示例：return Plugin. wrap(target, this)；</span><br><span class="line">intercept 方法就是要进行拦截的时候要执行的方法。</span><br><span class="line">自定义插件实现示例</span><br><span class="line"></span><br><span class="line">官方插件实现：</span><br><span class="line"></span><br><span class="line">@Intercepts(&#123;@Signature(type = Executor. class, method = &quot;query&quot;,</span><br><span class="line">        args = &#123;MappedStatement. class, Object. class, RowBounds. class, ResultHandler. class&#125;)&#125;)</span><br><span class="line">public class TestInterceptor implements Interceptor &#123;</span><br><span class="line">   public Object intercept(Invocation invocation) throws Throwable &#123;</span><br><span class="line">     Object target = invocation. getTarget(); //被代理对象</span><br><span class="line">     Method method = invocation. getMethod(); //代理方法</span><br><span class="line">     Object[] args = invocation. getArgs(); //方法参数</span><br><span class="line">     // do something . . . . . .  方法拦截前执行代码块</span><br><span class="line">     Object result = invocation. proceed();</span><br><span class="line">     // do something . . . . . . . 方法拦截后执行代码块</span><br><span class="line">     return result;</span><br><span class="line">   &#125;</span><br><span class="line">   public Object plugin(Object target) &#123;</span><br><span class="line">     return Plugin. wrap(target, this);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">RabbitMQ</span><br><span class="line"></span><br><span class="line">135. RabbitMQ 的使用场景有哪些？</span><br><span class="line"></span><br><span class="line">抢购活动，削峰填谷，防止系统崩塌。</span><br><span class="line">延迟信息处理，比如 10 分钟之后给下单未付款的用户发送邮件提醒。</span><br><span class="line">解耦系统，对于新增的功能可以单独写模块扩展，比如用户确认评价之后，新增了给用户返积分的功能，这个时候不用在业务代码里添加新增积分的功能，只需要把新增积分的接口订阅确认评价的消息队列即可，后面再添加任何功能只需要订阅对应的消息队列即可。</span><br><span class="line">136. RabbitMQ 有哪些重要的角色？</span><br><span class="line"></span><br><span class="line">RabbitMQ 中重要的角色有：生产者、消费者和代理：</span><br><span class="line"></span><br><span class="line">生产者：消息的创建者，负责创建和推送数据到消息服务器；</span><br><span class="line">消费者：消息的接收方，用于处理数据和确认消息；</span><br><span class="line">代理：就是 RabbitMQ 本身，用于扮演“快递”的角色，本身不生产消息，只是扮演“快递”的角色。</span><br><span class="line">137. RabbitMQ 有哪些重要的组件？</span><br><span class="line"></span><br><span class="line">ConnectionFactory（连接管理器）：应用程序与Rabbit之间建立连接的管理器，程序代码中使用。</span><br><span class="line">Channel（信道）：消息推送使用的通道。</span><br><span class="line">Exchange（交换器）：用于接受、分配消息。</span><br><span class="line">Queue（队列）：用于存储生产者的消息。</span><br><span class="line">RoutingKey（路由键）：用于把生成者的数据分配到交换器上。</span><br><span class="line">BindingKey（绑定键）：用于把交换器的消息绑定到队列上。</span><br><span class="line">138. RabbitMQ 中 vhost 的作用是什么？</span><br><span class="line"></span><br><span class="line">vhost：每个 RabbitMQ 都能创建很多 vhost，我们称之为虚拟主机，每个虚拟主机其实都是 mini 版的RabbitMQ，它拥有自己的队列，交换器和绑定，拥有自己的权限机制。</span><br><span class="line"></span><br><span class="line">139. RabbitMQ 的消息是怎么发送的？</span><br><span class="line"></span><br><span class="line">首先客户端必须连接到 RabbitMQ 服务器才能发布和消费消息，客户端和 rabbit server 之间会创建一个 tcp 连接，一旦 tcp 打开并通过了认证（认证就是你发送给 rabbit 服务器的用户名和密码），你的客户端和 RabbitMQ 就创建了一条 amqp 信道（channel），信道是创建在“真实” tcp 上的虚拟连接，amqp 命令都是通过信道发送出去的，每个信道都会有一个唯一的 id，不论是发布消息，订阅队列都是通过这个信道完成的。</span><br><span class="line"></span><br><span class="line">140. RabbitMQ 怎么保证消息的稳定性？</span><br><span class="line"></span><br><span class="line">提供了事务的功能。</span><br><span class="line">通过将 channel 设置为 confirm（确认）模式。</span><br><span class="line">141. RabbitMQ 怎么避免消息丢失？</span><br><span class="line"></span><br><span class="line">把消息持久化磁盘，保证服务器重启消息不丢失。</span><br><span class="line">每个集群中至少有一个物理磁盘，保证消息落入磁盘。</span><br><span class="line">142. 要保证消息持久化成功的条件有哪些？</span><br><span class="line"></span><br><span class="line">声明队列必须设置持久化 durable 设置为 true.</span><br><span class="line">消息推送投递模式必须设置持久化，deliveryMode 设置为 2（持久）。</span><br><span class="line">消息已经到达持久化交换器。</span><br><span class="line">消息已经到达持久化队列。</span><br><span class="line">以上四个条件都满足才能保证消息持久化成功。</span><br><span class="line"></span><br><span class="line">143. RabbitMQ 持久化有什么缺点？</span><br><span class="line"></span><br><span class="line">持久化的缺地就是降低了服务器的吞吐量，因为使用的是磁盘而非内存存储，从而降低了吞吐量。可尽量使用 ssd 硬盘来缓解吞吐量的问题。</span><br><span class="line"></span><br><span class="line">144. RabbitMQ 有几种广播类型？</span><br><span class="line"></span><br><span class="line">direct（默认方式）：最基础最简单的模式，发送方把消息发送给订阅方，如果有多个订阅者，默认采取轮询的方式进行消息发送。</span><br><span class="line">headers：与 direct 类似，只是性能很差，此类型几乎用不到。</span><br><span class="line">fanout：分发模式，把消费分发给所有订阅者。</span><br><span class="line">topic：匹配订阅模式，使用正则匹配到消息队列，能匹配到的都能接收到。</span><br><span class="line">145. RabbitMQ 怎么实现延迟消息队列？</span><br><span class="line"></span><br><span class="line">延迟队列的实现有两种方式：</span><br><span class="line"></span><br><span class="line">通过消息过期后进入死信交换器，再由交换器转发到延迟消费队列，实现延迟功能；</span><br><span class="line">使用 RabbitMQ-delayed-message-exchange 插件实现延迟功能。</span><br><span class="line">146. RabbitMQ 集群有什么用？</span><br><span class="line"></span><br><span class="line">集群主要有以下两个用途：</span><br><span class="line"></span><br><span class="line">高可用：某个服务器出现问题，整个 RabbitMQ 还可以继续使用；</span><br><span class="line">高容量：集群可以承载更多的消息量。</span><br><span class="line">147. RabbitMQ 节点的类型有哪些？</span><br><span class="line"></span><br><span class="line">磁盘节点：消息会存储到磁盘。</span><br><span class="line">内存节点：消息都存储在内存中，重启服务器消息丢失，性能高于磁盘类型。</span><br><span class="line">148. RabbitMQ 集群搭建需要注意哪些问题？</span><br><span class="line"></span><br><span class="line">各节点之间使用“--link”连接，此属性不能忽略。</span><br><span class="line">各节点使用的 erlang cookie 值必须相同，此值相当于“秘钥”的功能，用于各节点的认证。</span><br><span class="line">整个集群中必须包含一个磁盘节点。</span><br><span class="line">149. RabbitMQ 每个节点是其他节点的完整拷贝吗？为什么？</span><br><span class="line"></span><br><span class="line">不是，原因有以下两个：</span><br><span class="line"></span><br><span class="line">存储空间的考虑：如果每个节点都拥有所有队列的完全拷贝，这样新增节点不但没有新增存储空间，反而增加了更多的冗余数据；</span><br><span class="line">性能的考虑：如果每条消息都需要完整拷贝到每一个集群节点，那新增节点并没有提升处理消息的能力，最多是保持和单节点相同的性能甚至是更糟。</span><br><span class="line">150. RabbitMQ 集群中唯一一个磁盘节点崩溃了会发生什么情况？</span><br><span class="line"></span><br><span class="line">如果唯一磁盘的磁盘节点崩溃了，不能进行以下操作：</span><br><span class="line"></span><br><span class="line">不能创建队列</span><br><span class="line">不能创建交换器</span><br><span class="line">不能创建绑定</span><br><span class="line">不能添加用户</span><br><span class="line">不能更改权限</span><br><span class="line">不能添加和删除集群节点</span><br><span class="line">唯一磁盘节点崩溃了，集群是可以保持运行的，但你不能更改任何东西。</span><br><span class="line"></span><br><span class="line">151. RabbitMQ 对集群节点停止顺序有要求吗？</span><br><span class="line"></span><br><span class="line">RabbitMQ 对集群的停止的顺序是有要求的，应该先关闭内存节点，最后再关闭磁盘节点。如果顺序恰好相反的话，可能会造成消息的丢失。</span><br><span class="line"></span><br><span class="line">Kafka</span><br><span class="line"></span><br><span class="line">152. kafka 可以脱离 zookeeper 单独使用吗？为什么？</span><br><span class="line"></span><br><span class="line">kafka 不能脱离 zookeeper 单独使用，因为 kafka 使用 zookeeper 管理和协调 kafka 的节点服务器。</span><br><span class="line"></span><br><span class="line">153. kafka 有几种数据保留的策略？</span><br><span class="line"></span><br><span class="line">kafka 有两种数据保存策略：按照过期时间保留和按照存储的消息大小保留。</span><br><span class="line"></span><br><span class="line">154. kafka 同时设置了 7 天和 10G 清除数据，到第五天的时候消息达到了 10G，这个时候 kafka 将如何处理？</span><br><span class="line"></span><br><span class="line">这个时候 kafka 会执行数据清除工作，时间和大小不论那个满足条件，都会清空数据。</span><br><span class="line"></span><br><span class="line">155. 什么情况会导致 kafka 运行变慢？</span><br><span class="line"></span><br><span class="line">cpu 性能瓶颈</span><br><span class="line">磁盘读写瓶颈</span><br><span class="line">网络瓶颈</span><br><span class="line">156. 使用 kafka 集群需要注意什么？</span><br><span class="line"></span><br><span class="line">集群的数量不是越多越好，最好不要超过 7 个，因为节点越多，消息复制需要的时间就越长，整个群组的吞吐量就越低。</span><br><span class="line">集群数量最好是单数，因为超过一半故障集群就不能用了，设置为单数容错率更高。</span><br><span class="line">Zookeeper</span><br><span class="line"></span><br><span class="line">157. zookeeper 是什么？</span><br><span class="line"></span><br><span class="line">zookeeper 是一个分布式的，开放源码的分布式应用程序协调服务，是 google chubby 的开源实现，是 hadoop 和 hbase 的重要组件。它是一个为分布式应用提供一致性服务的软件，提供的功能包括：配置维护、域名服务、分布式同步、组服务等。</span><br><span class="line"></span><br><span class="line">158. zookeeper 都有哪些功能？</span><br><span class="line"></span><br><span class="line">集群管理：监控节点存活状态、运行请求等。</span><br><span class="line">主节点选举：主节点挂掉了之后可以从备用的节点开始新一轮选主，主节点选举说的就是这个选举的过程，使用 zookeeper 可以协助完成这个过程。</span><br><span class="line">分布式锁：zookeeper 提供两种锁：独占锁、共享锁。独占锁即一次只能有一个线程使用资源，共享锁是读锁共享，读写互斥，即可以有多线线程同时读同一个资源，如果要使用写锁也只能有一个线程使用。zookeeper可以对分布式锁进行控制。</span><br><span class="line">命名服务：在分布式系统中，通过使用命名服务，客户端应用能够根据指定名字来获取资源或服务的地址，提供者等信息。</span><br><span class="line">159. zookeeper 有几种部署模式？</span><br><span class="line"></span><br><span class="line">zookeeper 有三种部署模式：</span><br><span class="line"></span><br><span class="line">单机部署：一台集群上运行；</span><br><span class="line">集群部署：多台集群运行；</span><br><span class="line">伪集群部署：一台集群启动多个 zookeeper 实例运行。</span><br><span class="line">160. zookeeper 怎么保证主从节点的状态同步？</span><br><span class="line"></span><br><span class="line">zookeeper 的核心是原子广播，这个机制保证了各个 server 之间的同步。实现这个机制的协议叫做 zab 协议。 zab 协议有两种模式，分别是恢复模式（选主）和广播模式（同步）。当服务启动或者在领导者崩溃后，zab 就进入了恢复模式，当领导者被选举出来，且大多数 server 完成了和 leader 的状态同步以后，恢复模式就结束了。状态同步保证了 leader 和 server 具有相同的系统状态。</span><br><span class="line"></span><br><span class="line">161. 集群中为什么要有主节点？</span><br><span class="line"></span><br><span class="line">在分布式环境中，有些业务逻辑只需要集群中的某一台机器进行执行，其他的机器可以共享这个结果，这样可以大大减少重复计算，提高性能，所以就需要主节点。</span><br><span class="line"></span><br><span class="line">162. 集群中有 3 台服务器，其中一个节点宕机，这个时候 zookeeper 还可以使用吗？</span><br><span class="line"></span><br><span class="line">可以继续使用，单数服务器只要没超过一半的服务器宕机就可以继续使用。</span><br><span class="line"></span><br><span class="line">163. 说一下 zookeeper 的通知机制？</span><br><span class="line"></span><br><span class="line">客户端端会对某个 znode 建立一个 watcher 事件，当该 znode 发生变化时，这些客户端会收到 zookeeper 的通知，然后客户端可以根据 znode 变化来做出业务上的改变。</span><br><span class="line"></span><br><span class="line">MySQL</span><br><span class="line"></span><br><span class="line">164. 数据库的三范式是什么？</span><br><span class="line"></span><br><span class="line">第一范式：强调的是列的原子性，即数据库表的每一列都是不可分割的原子数据项。</span><br><span class="line">第二范式：要求实体的属性完全依赖于主关键字。所谓完全依赖是指不能存在仅依赖主关键字一部分的属性。</span><br><span class="line">第三范式：任何非主属性不依赖于其它非主属性。</span><br><span class="line">165. 一张自增表里面总共有 7 条数据，删除了最后 2 条数据，重启 MySQL 数据库，又插入了一条数据，此时 id 是几？</span><br><span class="line"></span><br><span class="line">表类型如果是 MyISAM ，那 id 就是 8。</span><br><span class="line">表类型如果是 InnoDB，那 id 就是 6。</span><br><span class="line">InnoDB 表只会把自增主键的最大 id 记录在内存中，所以重启之后会导致最大 id 丢失。</span><br><span class="line"></span><br><span class="line">166. 如何获取当前数据库版本？</span><br><span class="line"></span><br><span class="line">使用 select version() 获取当前 MySQL 数据库版本。</span><br><span class="line"></span><br><span class="line">167. 说一下 ACID 是什么？</span><br><span class="line"></span><br><span class="line">Atomicity（原子性）：一个事务（transaction）中的所有操作，或者全部完成，或者全部不完成，不会结束在中间某个环节。事务在执行过程中发生错误，会被恢复（Rollback）到事务开始前的状态，就像这个事务从来没有执行过一样。即，事务不可分割、不可约简。</span><br><span class="line">Consistency（一致性）：在事务开始之前和事务结束以后，数据库的完整性没有被破坏。这表示写入的资料必须完全符合所有的预设约束、触发器、级联回滚等。</span><br><span class="line">Isolation（隔离性）：数据库允许多个并发事务同时对其数据进行读写和修改的能力，隔离性可以防止多个事务并发执行时由于交叉执行而导致数据的不一致。事务隔离分为不同级别，包括读未提交（Read uncommitted）、读提交（read committed）、可重复读（repeatable read）和串行化（Serializable）。</span><br><span class="line">Durability（持久性）：事务处理结束后，对数据的修改就是永久的，即便系统故障也不会丢失。</span><br><span class="line">168. char 和 varchar 的区别是什么？</span><br><span class="line"></span><br><span class="line">char(n) ：固定长度类型，比如订阅 char(10)，当你输入&quot;abc&quot;三个字符的时候，它们占的空间还是 10 个字节，其他 7 个是空字节。</span><br><span class="line">chat 优点：效率高；缺点：占用空间；适用场景：存储密码的 md5 值，固定长度的，使用 char 非常合适。</span><br><span class="line"></span><br><span class="line">varchar(n) ：可变长度，存储的值是每个值占用的字节再加上一个用来记录其长度的字节的长度。</span><br><span class="line">所以，从空间上考虑 varcahr 比较合适；从效率上考虑 char 比较合适，二者使用需要权衡。</span><br><span class="line"></span><br><span class="line">169. float 和 double 的区别是什么？</span><br><span class="line"></span><br><span class="line">float 最多可以存储 8 位的十进制数，并在内存中占 4 字节。</span><br><span class="line">double 最可可以存储 16 位的十进制数，并在内存中占 8 字节。</span><br><span class="line">170. MySQL 的内连接、左连接、右连接有什么区别？</span><br><span class="line"></span><br><span class="line">内连接关键字：inner join；左连接：left join；右连接：right join。</span><br><span class="line"></span><br><span class="line">内连接是把匹配的关联数据显示出来；左连接是左边的表全部显示出来，右边的表显示出符合条件的数据；右连接正好相反。</span><br><span class="line"></span><br><span class="line">171. MySQL 索引是怎么实现的？</span><br><span class="line"></span><br><span class="line">索引是满足某种特定查找算法的数据结构，而这些数据结构会以某种方式指向数据，从而实现高效查找数据。</span><br><span class="line"></span><br><span class="line">具体来说 MySQL 中的索引，不同的数据引擎实现有所不同，但目前主流的数据库引擎的索引都是 B+ 树实现的，B+ 树的搜索效率，可以到达二分法的性能，找到数据区域之后就找到了完整的数据结构了，所有索引的性能也是更好的。</span><br><span class="line"></span><br><span class="line">172. 怎么验证 MySQL 的索引是否满足需求？</span><br><span class="line"></span><br><span class="line">使用 explain 查看 SQL 是如何执行查询语句的，从而分析你的索引是否满足需求。</span><br><span class="line"></span><br><span class="line">explain 语法：explain select * from table where type=1。</span><br><span class="line"></span><br><span class="line">173. 说一下数据库的事务隔离？</span><br><span class="line"></span><br><span class="line">MySQL 的事务隔离是在 MySQL. ini 配置文件里添加的，在文件的最后添加：</span><br><span class="line"></span><br><span class="line">transaction-isolation = REPEATABLE-READ</span><br><span class="line">可用的配置值：READ-UNCOMMITTED、READ-COMMITTED、REPEATABLE-READ、SERIALIZABLE。</span><br><span class="line"></span><br><span class="line">READ-UNCOMMITTED：未提交读，最低隔离级别、事务未提交前，就可被其他事务读取（会出现幻读、脏读、不可重复读）。</span><br><span class="line">READ-COMMITTED：提交读，一个事务提交后才能被其他事务读取到（会造成幻读、不可重复读）。</span><br><span class="line">REPEATABLE-READ：可重复读，默认级别，保证多次读取同一个数据时，其值都和事务开始时候的内容是一致，禁止读取到别的事务未提交的数据（会造成幻读）。</span><br><span class="line">SERIALIZABLE：序列化，代价最高最可靠的隔离级别，该隔离级别能防止脏读、不可重复读、幻读。</span><br><span class="line">脏读 ：表示一个事务能够读取另一个事务中还未提交的数据。比如，某个事务尝试插入记录 A，此时该事务还未提交，然后另一个事务尝试读取到了记录 A。</span><br><span class="line"></span><br><span class="line">不可重复读 ：是指在一个事务内，多次读同一数据。</span><br><span class="line"></span><br><span class="line">幻读 ：指同一个事务内多次查询返回的结果集不一样。比如同一个事务 A 第一次查询时候有 n 条记录，但是第二次同等条件下查询却有 n+1 条记录，这就好像产生了幻觉。发生幻读的原因也是另外一个事务新增或者删除或者修改了第一个事务结果集里面的数据，同一个记录的数据内容被修改了，所有数据行的记录就变多或者变少了。</span><br><span class="line"></span><br><span class="line">174. 说一下 MySQL 常用的引擎？</span><br><span class="line"></span><br><span class="line">InnoDB 引擎：mysql 5.1 后默认的数据库引擎，提供了对数据库 acid 事务的支持，并且还提供了行级锁和外键的约束，它的设计的目标就是处理大数据容量的数据库系统。MySQL 运行的时候，InnoDB 会在内存中建立缓冲池，用于缓冲数据和索引。但是该引擎是不支持全文搜索，同时启动也比较的慢，它是不会保存表的行数的，所以当进行 select count(*) from table 指令的时候，需要进行扫描全表。由于锁的粒度小，写操作是不会锁定全表的,所以在并发度较高的场景下使用会提升效率的。</span><br><span class="line"></span><br><span class="line">MyIASM 引擎：不提供事务的支持，也不支持行级锁和外键。因此当执行插入和更新语句时，即执行写操作的时候需要锁定这个表，所以会导致效率会降低。不过和 InnoDB 不同的是，MyIASM 引擎是保存了表的行数，于是当进行 select count(*) from table 语句时，可以直接的读取已经保存的值而不需要进行扫描全表。所以，如果表的读操作远远多于写操作时，并且不需要事务的支持的，可以将 MyIASM 作为数据库引擎的首选。</span><br><span class="line"></span><br><span class="line">175. 说一下 MySQL 的行锁和表锁？</span><br><span class="line"></span><br><span class="line">MyISAM 只支持表锁，InnoDB 支持表锁和行锁，默认为行锁。</span><br><span class="line"></span><br><span class="line">表级锁：开销小，加锁快，不会出现死锁。锁定粒度大，发生锁冲突的概率最高，并发量最低。</span><br><span class="line">行级锁：开销大，加锁慢，会出现死锁。锁力度小，发生锁冲突的概率小，并发度最高。</span><br><span class="line">176. 说一下乐观锁和悲观锁？</span><br><span class="line"></span><br><span class="line">乐观锁：每次去拿数据的时候都认为别人不会修改，所以不会上锁，但是在提交更新的时候会判断一下在此期间别人有没有去更新这个数据。</span><br><span class="line">悲观锁：每次去拿数据的时候都认为别人会修改，所以每次在拿数据的时候都会上锁，这样别人想拿这个数据就会阻止，直到这个锁被释放。</span><br><span class="line">数据库的乐观锁需要自己实现，在表里面添加一个 version 字段，每次修改成功值加 1，这样每次修改的时候先对比一下，自己拥有的 version 和数据库现在的 version 是否一致，如果不一致就不修改，这样就实现了乐观锁。</span><br><span class="line"></span><br><span class="line">177. MySQL 问题排查都有哪些手段？</span><br><span class="line"></span><br><span class="line">使用 show processlist 命令查看当前所有连接信息。</span><br><span class="line">使用 explain 命令查询 SQL 语句执行计划。</span><br><span class="line">开启慢查询日志，查看慢查询的 SQL。</span><br><span class="line">178. 如何做 MySQL 的性能优化？</span><br><span class="line"></span><br><span class="line">为搜索字段创建索引。</span><br><span class="line">避免使用 select *，列出需要查询的字段。</span><br><span class="line">垂直分割分表。</span><br><span class="line">选择正确的存储引擎。</span><br><span class="line">Redis</span><br><span class="line"></span><br><span class="line">179. Redis 是什么？都有哪些使用场景？</span><br><span class="line"></span><br><span class="line">Redis 是一个使用 C 语言开发的高速缓存数据库。</span><br><span class="line"></span><br><span class="line">Redis 使用场景：</span><br><span class="line"></span><br><span class="line">记录帖子点赞数、点击数、评论数；</span><br><span class="line">缓存近期热帖；</span><br><span class="line">缓存文章详情信息；</span><br><span class="line">记录用户会话信息。</span><br><span class="line">180. Redis 有哪些功能？</span><br><span class="line"></span><br><span class="line">数据缓存功能</span><br><span class="line">分布式锁的功能</span><br><span class="line">支持数据持久化</span><br><span class="line">支持事务</span><br><span class="line">支持消息队列</span><br><span class="line">181. Redis 和 memcache 有什么区别？</span><br><span class="line"></span><br><span class="line">存储方式不同：memcache 把数据全部存在内存之中，断电后会挂掉，数据不能超过内存大小；Redis 有部份存在硬盘上，这样能保证数据的持久性。</span><br><span class="line">数据支持类型：memcache 对数据类型支持相对简单；Redis 有复杂的数据类型。</span><br><span class="line">使用底层模型不同：它们之间底层实现方式，以及与客户端之间通信的应用协议不一样，Redis 自己构建了 vm 机制，因为一般的系统调用系统函数的话，会浪费一定的时间去移动和请求。</span><br><span class="line">value 值大小不同：Redis 最大可以达到 512mb；memcache 只有 1mb。</span><br><span class="line">182. Redis 为什么是单线程的？</span><br><span class="line"></span><br><span class="line">因为 cpu 不是 Redis 的瓶颈，Redis 的瓶颈最有可能是机器内存或者网络带宽。既然单线程容易实现，而且 cpu 又不会成为瓶颈，那就顺理成章地采用单线程的方案了。</span><br><span class="line"></span><br><span class="line">关于 Redis 的性能，官方网站也有，普通笔记本轻松处理每秒几十万的请求。</span><br><span class="line"></span><br><span class="line">而且单线程并不代表就慢 nginx 和 nodejs 也都是高性能单线程的代表。</span><br><span class="line"></span><br><span class="line">183. 什么是缓存穿透？怎么解决？</span><br><span class="line"></span><br><span class="line">缓存穿透：指查询一个一定不存在的数据，由于缓存是不命中时需要从数据库查询，查不到数据则不写入缓存，这将导致这个不存在的数据每次请求都要到数据库去查询，造成缓存穿透。</span><br><span class="line"></span><br><span class="line">解决方案：最简单粗暴的方法如果一个查询返回的数据为空（不管是数据不存在，还是系统故障），我们就把这个空结果进行缓存，但它的过期时间会很短，最长不超过五分钟。</span><br><span class="line"></span><br><span class="line">184. Redis 支持的数据类型有哪些？</span><br><span class="line"></span><br><span class="line">Redis 支持的数据类型：string（字符串）、list（列表）、hash（字典）、set（集合）、zset（有序集合）。</span><br><span class="line"></span><br><span class="line">185. Redis 支持的 Java 客户端都有哪些？</span><br><span class="line"></span><br><span class="line">支持的 Java 客户端有 Redisson、jedis、lettuce 等。</span><br><span class="line"></span><br><span class="line">186. jedis 和 Redisson 有哪些区别？</span><br><span class="line"></span><br><span class="line">jedis：提供了比较全面的 Redis 命令的支持。</span><br><span class="line">Redisson：实现了分布式和可扩展的 Java 数据结构，与 jedis 相比 Redisson 的功能相对简单，不支持排序、事务、管道、分区等 Redis 特性。</span><br><span class="line">187. 怎么保证缓存和数据库数据的一致性？</span><br><span class="line"></span><br><span class="line">合理设置缓存的过期时间。</span><br><span class="line">新增、更改、删除数据库操作时同步更新 Redis，可以使用事物机制来保证数据的一致性。</span><br><span class="line">188. Redis 持久化有几种方式？</span><br><span class="line"></span><br><span class="line">Redis 的持久化有两种方式，或者说有两种策略：</span><br><span class="line"></span><br><span class="line">RDB（Redis Database）：指定的时间间隔能对你的数据进行快照存储。</span><br><span class="line">AOF（Append Only File）：每一个收到的写命令都通过write函数追加到文件中。</span><br><span class="line">189. Redis 怎么实现分布式锁？</span><br><span class="line"></span><br><span class="line">Redis 分布式锁其实就是在系统里面占一个“坑”，其他程序也要占“坑”的时候，占用成功了就可以继续执行，失败了就只能放弃或稍后重试。</span><br><span class="line"></span><br><span class="line">占坑一般使用 setnx(set if not exists)指令，只允许被一个程序占有，使用完调用 del 释放锁。</span><br><span class="line"></span><br><span class="line">190. Redis 分布式锁有什么缺陷？</span><br><span class="line"></span><br><span class="line">Redis 分布式锁不能解决超时的问题，分布式锁有一个超时时间，程序的执行如果超出了锁的超时时间就会出现问题。</span><br><span class="line"></span><br><span class="line">191. Redis 如何做内存优化？</span><br><span class="line"></span><br><span class="line">尽量使用 Redis 的散列表，把相关的信息放到散列表里面存储，而不是把每个字段单独存储，这样可以有效的减少内存使用。比如将 Web 系统的用户对象，应该放到散列表里面再整体存储到 Redis，而不是把用户的姓名、年龄、密码、邮箱等字段分别设置 key 进行存储。</span><br><span class="line"></span><br><span class="line">192. Redis 淘汰策略有哪些？</span><br><span class="line"></span><br><span class="line">volatile-lru：从已设置过期时间的数据集（server. db[i]. expires）中挑选最近最少使用的数据淘汰。</span><br><span class="line"></span><br><span class="line">volatile-ttl：从已设置过期时间的数据集（server. db[i]. expires）中挑选将要过期的数据淘汰。</span><br><span class="line"></span><br><span class="line">volatile-random：从已设置过期时间的数据集（server. db[i]. expires）中任意选择数据淘汰。</span><br><span class="line"></span><br><span class="line">allkeys-lru：从数据集（server. db[i]. dict）中挑选最近最少使用的数据淘汰。</span><br><span class="line"></span><br><span class="line">allkeys-random：从数据集（server. db[i]. dict）中任意选择数据淘汰。</span><br><span class="line"></span><br><span class="line">no-enviction（驱逐）：禁止驱逐数据。</span><br><span class="line"></span><br><span class="line">193. Redis 常见的性能问题有哪些？该如何解决？</span><br><span class="line"></span><br><span class="line">主服务器写内存快照，会阻塞主线程的工作，当快照比较大时对性能影响是非常大的，会间断性暂停服务，所以主服务器最好不要写内存快照。</span><br><span class="line">Redis 主从复制的性能问题，为了主从复制的速度和连接的稳定性，主从库最好在同一个局域网内。</span><br><span class="line">JVM</span><br><span class="line"></span><br><span class="line">194. 说一下 JVM 的主要组成部分？及其作用？</span><br><span class="line"></span><br><span class="line">类加载器（ClassLoader）</span><br><span class="line">运行时数据区（Runtime Data Area）</span><br><span class="line">执行引擎（Execution Engine）</span><br><span class="line">本地库接口（Native Interface）</span><br><span class="line">组件的作用： 首先通过类加载器（ClassLoader）会把 Java 代码转换成字节码，运行时数据区（Runtime Data Area）再把字节码加载到内存中，而字节码文件只是 JVM 的一套指令集规范，并不能直接交给底层操作系统去执行，因此需要特定的命令解析器执行引擎（Execution Engine），将字节码翻译成底层系统指令，再交由 CPU 去执行，而这个过程中需要调用其他语言的本地库接口（Native Interface）来实现整个程序的功能。</span><br><span class="line"></span><br><span class="line">195. 说一下 JVM 运行时数据区？</span><br><span class="line"></span><br><span class="line">不同虚拟机的运行时数据区可能略微有所不同，但都会遵从 Java 虚拟机规范， Java 虚拟机规范规定的区域分为以下 5 个部分：</span><br><span class="line"></span><br><span class="line">程序计数器（Program Counter Register）：当前线程所执行的字节码的行号指示器，字节码解析器的工作是通过改变这个计数器的值，来选取下一条需要执行的字节码指令，分支、循环、跳转、异常处理、线程恢复等基础功能，都需要依赖这个计数器来完成；</span><br><span class="line"></span><br><span class="line">Java 虚拟机栈（Java Virtual Machine Stacks）：用于存储局部变量表、操作数栈、动态链接、方法出口等信息；</span><br><span class="line"></span><br><span class="line">本地方法栈（Native Method Stack）：与虚拟机栈的作用是一样的，只不过虚拟机栈是服务 Java 方法的，而本地方法栈是为虚拟机调用 Native 方法服务的；</span><br><span class="line"></span><br><span class="line">Java 堆（Java Heap）：Java 虚拟机中内存最大的一块，是被所有线程共享的，几乎所有的对象实例都在这里分配内存；</span><br><span class="line"></span><br><span class="line">方法区（Methed Area）：用于存储已被虚拟机加载的类信息、常量、静态变量、即时编译后的代码等数据。</span><br><span class="line"></span><br><span class="line">196. 说一下堆栈的区别？</span><br><span class="line"></span><br><span class="line">功能方面：堆是用来存放对象的，栈是用来执行程序的。</span><br><span class="line">共享性：堆是线程共享的，栈是线程私有的。</span><br><span class="line">空间大小：堆大小远远大于栈。</span><br><span class="line">197. 队列和栈是什么？有什么区别？</span><br><span class="line"></span><br><span class="line">队列和栈都是被用来预存储数据的。</span><br><span class="line"></span><br><span class="line">队列允许先进先出检索元素，但也有例外的情况，Deque 接口允许从两端检索元素。</span><br><span class="line"></span><br><span class="line">栈和队列很相似，但它运行对元素进行后进先出进行检索。</span><br><span class="line"></span><br><span class="line">198. 什么是双亲委派模型？</span><br><span class="line"></span><br><span class="line">在介绍双亲委派模型之前先说下类加载器。对于任意一个类，都需要由加载它的类加载器和这个类本身一同确立在 JVM 中的唯一性，每一个类加载器，都有一个独立的类名称空间。类加载器就是根据指定全限定名称将 class 文件加载到 JVM 内存，然后再转化为 class 对象。</span><br><span class="line"></span><br><span class="line">类加载器分类：</span><br><span class="line"></span><br><span class="line">启动类加载器（Bootstrap ClassLoader），是虚拟机自身的一部分，用来加载Java_HOME/lib/目录中的，或者被 -Xbootclasspath 参数所指定的路径中并且被虚拟机识别的类库；</span><br><span class="line">其他类加载器：</span><br><span class="line">扩展类加载器（Extension ClassLoader）：负责加载\lib\ext目录或Java. ext. dirs系统变量指定的路径中的所有类库；</span><br><span class="line">应用程序类加载器（Application ClassLoader）。负责加载用户类路径（classpath）上的指定类库，我们可以直接使用这个类加载器。一般情况，如果我们没有自定义类加载器默认就是用这个加载器。</span><br><span class="line">双亲委派模型：如果一个类加载器收到了类加载的请求，它首先不会自己去加载这个类，而是把这个请求委派给父类加载器去完成，每一层的类加载器都是如此，这样所有的加载请求都会被传送到顶层的启动类加载器中，只有当父加载无法完成加载请求（它的搜索范围中没找到所需的类）时，子加载器才会尝试去加载类。</span><br><span class="line"></span><br><span class="line">199. 说一下类装载的执行过程？</span><br><span class="line"></span><br><span class="line">类装载分为以下 5 个步骤：</span><br><span class="line"></span><br><span class="line">加载：根据查找路径找到相应的 class 文件然后导入；</span><br><span class="line">检查：检查加载的 class 文件的正确性；</span><br><span class="line">准备：给类中的静态变量分配内存空间；</span><br><span class="line">解析：虚拟机将常量池中的符号引用替换成直接引用的过程。符号引用就理解为一个标示，而在直接引用直接指向内存中的地址；</span><br><span class="line">初始化：对静态变量和静态代码块执行初始化工作。</span><br><span class="line">200. 怎么判断对象是否可以被回收？</span><br><span class="line"></span><br><span class="line">一般有两种方法来判断：</span><br><span class="line"></span><br><span class="line">引用计数器：为每个对象创建一个引用计数，有对象引用时计数器 +1，引用被释放时计数 -1，当计数器为 0 时就可以被回收。它有一个缺点不能解决循环引用的问题；</span><br><span class="line">可达性分析：从 GC Roots 开始向下搜索，搜索所走过的路径称为引用链。当一个对象到 GC Roots 没有任何引用链相连时，则证明此对象是可以被回收的。</span><br><span class="line">201. Java 中都有哪些引用类型？</span><br><span class="line"></span><br><span class="line">强引用：发生 gc 的时候不会被回收。</span><br><span class="line">软引用：有用但不是必须的对象，在发生内存溢出之前会被回收。</span><br><span class="line">弱引用：有用但不是必须的对象，在下一次GC时会被回收。</span><br><span class="line">虚引用（幽灵引用/幻影引用）：无法通过虚引用获得对象，用 PhantomReference 实现虚引用，虚引用的用途是在 gc 时返回一个通知。</span><br><span class="line">202. 说一下 JVM 有哪些垃圾回收算法？</span><br><span class="line"></span><br><span class="line">标记-清除算法：标记无用对象，然后进行清除回收。缺点：效率不高，无法清除垃圾碎片。</span><br><span class="line">标记-整理算法：标记无用对象，让所有存活的对象都向一端移动，然后直接清除掉端边界以外的内存。</span><br><span class="line">复制算法：按照容量划分二个大小相等的内存区域，当一块用完的时候将活着的对象复制到另一块上，然后再把已使用的内存空间一次清理掉。缺点：内存使用率不高，只有原来的一半。</span><br><span class="line">分代算法：根据对象存活周期的不同将内存划分为几块，一般是新生代和老年代，新生代基本采用复制算法，老年代采用标记整理算法。</span><br><span class="line">203. 说一下 JVM 有哪些垃圾回收器？</span><br><span class="line"></span><br><span class="line">Serial：最早的单线程串行垃圾回收器。</span><br><span class="line">Serial Old：Serial 垃圾回收器的老年版本，同样也是单线程的，可以作为 CMS 垃圾回收器的备选预案。</span><br><span class="line">ParNew：是 Serial 的多线程版本。</span><br><span class="line">Parallel 和 ParNew 收集器类似是多线程的，但 Parallel 是吞吐量优先的收集器，可以牺牲等待时间换取系统的吞吐量。</span><br><span class="line">Parallel Old 是 Parallel 老生代版本，Parallel 使用的是复制的内存回收算法，Parallel Old 使用的是标记-整理的内存回收算法。</span><br><span class="line">CMS：一种以获得最短停顿时间为目标的收集器，非常适用 B/S 系统。</span><br><span class="line">G1：一种兼顾吞吐量和停顿时间的 GC 实现，是 JDK 9 以后的默认 GC 选项。</span><br><span class="line">204. 详细介绍一下 CMS 垃圾回收器？</span><br><span class="line"></span><br><span class="line">CMS 是英文 Concurrent Mark-Sweep 的简称，是以牺牲吞吐量为代价来获得最短回收停顿时间的垃圾回收器。对于要求服务器响应速度的应用上，这种垃圾回收器非常适合。在启动 JVM 的参数加上“-XX:+UseConcMarkSweepGC”来指定使用 CMS 垃圾回收器。</span><br><span class="line"></span><br><span class="line">CMS 使用的是标记-清除的算法实现的，所以在 gc 的时候回产生大量的内存碎片，当剩余内存不能满足程序运行要求时，系统将会出现 Concurrent Mode Failure，临时 CMS 会采用 Serial Old 回收器进行垃圾清除，此时的性能将会被降低。</span><br><span class="line"></span><br><span class="line">205. 新生代垃圾回收器和老生代垃圾回收器都有哪些？有什么区别？</span><br><span class="line"></span><br><span class="line">新生代回收器：Serial、ParNew、Parallel Scavenge</span><br><span class="line">老年代回收器：Serial Old、Parallel Old、CMS</span><br><span class="line">整堆回收器：G1</span><br><span class="line">新生代垃圾回收器一般采用的是复制算法，复制算法的优点是效率高，缺点是内存利用率低；老年代回收器一般采用的是标记-整理的算法进行垃圾回收。</span><br><span class="line"></span><br><span class="line">206. 简述分代垃圾回收器是怎么工作的？</span><br><span class="line"></span><br><span class="line">分代回收器有两个分区：老生代和新生代，新生代默认的空间占比总空间的 1/3，老生代的默认占比是 2/3。</span><br><span class="line"></span><br><span class="line">新生代使用的是复制算法，新生代里有 3 个分区：Eden、To Survivor、From Survivor，它们的默认占比是 8:1:1，它的执行流程如下：</span><br><span class="line"></span><br><span class="line">把 Eden + From Survivor 存活的对象放入 To Survivor 区；</span><br><span class="line">清空 Eden 和 From Survivor 分区；</span><br><span class="line">From Survivor 和 To Survivor 分区交换，From Survivor 变 To Survivor，To Survivor 变 From Survivor。</span><br><span class="line">每次在 From Survivor 到 To Survivor 移动时都存活的对象，年龄就 +1，当年龄到达 15（默认配置是 15）时，升级为老生代。大对象也会直接进入老生代。</span><br><span class="line"></span><br><span class="line">老生代当空间占用到达某个值之后就会触发全局垃圾收回，一般使用标记整理的执行算法。以上这些循环往复就构成了整个分代垃圾回收的整体执行流程。</span><br><span class="line"></span><br><span class="line">207. 说一下 JVM 调优的工具？</span><br><span class="line"></span><br><span class="line">JDK 自带了很多监控工具，都位于 JDK 的 bin 目录下，其中最常用的是 jconsole 和 jvisualvm 这两款视图监控工具。</span><br><span class="line"></span><br><span class="line">jconsole：用于对 JVM 中的内存、线程和类等进行监控；</span><br><span class="line">jvisualvm：JDK 自带的全能分析工具，可以分析：内存快照、线程快照、程序死锁、监控内存的变化、gc 变化等。</span><br><span class="line">208. 常用的 JVM 调优的参数都有哪些？</span><br><span class="line"></span><br><span class="line">-Xms2g：初始化推大小为 2g；</span><br><span class="line">-Xmx2g：堆最大内存为 2g；</span><br><span class="line">-XX:NewRatio=4：设置年轻的和老年代的内存比例为 1:4；</span><br><span class="line">-XX:SurvivorRatio=8：设置新生代 Eden 和 Survivor 比例为 8:2；</span><br><span class="line">–XX:+UseParNewGC：指定使用 ParNew + Serial Old 垃圾回收器组合；</span><br><span class="line">-XX:+UseParallelOldGC：指定使用 ParNew + ParNew Old 垃圾回收器组合；</span><br><span class="line">-XX:+UseConcMarkSweepGC：指定使用 CMS + Serial Old 垃圾回收器组合；</span><br><span class="line">-XX:+PrintGC：开启打印 gc 信息；</span><br><span class="line">-XX:+PrintGCDetails：打印 gc 详细信息。</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/04/06/java_GItChat_java/" data-id="ck8d2d5xx0099bcuwlhr66ret" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-rabbitMq" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/03/rabbitMq/" class="article-date">
  <time datetime="2019-03-03T03:25:26.000Z" itemprop="datePublished">2019-03-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/03/rabbitMq/">rabbitMq</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="RabbitMQ-研究"><a href="#RabbitMQ-研究" class="headerlink" title="RabbitMQ 研究"></a>RabbitMQ 研究</h5><ol>
<li>介绍<ol>
<li>RabbitMQ</li>
</ol>
</li>
</ol>
<p>MQ全称为Message Queue，即消息队列， RabbitMQ是由erlang语言开发，基于AMQP（Advanced Message<br>Queue 高级消息队列协议）协议实现的消息队列，它是一种应用程序之间的通信方法，消息队列在分布式系统开<br>发中应用非常广泛。RabbitMQ官方地址：<a href="http://www.rabbitmq.com" target="_blank" rel="noopener">http://www.rabbitmq.com</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">开发中消息队列通常有如下应用场景：</span><br><span class="line">1、任务异步处理。</span><br><span class="line">将不需要同步处理的并且耗时长的操作由消息队列通知消息接收方进行异步处理。提高了应用程序的响应时间。</span><br><span class="line">2、应用程序解耦合</span><br><span class="line">MQ相当于一个中介，生产方通过MQ与消费方交互，它将应用程序进行解耦合。</span><br><span class="line">市场上还有哪些消息队列？</span><br><span class="line">ActiveMQ，RabbitMQ，ZeroMQ，Kafka，MetaMQ，RocketMQ、Redis。</span><br><span class="line">为什么使用RabbitMQ呢？</span><br><span class="line">1、使得简单，功能强大。</span><br><span class="line">2、基于AMQP协议。</span><br><span class="line">3、社区活跃，文档完善。</span><br><span class="line">4、高并发性能好，这主要得益于Erlang语言。</span><br><span class="line">5、Spring Boot默认已集成RabbitMQ</span><br></pre></td></tr></table></figure>
<p>2.入门</p>
<pre><code>1. 工作原理
</code></pre><p> <img src="https://threadv.github.io/rabbitMQ/yuanli.png" alt="yuanli"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">组成部分说明如下：</span><br><span class="line">Broker：消息队列服务进程，此进程包括两个部分：Exchange和Queue。</span><br><span class="line">Exchange：消息队列交换机，按一定的规则将消息路由转发到某个队列，对消息进行过虑。</span><br><span class="line">Queue：消息队列，存储消息的队列，消息到达队列并转发给指定的消费方。</span><br><span class="line">Producer：消息生产者，即生产方客户端，生产方客户端将消息发送到MQ。</span><br><span class="line">Consumer：消息消费者，即消费方客户端，接收MQ转发的消息。</span><br><span class="line">消息发布接收流程：</span><br><span class="line">-----发送消息-----</span><br><span class="line">1、生产者和Broker建立TCP连接。</span><br><span class="line">2、生产者和Broker建立通道。</span><br><span class="line">3、生产者通过通道消息发送给Broker，由Exchange将消息进行转发。</span><br><span class="line">4、Exchange将消息转发到指定的Queue（队列）</span><br><span class="line">----接收消息-----</span><br><span class="line">1、消费者和Broker建立TCP连接</span><br><span class="line">2、消费者和Broker建立通道</span><br><span class="line">3、消费者监听指定的Queue（队列）</span><br><span class="line">4、当有消息到达Queue时Broker默认将消息推送给消费者。</span><br><span class="line">5、消费者接收到消息。</span><br></pre></td></tr></table></figure>
<p>3.安装</p>
<p>RabbitMQ由Erlang语言开发，Erlang语言用于并发及分布式系统的开发，在电信领域应用广泛，OTP（Open<br>Telecom Platform）作为Erlang语言的一部分，包含了很多基于Erlang开发的中间件及工具库，安装RabbitMQ需<br>要安装Erlang/OTP，并保持版本匹配，</p>
<p>RabbitMQ的下载地址：<a href="http://www.rabbitmq.com/download.html" target="_blank" rel="noopener">http://www.rabbitmq.com/download.html</a></p>
<p>erlang的下载地址： <a href="http://www.erlang.org/downloads" target="_blank" rel="noopener">http://www.erlang.org/downloads</a></p>
<ol>
<li><p>启动</p>
<ol>
<li>从开始菜单启动RabbitMQ<br>在开始菜单找到RabbitMQ的菜单：</li>
</ol>
<p><img src="https://threadv.github.io/rabbitMQ/menu.png" alt="menu"></p>
</li>
</ol>
<ul>
<li>RabbitMQ Service-install :安装服务</li>
<li>RabbitMQ Service-remove 删除服务</li>
<li>RabbitMQ Service-start 启动</li>
<li>RabbitMQ Service-stop 启动</li>
</ul>
<p>安装并运行服务<br>rabbitmq-service.bat install 安装服务 rabbitmq-service.bat stop 停止服务 rabbitmq-service.bat start 启动服务<br>2）安装管理插件<br>安装rabbitMQ的管理插件，方便在浏览器端管理RabbitMQ<br>管理员身份运行 rabbitmq-plugins.bat enable rabbitmq_management<br>北京市昌平区建材城西路金燕龙办公楼一层 电话：400-618-90903、启动成功 登录RabbitMQ<br>进入浏览器，输入：<a href="http://localhost:15672" target="_blank" rel="noopener">http://localhost:15672</a></p>
<p>用 rabbitMQ官方提供的java client测试，目的是对RabbitMQ的交互过程有个清晰的认识。</p>
<p>参考 ：<a href="https://github.com/rabbitmq/rabbitmq-java-client/" target="_blank" rel="noopener">https://github.com/rabbitmq/rabbitmq-java-client/</a></p>
<ul>
<li>创建maven工程</li>
</ul>
<p>创建生产者工程和消费者工程，分别加入RabbitMQ java client的依赖。</p>
<p>test-rabbitmq-producer：生产者工程</p>
<p>test-rabbitmq-consumer：消费者工程</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.rabbitmq<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>amqp‐client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span><span class="tag">&lt;<span class="name">!‐‐此版本与spring</span> <span class="attr">boot</span> <span class="attr">1.5.9</span>版本匹配‐‐&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring‐boot‐starter‐logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>生产者</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Producer01</span> </span>&#123;</span><br><span class="line">    <span class="comment">//队列名称</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String QUEUE = <span class="string">"helloworld"</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException </span>&#123;</span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        Channel channel = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ConnectionFactory factory = <span class="keyword">new</span> ConnectionFactory();</span><br><span class="line">            factory.setHost(<span class="string">"localhost"</span>);</span><br><span class="line">            factory.setPort(<span class="number">5672</span>);</span><br><span class="line">            factory.setUsername(<span class="string">"guest"</span>);</span><br><span class="line">            factory.setPassword(<span class="string">"guest"</span>);</span><br><span class="line">            factory.setVirtualHost(<span class="string">"/"</span>);<span class="comment">//rabbitmq默认虚拟机名称为“/”，虚拟机相当于一个独立的mq服务</span></span><br><span class="line">            器</span><br><span class="line">            <span class="comment">//创建与RabbitMQ服务的TCP连接</span></span><br><span class="line">            connection = factory.newConnection();</span><br><span class="line">            <span class="comment">//创建与Exchange的通道，每个连接可以创建多个通道，每个通道代表一个会话任务</span></span><br><span class="line">            channel = connection.createChannel();</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">            * 声明队列，如果Rabbit中没有此队列将自动创建</span></span><br><span class="line"><span class="comment">            * param1:队列名称</span></span><br><span class="line"><span class="comment">            * param2:是否持久化</span></span><br><span class="line"><span class="comment">            * param3:队列是否独占此连接</span></span><br><span class="line"><span class="comment">            * param4:队列不再使用时是否自动删除此队列</span></span><br><span class="line"><span class="comment">            * param5:队列参数</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            channel.queueDeclare(QUEUE, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">null</span>);</span><br><span class="line">            String message = <span class="string">"helloworld小明"</span>+System.currentTimeMillis();</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">            * 消息发布方法</span></span><br><span class="line"><span class="comment">            * param1：Exchange的名称，如果没有指定，则使用Default Exchange</span></span><br><span class="line"><span class="comment">            * param2:routingKey,消息的路由Key，是用于Exchange（交换机）将消息转发到指定的消息队列</span></span><br><span class="line"><span class="comment">            * param3:消息包含的属性</span></span><br><span class="line"><span class="comment">            * param4：消息体</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">            * 这里没有指定交换机，消息将发送给默认交换机，每个队列也会绑定那个默认的交换机，但是不能显</span></span><br><span class="line"><span class="comment">            示绑定或解除绑定</span></span><br><span class="line"><span class="comment">            * 默认的交换机，routingKey等于队列名称</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            channel.basicPublish(<span class="string">""</span>, QUEUE, <span class="keyword">null</span>, message.getBytes());</span><br><span class="line">            System.out.println(<span class="string">"Send Message is:'"</span> + message + <span class="string">"'"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span>(Exception ex)&#123;</span><br><span class="line">            ex.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(channel != <span class="keyword">null</span>) &#123;</span><br><span class="line">            channel.close();</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">if</span>(connection != <span class="keyword">null</span>)&#123;</span><br><span class="line">            connection.close();</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>消费者</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Consumer01</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String QUEUE = <span class="string">"helloworld"</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException </span>&#123;</span><br><span class="line">        ConnectionFactory factory = <span class="keyword">new</span> ConnectionFactory();</span><br><span class="line">        <span class="comment">//设置MabbitMQ所在服务器的ip和端口</span></span><br><span class="line">        factory.setHost(<span class="string">"127.0.0.1"</span>);</span><br><span class="line">        factory.setPort(<span class="number">5672</span>);</span><br><span class="line">        Connection connection = factory.newConnection();</span><br><span class="line">        Channel channel = connection.createChannel();</span><br><span class="line">        <span class="comment">//声明队列</span></span><br><span class="line">        channel.queueDeclare(QUEUE, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">null</span>);</span><br><span class="line">        <span class="comment">//定义消费方法</span></span><br><span class="line">        DefaultConsumer consumer = <span class="keyword">new</span> DefaultConsumer(channel) &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">        * 消费者接收消息调用此方法</span></span><br><span class="line"><span class="comment">        * <span class="doctag">@param</span> consumerTag 消费者的标签，在channel.basicConsume()去指定</span></span><br><span class="line"><span class="comment">        * <span class="doctag">@param</span> envelope 消息包的内容，可从中获取消息id，消息routingkey，交换机，消息和重传标志</span></span><br><span class="line"><span class="comment">        (收到消息失败后是否需要重新发送)</span></span><br><span class="line"><span class="comment">        * <span class="doctag">@param</span> properties</span></span><br><span class="line"><span class="comment">        * <span class="doctag">@param</span> body</span></span><br><span class="line"><span class="comment">        * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleDelivery</span><span class="params">(String consumerTag,</span></span></span><br><span class="line"><span class="function"><span class="params">            Envelope envelope,</span></span></span><br><span class="line"><span class="function"><span class="params">            AMQP.BasicProperties properties,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">byte</span>[] body)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">                <span class="comment">//交换机</span></span><br><span class="line">                String exchange = envelope.getExchange();</span><br><span class="line">                <span class="comment">//路由key</span></span><br><span class="line">                String routingKey = envelope.getRoutingKey();</span><br><span class="line">                <span class="comment">//消息id</span></span><br><span class="line">                <span class="keyword">long</span> deliveryTag = envelope.getDeliveryTag();</span><br><span class="line">                <span class="comment">//消息内容</span></span><br><span class="line">                String msg = <span class="keyword">new</span> String(body,<span class="string">"utf‐8"</span>);</span><br><span class="line">                System.out.println(<span class="string">"receive message.."</span> + msg);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">        * 监听队列String queue, boolean autoAck,Consumer callback</span></span><br><span class="line"><span class="comment">        * 参数明细</span></span><br><span class="line"><span class="comment">        * 1、队列名称</span></span><br><span class="line"><span class="comment">        * 2、是否自动回复，设置为true为表示消息接收到自动向mq回复接收到了，mq接收到回复会删除消息，设置</span></span><br><span class="line"><span class="comment">        为false则需要手动回复</span></span><br><span class="line"><span class="comment">        * 3、消费消息的方法，消费者接收到消息后调用此方法</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        channel.basicConsume(QUEUE, <span class="keyword">true</span>, consumer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>总结</li>
<li>1、发送端操作流程<ul>
<li>1）创建连接</li>
<li>2）创建通道</li>
<li>3）声明队列</li>
<li>4）发送消息</li>
</ul>
</li>
<li>2、接收端<ul>
<li>1）创建连接</li>
<li>2）创建通道</li>
<li>3）声明队列</li>
<li>4）监听队列</li>
<li>5）接收消息</li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/03/rabbitMq/" data-id="ck8d0ogrh005bbcuwvieez6az" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/消息队列/">消息队列</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Java_基础知识" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/02/18/Java_基础知识/" class="article-date">
  <time datetime="2019-02-18T05:18:33.000Z" itemprop="datePublished">2019-02-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/02/18/Java_基础知识/">Java基础知识</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="Java基础知识"><a href="#Java基础知识" class="headerlink" title="Java基础知识"></a>Java基础知识</h5><p>原文：<a href="https://blog.csdn.net/linzhiqiang0316/article/details/80473906" target="_blank" rel="noopener">https://blog.csdn.net/linzhiqiang0316/article/details/80473906</a></p>
<h5 id="相关概念"><a href="#相关概念" class="headerlink" title="相关概念"></a>相关概念</h5><ol>
<li><p>面向对象的三个特征</p>
<p> 封装，继承，多态，这个应该是人人皆知，有时候也会加上抽象。 </p>
</li>
<li><p>多态的好处</p>
<p> 允许不同类对象对同一消息做出响应，即同一消息可以根据发送对象的不同而采用多种不同的行为方式(发送消息就是函数调用)。主要有以下优点：</p>
<pre><code>可替换性：多态对已存在代码具有可替换性

可扩充性：增加新的子类不影响已经存在的类结构

接口性：多态是超类通过方法签名,向子类提供一个公共接口,由子类来完善或者重写它来实现的。

灵活性

简化性
</code></pre></li>
<li><p>代码中如何实现多态</p>
<p> 实现多态主要有以下三种方式：<br> ​    接口实现<br> ​    继承父类重写方法<br> ​    同一类中进行方法重载</p>
</li>
<li><p>虚拟机是如何实现多态的</p>
<p> 动态绑定技术(dynamic binding)，执行期间判断所引用对象的实际类型，根据实际类型调用对应的方法。</p>
</li>
<li><p>接口的意义</p>
<p> 接口的意义用三个词就可以概括：规范，扩展，回调。</p>
</li>
<li><p>抽象类的意义</p>
<pre><code>抽象类的意义可以用三句话来概括：

为其他子类提供一个公共的类型

封装子类中重复定义的内容

定义抽象方法,子类虽然有不同的实现，但是定义时一致的
</code></pre></li>
<li>接口和抽象类的区别</li>
</ol>
<table>
<thead>
<tr>
<th>比较</th>
<th>抽象类</th>
<th>接口</th>
</tr>
</thead>
<tbody>
<tr>
<td>默认方法</td>
<td>抽象类可以有默认的方法实现</td>
<td>java 8之前,接口中不存在方法的实现</td>
</tr>
<tr>
<td>实现方式</td>
<td>子类使用extends关键字来继承抽象类.如果子类不是抽象类,子类需要提供抽象类中所声明方法的实现</td>
<td>子类使用implements来实现接口,需要提供接口中所有声明的实现</td>
</tr>
<tr>
<td>构造器</td>
<td>抽象类中可以有构造器</td>
<td>接口中不能</td>
</tr>
<tr>
<td>和正常类区别</td>
<td>抽象类不能被实例化</td>
<td>接口则是完全不同的类型</td>
</tr>
<tr>
<td>访问修饰符</td>
<td>抽象方法可以有public,protected和default等修饰</td>
<td>接口默认是public,不能使用其他修饰符</td>
</tr>
<tr>
<td>多继承</td>
<td>一个子类只能存在一个父类</td>
<td>一个子类可以存在多个接口</td>
</tr>
<tr>
<td>添加新方法</td>
<td>想抽象类中添加新方法,可以提供默认的实现,因此可以不修改子类现有的代码</td>
<td>如果往接口中添加新方法,则子类中需要实现该方法</td>
</tr>
</tbody>
</table>
<ol>
<li><p>父类的静态方法能否被子类重写</p>
<p> 不能。重写只适用于实例方法,不能用于静态方法，而子类当中含有和父类相同签名的静态方法，我们一般称之为隐藏</p>
</li>
<li><p>什么是不可变对象</p>
<p> 不可变对象指对象一旦被创建，状态就不能再改变。任何修改都会创建一个新的对象，如 String、Integer及其它包装类</p>
</li>
<li><p>静态变量和实例变量的区别?</p>
<p>静态变量存储在方法区，属于类所有。实例变量存储在堆当中，其引用存在当前线程栈</p>
</li>
<li><p>能否创建一个包含可变对象的不可变对象?</p>
<p>当然可以创建一个包含可变对象的不可变对象的，你只需要谨慎一点，不要共享可变对象的引用就可以了，如果需要变化时，就返回原对象的一个拷贝。最常见的例子就是对象中包含一个日期对象的引用</p>
</li>
<li><p>java 创建对象的几种方式</p>
<p>采用new</p>
<p>通过反射</p>
<p>采用clone</p>
<p>通过序列化机制</p>
<p>前2者都需要显式地调用构造方法。造成耦合性最高的恰好是第一种，因此你发现无论什么框架，只要涉及到解耦必先减少new的使用。</p>
</li>
<li><p>switch中能否使用string做参数</p>
<p>在idk 1.7之前，switch只能支持byte, short, char, int或者其对应的封装类以及Enum类型。从idk 1.7之后switch开始支持String</p>
</li>
<li><p>switch能否作用在byte, long上?</p>
<p>可以用在byte上，但是不能用在long上。</p>
</li>
<li><p>你对String对象的intern()熟悉么?</p>
<p>intern()方法会首先从常量池中查找是否存在该常量值，如果常量池中不存在则现在常量池中创建，如果已经存在则直接返回。</p>
<pre><code>比如 
String s1=”aa”; 
String s2=s1.intern(); 
System.out.print(s1==s2);//返回true
</code></pre></li>
<li><p>String s1=”ab”, String s2=”a”+”b”, String s3=”a”, String s4=”b”, s5=s3+s4请问s5==s2返回什么？</p>
<p> 返回false。在编译过程中，编译器会将s2直接优化为”ab”，会将其放置在常量池当中，s5则是被创建在堆区，相当于s5=new String(“ab”);</p>
</li>
<li><p>Object中有哪些公共方法?</p>
<p>equals()</p>
<p>clone()</p>
<p>getClass()</p>
<p>notify(),notifyAll(),wait()</p>
<p>toString</p>
</li>
<li><p>java当中的四种引用</p>
<p>强引用，软引用，弱引用，虚引用。不同的引用类型主要体现在GC上:<br>​    </p>
<pre><code>强引用：如果一个对象具有强引用，它就不会被垃圾回收器回收。即使当前内存空间不足，JVM也不会回收它，而是抛出 OutOfMemoryError 错误，使程序异常终止。如果想中断强引用和某个对象之间的关联，可以显式地将引用赋值为null，这样一来的话，JVM在合适的时间就会回收该对象。

软引用：在使用软引用时，如果内存的空间足够，软引用就能继续被使用，而不会被垃圾回收器回收，只有在内存不足时，软引用才会被垃圾回收器回收。

弱引用：具有弱引用的对象拥有的生命周期更短暂。因为当 JVM 进行垃圾回收，一旦发现弱引用对象，无论当前内存空间是否充足，都会将弱引用回收。不过由于垃圾回收器是一个优先级较低的线程，所以并不一定能迅速发现弱引用对象。

虚引用：顾名思义，就是形同虚设，如果一个对象仅持有虚引用，那么它相当于没有引用，在任何时候都可能被垃圾回收器回收。
</code></pre></li>
<li><p>WeakReference与SoftReference的区别?</p>
<p>这点在四种引用类型中已经做了解释,这里简单说明一下即可: </p>
<p>虽然 WeakReference 与 SoftReference 都有利于提高 GC 和 内存的效率，但是 WeakReference ，一旦失去最后一个强引用，就会被 GC 回收，而软引用虽然不能阻止被回收，但是可以延迟到 JVM 内存不足的时候</p>
</li>
<li><p>为什么要有不同的引用类型</p>
<p>不像C语言，我们可以控制内存的申请和释放，在Java中有时候我们需要适当的控制对象被回收的时机，因此就诞生了不同的引用类型，可以说不同的引用类型实则是对GC回收时机不可控的妥协。有以下几个使用场景可以充分的说明：</p>
<p>利用软引用和弱引用解决OOM问题：用一个HashMap来保存图片的路径和相应图片对象关联的软引用之间的映射关系，在内存不足时，JVM会自动回收这些缓存图片对象所占用的空间，从而有效地避免了OOM的问题.</p>
<p>通过软引用实现Java对象的高速缓存:比如我们创建了一Person的类，如果每次需要查询一个人的信息,哪怕是几秒中之前刚刚查询过的，都要重新构建一个实例，这将引起大量Person对象的消耗，并且由于这些对象的生命周期相对较短，会引起多次GC影响性能。此时，通过软引用和 HashMap 的结合可以构建高速缓存，提供性能</p>
</li>
<li><p>java中==和eqauls()的区别,equals()和`hashcode的区别</p>
<p>==  是运算符，用于比较两个变量是否相等，而equals是Object类的方法，用于比较两个对象是否相等。默认Object类的equals方法是比较两个对象的地址，此时和  == 的结果一样。换句话说：基本类型比较用==，比较的是他们的值。默认下，对象用==比较时，比较的是内存地址，如果需要比较对象内容，需要重写equal方法</p>
</li>
<li><p>equals()和hashcode()的联系</p>
<p>hashCode()是Object类的一个方法，返回一个哈希值。如果两个对象根据equal()方法比较相等，那么调用这两个对象中任意一个对象的hashCode()方法必须产生相同的哈希值。<br>如果两个对象根据eqaul()方法比较不相等，那么产生的哈希值不一定相等(碰撞的情况下还是会相等的。)</p>
</li>
<li><p>a.hashCode()有什么用?与a.equals(b)有什么关系</p>
<p>hashCode() 方法是相应对象整型的 hash 值。它常用于基于 hash 的集合类，如 Hashtable、HashMap、LinkedHashMap等等。它与 equals() 方法关系特别紧密。根据 Java 规范，使用 equal() 方法来判断两个相等的对象，必须具有相同的 hashcode。</p>
<p>将对象放入到集合中时，首先判断要放入对象的hashcode是否已经在集合中存在，不存在则直接放入集合。如果hashcode相等，然后通过equal()方法判断要放入对象与集合中的任意对象是否相等：如果equal()判断不相等，直接将该元素放入集合中，否则不放入</p>
</li>
<li><p>有没有可能两个不相等的对象有相同的hashcode</p>
<p>有可能，两个不相等的对象可能会有相同的 hashcode 值，这就是为什么在 hashmap 中会有冲突。如果两个对象相等，必须有相同的hashcode 值，反之不成立</p>
</li>
<li><p>可以在hashcode中使用随机数字吗?</p>
<p>不行，因为同一对象的 hashcode 值必须是相同的</p>
</li>
<li><p>a==b与a.equals(b)有什么区别</p>
<p>如果a 和b 都是对象，则 a==b 是比较两个对象的引用，只有当 a 和 b 指向的是堆中的同一个对象才会返回 true，而 a.equals(b) 是进行逻辑比较，所以通常需要重写该方法来提供逻辑一致性的比较。例如，String 类重写 equals() 方法，所以可以用于两个不同对象，但是包含的字母相同的比较</p>
</li>
<li><p>3*0.1==0.3返回值是什么</p>
<p>false，因为有些浮点数不能完全精确的表示出来</p>
</li>
<li><p>a=a+b与a+=b有什么区别吗?</p>
<p>+=操作符会进行隐式自动类型转换，此处a+=b隐式的将加操作的结果类型强制转换为持有结果的类型，而a=a+b则不会自动进行类型转换。如：<br>byte a = 127;<br>byte b = 127;<br>b = a + b; // error : cannot convert from int to byte<br>b += a; // ok<br>（译者注：这个地方应该表述的有误，其实无论 a+b 的值为多少，编译器都会报错，因为 a+b 操作会将 a、b 提升为 int 类型，所以将 int 类型赋值给 byte 就会编译出错）</p>
</li>
<li><p>short s1= 1; s1 = s1 + 1; 该段代码是否有错,有的话怎么改？</p>
<p>有错误，short类型在进行运算时会自动提升为int类型，也就是说s1+1的运算结果是int类型。</p>
</li>
<li><p>short s1= 1; s1 += 1; 该段代码是否有错，有的话怎么改？</p>
<p>+=操作符会自动对右边的表达式结果强转匹配左边的数据类型，所以没错。</p>
</li>
<li><p>&amp; 和 &amp;&amp;的区别</p>
<p>首先记住&amp;是位操作，而&amp;&amp;是逻辑运算符。另外需要记住逻辑运算符具有短路特性，而&amp;不具备短路特性</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">   <span class="keyword">static</span> String name;</span><br><span class="line"> </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">       <span class="keyword">if</span>(name!=<span class="keyword">null</span>&amp;userName.equals(<span class="string">""</span>))&#123;</span><br><span class="line">           System.out.println(<span class="string">"ok"</span>);</span><br><span class="line">       &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">           System.out.println(<span class="string">"erro"</span>);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>一个java文件内部可以有类？(非内部类)</p>
<p>只能有一个public公共类，但是可以有多个default修饰的类。</p>
</li>
<li><p>如何正确的退出多层嵌套循环？</p>
<p>使用标号和break;</p>
<p>通过在外层循环中添加标识符</p>
</li>
<li><p>内部类的作用</p>
<p>内部类可以有多个实例，每个实例都有自己的状态信息，并且与其他外围对象的信息相互独立.在单个外围类当中，可以让多个内部类以不同的方式实现同一接口，或者继承同一个类.创建内部类对象的时刻不依赖于外部类对象的创建。内部类并没有令人疑惑的”is-a”管系，它就像是一个独立的实体。</p>
<p>内部类提供了更好的封装，除了该外围类，其他类都不能访问</p>
</li>
<li><p>final, finalize和finally的不同之处</p>
<p>final 是一个修饰符，可以修饰变量、方法和类。如果 final 修饰变量，意味着该变量的值在初始化后不能被改变。</p>
<p>finalize 方法是在对象被回收之前调用的方法，给对象自己最后一个复活的机会，但是什么时候调用 finalize 没有保证。</p>
<p>finally 是一个关键字，与 try 和 catch 一起用于异常的处理。finally 块一定会被执行，无论在 try 块中是否有发生异常</p>
</li>
<li><p>clone()是哪个类的方法?</p>
<p>java.lang.Cloneable 是一个标示性接口，不包含任何方法，clone 方法在 object 类中定义。并且需要知道 clone() 方法是一个本地方法，这意味着它是由 c 或 c++ 或 其他本地语言实现的</p>
</li>
<li><p>深拷贝和浅拷贝的区别是什么?</p>
<p>浅拷贝：被复制对象的所有变量都含有与原来的对象相同的值，而所有的对其他对象的引用仍然指向原来的对象。换言之，浅拷贝仅仅复制所考虑的对象，而不复制它所引用的对象。</p>
<p>深拷贝：被复制对象的所有变量都含有与原来的对象相同的值，而那些引用其他对象的变量将指向被复制过的新对象，而不再是原有的那些被引用的对象。换言之，深拷贝把要复制的对象所引用的对象都复制了一遍</p>
</li>
<li><p>static都有哪些用法?</p>
<p>几乎所有的人都知道static关键字这两个基本的用法：静态变量和静态方法。也就是被static所修饰的变量/方法都属于类的静态资源，类实例所共享。</p>
<p>除了静态变量和静态方法之外，static也用于静态块，多用于初始化操作：</p>
<pre><code>public calss PreCache{
   static{
       //执行相关操作
   }
}
</code></pre><p>此外static也多用于修饰内部类，此时称之为静态内部类。</p>
<p>最后一种用法就是静态导包，即import static.import static是在JDK 1.5之后引入的新特性，可以用来指定导入某个类中的静态资源，并且不需要使用类名。资源名，可以直接使用资源名，比如：<br>​<br>​    </p>
<pre><code>import static java.lang.Math.*;

public class Test{

   public static void main(String[] args){
       //System.out.println(Math.sin(20));传统做法
       System.out.println(sin(20));
   }
}
</code></pre></li>
<li><p>final有哪些用法</p>
<p>final也是很多面试喜欢问的地方，能回答下以下三点就不错了：<br>​    </p>
<pre><code>1.被final修饰的类不可以被继承 
2.被final修饰的方法不可以被重写 
3.被final修饰的变量不可以被改变。如果修饰引用，那么表示引用不可变，引用指向的内容可变。
4.被final修饰的方法，JVM会尝试将其内联，以提高运行效率 
5.被final修饰的常量，在编译阶段会存入常量池中。

回答出编译器对final域要遵守的两个重排序规则更好：
1.在构造函数内对一个final域的写入，与随后把这个被构造对象的引用赋值给一个引用变量,这两个操作之间不能重排序。
2.初次读一个包含final域的对象的引用，与随后初次读这个final域,这两个操作之间不能重排序。
</code></pre><h5 id="数据类型相关"><a href="#数据类型相关" class="headerlink" title="数据类型相关"></a>数据类型相关</h5></li>
<li><p>java中int char,long各占多少字节?</p>
</li>
</ol>
<table>
<thead>
<tr>
<th>类型</th>
<th>位数</th>
<th>字节数</th>
</tr>
</thead>
<tbody>
<tr>
<td>short</td>
<td>2</td>
<td>16</td>
</tr>
<tr>
<td>int</td>
<td>4</td>
<td>32</td>
</tr>
<tr>
<td>long</td>
<td>8</td>
<td>64</td>
</tr>
<tr>
<td>float</td>
<td>4</td>
<td>32</td>
</tr>
<tr>
<td>double</td>
<td>8</td>
<td>64</td>
</tr>
<tr>
<td>char</td>
<td>2</td>
<td>16</td>
</tr>
</tbody>
</table>
<ol>
<li><p>64位的JVM当中,int的长度是多少?</p>
<p> Java 中，int 类型变量的长度是一个固定值，与平台无关，都是 32 位。意思就是说，在 32 位 和 64 位 的Java 虚拟机中，int 类型的长度是相同的</p>
</li>
<li><p>int和Integer的区别</p>
<p> Integer是int的包装类型，在拆箱和装箱中，二者自动转换。int是基本类型，直接存数值，而integer是对象，用一个引用指向这个对象</p>
</li>
<li><p>int 和Integer谁占用的内存更多?</p>
<p> Integer 对象会占用更多的内存。Integer是一个对象，需要存储对象的元数据。但是 int 是一个原始类型的数据，所以占用的空间更少</p>
</li>
<li><p>String, StringBuffer和StringBuilder区别</p>
<p> String是字符串常量，final修饰：StringBuffer字符串变量(线程安全)；</p>
<p> StringBuilder 字符串变量(线程不安全)。</p>
</li>
<li><p>String和StringBuffer</p>
<p> String和StringBuffer主要区别是性能：String是不可变对象，每次对String类型进行操作都等同于产生了一个新的String对象，然后指向新的String对象。所以尽量不在对String进行大量的拼接操作，否则会产生很多临时对象，导致GC开始工作，影响系统性能。</p>
<p> StringBuffer是对对象本身操作，而不是产生新的对象，因此在有大量拼接的情况下，我们建议使用StringBuffer。</p>
<p> 但是需要注意现在JVM会对String拼接做一定的优化：<br> String s=“This is only ”+”simple”+”test”会被虚拟机直接优化成String s=“This is only simple test”，此时就不存在拼接过程。</p>
</li>
<li><p>StringBuffer和StringBuilder</p>
<p> StringBuffer是线程安全的可变字符串，其内部实现是可变数组。StringBuilder是jdk 1.5新增的，其功能和StringBuffer类似，但是非线程安全。因此，在没有多线程问题的前提下，使用StringBuilder会取得更好的性能</p>
</li>
<li><p>什么是编译器常量？使用它有什么风险？</p>
<p> 公共静态不可变（public static final ）变量也就是我们所说的编译期常量，这里的 public 可选的。实际上这些变量在编译时会被替换掉，因为编译器知道这些变量的值，并且知道这些变量在运行时不能改变。这种方式存在的一个问题是你使用了一个内部的或第三方库中的公有编译时常量，但是这个值后面被其他人改变了，但是你的客户端仍然在使用老的值，甚至你已经部署了一个新的jar。为了避免这种情况，当你在更新依赖 JAR 文件时，确保重新编译你的程序</p>
</li>
<li><p>java当中使用什么类型表示价格比较好?</p>
<p> 如果不是特别关心内存和性能的话，使用BigDecimal，否则使用预定义精度的 double 类型</p>
</li>
<li><p>如何将byte转为String</p>
<p>可以使用 String 接收 byte[] 参数的构造器来进行转换，需要注意的点是要使用的正确的编码，否则会使用平台默认编码，这个编码可能跟原来的编码相同，也可能不同</p>
</li>
<li><p>可以将int强转为byte类型么?会产生什么问题?</p>
<p>我们可以做强制转换，但是Java中int是32位的而byte是8 位的，所以,如果强制转化int类型的高24位将会被丢弃，byte 类型的范围是从-128到128</p>
</li>
</ol>
<h5 id="关于垃圾回收"><a href="#关于垃圾回收" class="headerlink" title="关于垃圾回收"></a>关于垃圾回收</h5><ol>
<li><p>你知道哪些垃圾回收算法?</p>
<p> 垃圾回收从理论上非常容易理解,具体的方法有以下几种: </p>
<ol>
<li>标记-清除 </li>
<li>标记-复制 </li>
<li>标记-整理 </li>
<li><p>分代回收<br>更详细的内容参见深入理解垃圾回收算法：</p>
<p><a href="http://blog.csdn.net/dd864140130/article/details/50084471" target="_blank" rel="noopener">http://blog.csdn.net/dd864140130/article/details/50084471</a></p>
</li>
</ol>
</li>
<li><p>如何判断一个对象是否应该被回收</p>
<p> 这就是所谓的对象存活性判断，常用的方法有两种：1.引用计数法;　2.对象可达性分析。由于引用计数法存在互相引用导致无法进行GC的问题，所以目前JVM虚拟机多使用对象可达性分析算法</p>
</li>
<li><p>简单的解释一下垃圾回收</p>
<p> Java 垃圾回收机制最基本的做法是分代回收。内存中的区域被划分成不同的世代，对象根据其存活的时间被保存在对应世代的区域中。一般的实现是划分成3个世代：年轻、年老和永久。内存的分配是发生在年轻世代中的。当一个对象存活时间足够长的时候，它就会被复制到年老世代中。对于不同的世代可以使用不同的垃圾回收算法。进行世代划分的出发点是对应用中对象存活时间进行研究之后得出的统计规律。一般来说，一个应用中的大部分对象的存活时间都很短。比如局部变量的存活时间就只在方法的执行过程中。基于这一点，对于年轻世代的垃圾回收算法就可以很有针对性</p>
</li>
<li><p>调用System.gc()会发生什么?</p>
<p> 通知GC开始工作，但是GC真正开始的时间不确定</p>
</li>
</ol>
<h5 id="进程-线程相关"><a href="#进程-线程相关" class="headerlink" title="进程,线程相关"></a>进程,线程相关</h5><ol>
<li><p>说说进程，线程，协程之间的区别</p>
<p> 简而言之，进程是程序运行和资源分配的基本单位，一个程序至少有一个进程，一个进程至少有一个线程。进程在执行过程中拥有独立的内存单元，而多个线程共享内存资源，减少切换次数，从而效率更高。线程是进程的一个实体，是cpu调度和分派的基本单位，是比程序更小的能独立运行的基本单位。同一进程中的多个线程之间可以并发执行</p>
</li>
<li><p>你了解守护线程吗？它和非守护线程有什么区别</p>
<p> 程序运行完毕，jvm会等待非守护线程完成后关闭，但是jvm不会等待守护线程。守护线程最典型的例子就是GC线程</p>
</li>
<li><p>什么是多线程上下文切换</p>
<p> 多线程的上下文切换是指CPU控制权由一个已经正在运行的线程切换到另外一个就绪并等待获取CPU执行权的线程的过程</p>
</li>
<li><p>创建两种线程的方式?他们有什么区别?</p>
<p> 通过实现java.lang.Runnable或者通过扩展java.lang.Thread类。相比扩展Thread，实现Runnable接口可能更优.原因有二：</p>
<p> Java不支持多继承。因此扩展Thread类就代表这个子类不能扩展其他类。而实现Runnable接口的类还可能扩展另一个类。</p>
<p> 类可能只要求可执行即可，因此继承整个Thread类的开销过大</p>
</li>
<li><p>Thread类中的start()和run()方法有什么区别?</p>
<p> start()方法被用来启动新创建的线程，而且start()内部调用了run()方法，这和直接调用run()方法的效果不一样。当你调用run()方法的时候，只会是在原来的线程中调用，没有新的线程启动，start()方法才会启动新线程</p>
</li>
<li><p>怎么检测一个线程是否持有对象监视器</p>
<p> Thread类提供了一个holdsLock(Object obj)方法，当且仅当对象obj的监视器被某条线程持有的时候才会返回true，注意这是一个static方法，这意味着”某条线程”指的是当前线程</p>
</li>
<li><p>Runnable和Callable的区别</p>
<p> Runnable接口中的run()方法的返回值是void，它做的事情只是纯粹地去执行run()方法中的代码而已；Callable接口中的call()方法是有返回值的，是一个泛型，和Future、FutureTask配合可以用来获取异步执行的结果。<br>这其实是很有用的一个特性，因为多线程相比单线程更难、更复杂的一个重要原因就是因为多线程充满着未知性，某条线程是否执行了？某条线程执行了多久？某条线程执行的时候我们期望的数据是否已经赋值完毕？无法得知，我们能做的只是等待这条多线程的任务执行完毕而已。而Callable+Future/FutureTask却可以方便获取多线程运行的结果，可以在等待时间太长没获取到需要的数据的情况下取消该线程的任务。</p>
</li>
<li><p>什么导致线程阻塞</p>
<p> 阻塞指的是暂停一个线程的执行以等待某个条件发生（如某资源就绪），学过操作系统的同学对它一定已经很熟悉了。Java 提供了大量方法来支持阻塞，下面让我们逐一分析</p>
</li>
</ol>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>sleep()</td>
<td>sleep() 允许 指定以毫秒为单位的一段时间作为参数，它使得线程在指定的时间内进入阻塞状态，不能得到CPU 时间，指定的时间一过，线程重新进入可执行状态。 典型地，sleep() 被用在等待某个资源就绪的情形：测试发现条件不满足后，让线程阻塞一段时间后重新测试，直到条件满足为止</td>
</tr>
<tr>
<td>suspend() 和 resume()</td>
<td>两个方法配套使用，suspend()使得线程进入阻塞状态，并且不会自动恢复，必须其对应的resume() 被调用，才能使得线程重新进入可执行状态。典型地，suspend() 和 resume() 被用在等待另一个线程产生的结果的情形：测试发现结果还没有产生后，让线程阻塞，另一个线程产生了结果后，调用 resume() 使其恢复</td>
</tr>
<tr>
<td>yield()</td>
<td>yield() 使当前线程放弃当前已经分得的CPU 时间，但不使当前线程阻塞，即线程仍处于可执行状态，随时可能再次分得 CPU 时间。调用 yield() 的效果等价于调度程序认为该线程已执行了足够的时间从而转到另一个线程</td>
</tr>
<tr>
<td>wait() 和 notify()</td>
<td>两个方法配套使用，wait() 使得线程进入阻塞状态，它有两种形式，一种允许 指定以毫秒为单位的一段时间作为参数，另一种没有参数，前者当对应的 notify() 被调用或者超出指定时间时线程重新进入可执行状态，后者则必须对应的 notify() 被调用。</td>
</tr>
</tbody>
</table>
<ol>
<li><p>wait(),notify()和suspend(),resume()之间的区别</p>
<p> 初看起来它们与 suspend() 和 resume() 方法对没有什么分别，但是事实上它们是截然不同的。区别的核心在于，前面叙述的所有方法，阻塞时都不会释放占用的锁（如果占用了的话），而这一对方法则相反。上述的核心区别导致了一系列的细节上的区别。</p>
<p> 首先，前面叙述的所有方法都隶属于 Thread 类，但是这一对却直接隶属于 Object 类，也就是说，所有对象都拥有这一对方法。初看起来这十分不可思议，但是实际上却是很自然的，因为这一对方法阻塞时要释放占用的锁，而锁是任何对象都具有的，调用任意对象的 wait() 方法导致线程阻塞，并且该对象上的锁被释放。而调用 任意对象的notify()方法则导致从调用该对象的 wait() 方法而阻塞的线程中随机选择的一个解除阻塞（但要等到获得锁后才真正可执行）。</p>
<p> 其次，前面叙述的所有方法都可在任何位置调用，但是这一对方法却必须在 synchronized 方法或块中调用，理由也很简单，只有在synchronized 方法或块中当前线程才占有锁，才有锁可以释放。同样的道理，调用这一对方法的对象上的锁必须为当前线程所拥有，这样才有锁可以释放。因此，这一对方法调用必须放置在这样的 synchronized 方法或块中，该方法或块的上锁对象就是调用这一对方法的对象。若不满足这一条件，则程序虽然仍能编译，但在运行时会出现IllegalMonitorStateException 异常。</p>
<p> wait() 和 notify() 方法的上述特性决定了它们经常和synchronized关键字一起使用，将它们和操作系统进程间通信机制作一个比较就会发现它们的相似性：synchronized方法或块提供了类似于操作系统原语的功能，它们的执行不会受到多线程机制的干扰，而这一对方法则相当于 block 和wakeup 原语（这一对方法均声明为 synchronized）。它们的结合使得我们可以实现操作系统上一系列精妙的进程间通信的算法（如信号量算法），并用于解决各种复杂的线程间通信问题。</p>
<p> 关于 wait() 和 notify() 方法最后再说明两点：<br> 第一：调用 notify() 方法导致解除阻塞的线程是从因调用该对象的 wait() 方法而阻塞的线程中随机选取的，我们无法预料哪一个线程将会被选择，所以编程时要特别小心，避免因这种不确定性而产生问题。</p>
<p> 第二：除了 notify()，还有一个方法 notifyAll() 也可起到类似作用，唯一的区别在于，调用 notifyAll() 方法将把因调用该对象的 wait() 方法而阻塞的所有线程一次性全部解除阻塞。当然，只有获得锁的那一个线程才能进入可执行状态。</p>
<p> 谈到阻塞，就不能不谈一谈死锁，略一分析就能发现，suspend() 方法和不指定超时期限的 wait() 方法的调用都可能产生死锁。遗憾的是，Java 并不在语言级别上支持死锁的避免，我们在编程中必须小心地避免死锁。</p>
<p> 以上我们对 Java 中实现线程阻塞的各种方法作了一番分析，我们重点分析了 wait() 和 notify() 方法，因为它们的功能最强大，使用也最灵活，但是这也导致了它们的效率较低，较容易出错。实际使用中我们应该灵活使用各种方法，以便更好地达到我们的目的。</p>
</li>
<li><p>产生死锁的条件</p>
<pre><code>1.互斥条件：一个资源每次只能被一个进程使用。 
2.请求与保持条件：一个进程因请求资源而阻塞时，对已获得的资源保持不放。 
3.不剥夺条件:进程已获得的资源，在末使用完之前，不能强行剥夺。 
4.循环等待条件:若干进程之间形成一种头尾相接的循环等待资源关系。
</code></pre></li>
<li><p>为什么wait()方法和notify()/notifyAll()方法要在同步块中被调用</p>
<p>这是JDK强制的，wait()方法和notify()/notifyAll()方法在调用前都必须先获得对象的锁</p>
</li>
<li><p>wait()方法和notify()/notifyAll()方法在放弃对象监视器时有什么区别</p>
<p>wait()方法和notify()/notifyAll()方法在放弃对象监视器的时候的区别在于：wait()方法立即释放对象监视器，notify()/notifyAll()方法则会等待线程剩余代码执行完毕才会放弃对象监视器。</p>
</li>
<li><p>wait()与sleep()的区别</p>
<p>关于这两者已经在上面进行详细的说明,这里就做个概括好了:</p>
<pre><code>sleep()来自Thread类，和wait()来自Object类。调用sleep()方法的过程中，线程不会释放对象锁。而 调用 wait 方法线程会释放对象锁

sleep()睡眠后不出让系统资源，wait让其他线程可以占用CPU

sleep(milliseconds)需要指定一个睡眠时间，时间一到会自动唤醒.而wait()需要配合notify()或者notifyAll()使用
</code></pre></li>
<li><p>为什么wait, nofity和nofityAll这些方法不放在Thread类当中</p>
<p>一个很明显的原因是JAVA提供的锁是对象级的而不是线程级的，每个对象都有锁，通过线程获得。如果线程需要等待某些锁那么调用对象中的wait()方法就有意义了。如果wait()方法定义在Thread类中，线程正在等待的是哪个锁就不明显了。简单的说，由于wait，notify和notifyAll都是锁级别的操作，所以把他们定义在Object类中因为锁属于对象</p>
</li>
<li><p>怎么唤醒一个阻塞的线程</p>
<p>如果线程是因为调用了wait()、sleep()或者join()方法而导致的阻塞，可以中断线程，并且通过抛出InterruptedException来唤醒它；如果线程遇到了IO阻塞，无能为力，因为IO是操作系统实现的，Java代码并没有办法直接接触到操作系统</p>
</li>
<li><p>什么是多线程的上下文切换</p>
<p>多线程的上下文切换是指CPU控制权由一个已经正在运行的线程切换到另外一个就绪并等待获取CPU执行权的线程的过程</p>
</li>
<li><p>synchronized和ReentrantLock的区别</p>
<p>synchronized是和if、else、for、while一样的关键字，ReentrantLock是类，这是二者的本质区别。既然ReentrantLock是类，那么它就提供了比synchronized更多更灵活的特性，可以被继承、可以有方法、可以有各种各样的类变量，ReentrantLock比synchronized的扩展性体现在几点上：<br>​    </p>
<pre><code>（1）ReentrantLock可以对获取锁的等待时间进行设置，这样就避免了死锁 
（2）ReentrantLock可以获取各种锁的信息 
（3）ReentrantLock可以灵活地实现多路通知 
另外，二者的锁机制其实也是不一样的:ReentrantLock底层调用的是Unsafe的park方法加锁，synchronized操作的应该是对象头中mark word
</code></pre></li>
<li><p>FutureTask是什么</p>
<p>这个其实前面有提到过，FutureTask表示一个异步运算的任务。FutureTask里面可以传入一个Callable的具体实现类，可以对这个异步运算的任务的结果进行等待获取、判断是否已经完成、取消任务等操作。当然，由于FutureTask也是Runnable接口的实现类，所以FutureTask也可以放入线程池中</p>
</li>
<li><p>一个线程如果出现了运行时异常怎么办?</p>
<p>如果这个异常没有被捕获的话，这个线程就停止执行了。另外重要的一点是：如果这个线程持有某个某个对象的监视器，那么这个对象监视器会被立即释放</p>
</li>
<li><p>Java当中有哪几种锁</p>
<p>自旋锁: 自旋锁在JDK1.6之后就默认开启了。基于之前的观察，共享数据的锁定状态只会持续很短的时间，为了这一小段时间而去挂起和恢复线程有点浪费，所以这里就做了一个处理，让后面请求锁的那个线程在稍等一会，但是不放弃处理器的执行时间，看看持有锁的线程能否快速释放。为了让线程等待，所以需要让线程执行一个忙循环也就是自旋操作。在jdk6之后，引入了自适应的自旋锁，也就是等待的时间不再固定了，而是由上一次在同一个锁上的自旋时间及锁的拥有者状态来决定。</p>
<p>偏向锁: 在JDK1.之后引入的一项锁优化，目的是消除数据在无竞争情况下的同步原语。进一步提升程序的运行性能。 偏向锁就是偏心的偏，意思是这个锁会偏向第一个获得他的线程，如果接下来的执行过程中，改锁没有被其他线程获取，则持有偏向锁的线程将永远不需要再进行同步。偏向锁可以提高带有同步但无竞争的程序性能，也就是说他并不一定总是对程序运行有利，如果程序中大多数的锁都是被多个不同的线程访问，那偏向模式就是多余的，在具体问题具体分析的前提下，可以考虑是否使用偏向锁。</p>
<p>轻量级锁: 为了减少获得锁和释放锁所带来的性能消耗，引入了“偏向锁”和“轻量级锁”，所以在Java SE1.6里锁一共有四种状态，无锁状态，偏向锁状态，轻量级锁状态和重量级锁状态，它会随着竞争情况逐渐升级。锁可以升级但不能降级，意味着偏向锁升级成轻量级锁后不能降级成偏向锁。</p>
</li>
<li><p>如何在两个线程间共享数据</p>
<p>通过在线程之间共享对象就可以了，然后通过wait/notify/notifyAll、await/signal/signalAll进行唤起和等待，比方说阻塞队列BlockingQueue就是为线程之间共享数据而设计的。</p>
</li>
<li><p>如何正确的使用wait()？使用if还是while？</p>
<p>wait() 方法应该在循环调用，因为当线程获取到 CPU 开始执行的时候，其他条件可能还没有满足，所以在处理前，循环检测条件是否满足会更好。下面是一段标准的使用 wait 和 notify 方法的代码：</p>
<pre><code>synchronized (obj) {
   while (condition does not hold)
     obj.wait(); // (Releases lock, and reacquires on wakeup)
     ... // Perform action appropriate to condition
}
</code></pre></li>
<li><p>什么是线程局部变量ThreadLocal</p>
<p>线程局部变量是局限于线程内部的变量，属于线程自身所有，不在多个线程间共享。Java提供ThreadLocal类来支持线程局部变量，是一种实现线程安全的方式。但是在管理环境下（如 web 服务器）使用线程局部变量的时候要特别小心，在这种情况下，工作线程的生命周期比任何应用变量的生命周期都要长。任何线程局部变量一旦在工作完成后没有释放，Java 应用就存在内存泄露的风险。</p>
</li>
<li><p>ThreadLoal的作用是什么?</p>
<p>简单说ThreadLocal就是一种以空间换时间的做法在每个Thread里面维护了一个ThreadLocal.ThreadLocalMap把数据进行隔离，数据不共享，自然就没有线程安全方面的问题了。</p>
</li>
<li><p>生产者消费者模型的作用是什么?</p>
<p>（1）通过平衡生产者的生产能力和消费者的消费能力来提升整个系统的运行效率，这是生产者消费者模型最重要的作用。</p>
<p>（2）解耦，这是生产者消费者模型附带的作用，解耦意味着生产者和消费者之间的联系少，联系越少越可以独自发展而不需要收到相互的制约。</p>
</li>
<li><p>写一个生产者-消费者队列</p>
<p>可以通过阻塞队列实现，也可以通过wait-notify来实现。</p>
<p>使用阻塞队列来实现：</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">//消费者</span><br><span class="line">public class Producer implements Runnable&#123;</span><br><span class="line">   private final BlockingQueue&lt;Integer&gt; queue;</span><br><span class="line"> </span><br><span class="line">   public Producer(BlockingQueue q)&#123;</span><br><span class="line">       this.queue=q;</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">   @Override</span><br><span class="line">   public void run() &#123;</span><br><span class="line">       try &#123;</span><br><span class="line">           while (true)&#123;</span><br><span class="line">               Thread.sleep(1000);//模拟耗时</span><br><span class="line">               queue.put(produce());</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;catch (InterruptedException e)&#123;</span><br><span class="line"> </span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">   private int produce() &#123;</span><br><span class="line">       int n=new Random().nextInt(10000);</span><br><span class="line">       System.out.println(&quot;Thread:&quot; + Thread.currentThread().getId() + &quot; produce:&quot; + n);</span><br><span class="line">       return n;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">//消费者</span><br><span class="line">public class Consumer implements Runnable &#123;</span><br><span class="line">   private final BlockingQueue&lt;Integer&gt; queue;</span><br><span class="line"> </span><br><span class="line">   public Consumer(BlockingQueue q)&#123;</span><br><span class="line">       this.queue=q;</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">   @Override</span><br><span class="line">   public void run() &#123;</span><br><span class="line">       while (true)&#123;</span><br><span class="line">           try &#123;</span><br><span class="line">               Thread.sleep(2000);//模拟耗时</span><br><span class="line">               consume(queue.take());</span><br><span class="line">           &#125;catch (InterruptedException e)&#123;</span><br><span class="line"> </span><br><span class="line">           &#125;</span><br><span class="line"> </span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">   private void consume(Integer n) &#123;</span><br><span class="line">       System.out.println(&quot;Thread:&quot; + Thread.currentThread().getId() + &quot; consume:&quot; + n);</span><br><span class="line"> </span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">//测试</span><br><span class="line">public class Main &#123;</span><br><span class="line"> </span><br><span class="line">   public static void main(String[] args) &#123;</span><br><span class="line">       BlockingQueue&lt;Integer&gt; queue=new ArrayBlockingQueue&lt;Integer&gt;(100);</span><br><span class="line">       Producer p=new Producer(queue);</span><br><span class="line">       Consumer c1=new Consumer(queue);</span><br><span class="line">       Consumer c2=new Consumer(queue);</span><br><span class="line"> </span><br><span class="line">       new Thread(p).start();</span><br><span class="line">       new Thread(c1).start();</span><br><span class="line">       new Thread(c2).start();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li><p>如果你提交任务时，线程池队列已满，这时会发生什么</p>
<p>如果你使用的LinkedBlockingQueue，也就是无界队列的话，没关系，继续添加任务到阻塞队列中等待执行，因为LinkedBlockingQueue可以近乎认为是一个无穷大的队列，可以无限存放任务；如果你使用的是有界队列比方说ArrayBlockingQueue的话，任务首先会被添加到ArrayBlockingQueue中，ArrayBlockingQueue满了，则会使用拒绝策略RejectedExecutionHandler处理满了的任务，默认是AbortPolicy</p>
</li>
<li><p>为什么要使用线程池.</p>
<p>避免频繁地创建和销毁线程，达到线程对象的重用。另外，使用线程池还可以根据项目灵活地控制并发的数目。</p>
</li>
<li><p>java中用到的线程调度算法是什么</p>
<p>抢占式。一个线程用完CPU之后，操作系统会根据线程优先级、线程饥饿情况等数据算出一个总的优先级并分配下一个时间片给某个线程执行。</p>
</li>
<li><p>Thread.sleep(0)的作用是什么</p>
<p>由于Java采用抢占式的线程调度算法，因此可能会出现某条线程常常获取到CPU控制权的情况，为了让某些优先级比较低的线程也能获取到CPU控制权，可以使用Thread.sleep(0)手动触发一次操作系统分配时间片的操作，这也是平衡CPU控制权的一种操作。</p>
</li>
<li><p>什么是CAS</p>
<p>CAS，全称为Compare and Swap，即比较-替换。假设有三个操作数：内存值V、旧的预期值A、要修改的值B，当且仅当预期值A和内存值V相同时，才会将内存值修改为B并返回true，否则什么都不做并返回false。当然CAS一定要volatile变量配合，这样才能保证每次拿到的变量是主内存中最新的那个值，否则旧的预期值A对某条线程来说，永远是一个不会变的值A，只要某次CAS操作失败，永远都不可能成功。</p>
</li>
<li><p>什么是乐观锁和悲观锁</p>
<p>乐观锁：乐观锁认为竞争不总是会发生，因此它不需要持有锁，将比较-替换这两个动作作为一个原子操作尝试去修改内存中的变量，如果失败则表示发生冲突，那么就应该有相应的重试逻辑。</p>
<p>悲观锁：悲观锁认为竞争总是会发生，因此每次对某资源进行操作时，都会持有一个独占的锁，就像synchronized，不管三七二十一，直接上了锁就操作资源了。</p>
</li>
<li><p>ConcurrentHashMap的并发度是什么?</p>
<p>ConcurrentHashMap的并发度就是segment的大小，默认为16，这意味着最多同时可以有16条线程操作ConcurrentHashMap，这也是ConcurrentHashMap对Hashtable的最大优势，任何情况下，Hashtable能同时有两条线程获取Hashtable中的数据吗？</p>
</li>
<li><p>ConcurrentHashMap的工作原理</p>
<p>ConcurrentHashMap在jdk 1.6和jdk 1.8实现原理是不同的。</p>
<p>jdk 1.6:<br>​<br>ConcurrentHashMap是线程安全的，但是与Hashtablea相比，实现线程安全的方式不同。Hashtable是通过对hash表结构进行锁定，是阻塞式的，当一个线程占有这个锁时，其他线程必须阻塞等待其释放锁。ConcurrentHashMap是采用分离锁的方式，它并没有对整个hash表进行锁定，而是局部锁定，也就是说当一个线程占有这个局部锁时，不影响其他线程对hash表其他地方的访问。 </p>
<p>具体实现:ConcurrentHashMap内部有一个Segment.</p>
<p>jdk 1.8</p>
<p>在jdk 8中，ConcurrentHashMap不再使用Segment分离锁，而是采用一种乐观锁CAS算法来实现同步问题，但其底层还是“数组+链表-&gt;红黑树”的实现</p>
</li>
<li><p>CyclicBarrier和CountDownLatch区别</p>
<p>这两个类非常类似，都在java.util.concurrent下，都可以用来表示代码运行到某个点上，二者的区别在于：</p>
<p>CyclicBarrier的某个线程运行到某个点上之后，该线程即停止运行，直到所有的线程都到达了这个点，所有线程才重新运行；CountDownLatch则不是，某线程运行到某个点上之后，只是给某个数值-1而已，该线程继续运行。</p>
<p>CyclicBarrier只能唤起一个任务，CountDownLatch可以唤起多个任务</p>
<p>CyclicBarrier可重用，CountDownLatch不可重用，计数值为0该CountDownLatch就不可再用了。</p>
</li>
<li><p>java中的++操作符线程安全么?</p>
<p>不是线程安全的操作。它涉及到多个指令，如读取变量值，增加，然后存储回内存，这个过程可能会出现多个线程交差</p>
</li>
<li><p>你有哪些多线程开发良好的实践?</p>
<p>给线程命名</p>
<p>最小化同步范围</p>
<p>优先使用volatile</p>
<p>尽可能使用更高层次的并发工具而非wait和notify()来实现线程通信,如BlockingQueue,Semeaphore</p>
<p>优先使用并发容器而非同步容器.</p>
<p>考虑使用线程池</p>
</li>
</ol>
<h5 id="关于集合"><a href="#关于集合" class="headerlink" title="关于集合"></a>关于集合</h5><ol>
<li><p>Java中的集合及其继承关系</p>
<p> 关于集合的体系是每个人都应该烂熟于心的,尤其是对我们经常使用的List,Map的原理更该如此.这里我们看这张图即可: </p>
<p> 更多内容可见集合类总结：</p>
<p> <a href="http://write.blog.csdn.net/postedit/40826423" target="_blank" rel="noopener">http://write.blog.csdn.net/postedit/40826423</a></p>
</li>
<li><p>poll()方法和remove()方法区别？</p>
<p> poll() 和 remove() 都是从队列中取出一个元素，但是 poll() 在获取元素失败的时候会返回空，但是 remove() 失败的时候会抛出异常。</p>
</li>
<li><p>LinkedHashMap和PriorityQueue的区别</p>
<p> PriorityQueue 是一个优先级队列,保证最高或者最低优先级的的元素总是在队列头部，但是 LinkedHashMap 维持的顺序是元素插入的顺序。当遍历一个 PriorityQueue 时，没有任何顺序保证，但是 LinkedHashMap 课保证遍历顺序是元素插入的顺序</p>
</li>
<li><p>WeakHashMap与HashMap的区别是什么?</p>
<p> WeakHashMap 的工作与正常的 HashMap 类似，但是使用弱引用作为 key，意思就是当 key 对象没有任何引用时，key/value 将会被回收。</p>
</li>
<li><p>ArrayList和LinkedList的区别?</p>
<p> 最明显的区别是 ArrrayList底层的数据结构是数组，支持随机访问，而 LinkedList 的底层数据结构是双向循环链表，不支持随机访问。使用下标访问一个元素，ArrayList 的时间复杂度是 O(1)，而 LinkedList 是 O(n)。</p>
</li>
<li><p>ArrayList和Array有什么区别?</p>
<p> Array可以容纳基本类型和对象，而ArrayList只能容纳对象。</p>
<p> Array是指定大小的，而ArrayList大小是固定的</p>
</li>
<li><p>ArrayList和HashMap默认大小?</p>
<p> 在 Java 7 中，ArrayList 的默认大小是 10 个元素，HashMap 的默认大小是16个元素（必须是2的幂）。这就是 Java 7 中 ArrayList 和 HashMap 类的代码片段。</p>
<pre><code>private static final int DEFAULT_CAPACITY = 10;

//from HashMap.java JDK 7
static final int DEFAULT_INITIAL_CAPACITY = 1 &lt;&lt; 4;
</code></pre></li>
<li><p>Comparator和Comparable的区别?</p>
<p> Comparable 接口用于定义对象的自然顺序，而 comparator 通常用于定义用户定制的顺序。Comparable 总是只有一个，但是可以有多个 comparator 来定义对象的顺序。</p>
</li>
<li><p>如何实现集合排序?</p>
<p> 你可以使用有序集合，如 TreeSet 或 TreeMap，你也可以使用有顺序的的集合，如 list，然后通过 Collections.sort() 来排序。</p>
</li>
<li><p>如何打印数组内容</p>
<p>你可以使用 Arrays.toString() 和 Arrays.deepToString() 方法来打印数组。由于数组没有实现 toString() 方法，所以如果将数组传递给 System.out.println() 方法，将无法打印出数组的内容，但是 Arrays.toString() 可以打印每个元素</p>
</li>
<li><p>LinkedList的是单向链表还是双向?</p>
<p>双向循环列表，具体实现自行查阅源码。</p>
</li>
<li><p>TreeMap是实现原理</p>
<p>采用红黑树实现，具体实现自行查阅源码。</p>
</li>
<li><p>遍历ArrayList时如何正确移除一个元素</p>
<p>该问题的关键在于面试者使用的是 ArrayList 的 remove() 还是 Iterator 的 remove()方法。这有一段示例代码，是使用正确的方式来实现在遍历的过程中移除元素，而不会出现 ConcurrentModificationException 异常的示例代码</p>
</li>
<li><p>什么是ArrayMap?它和HashMap有什么区别?</p>
<p>ArrayMap是Android SDK中提供的，非Android开发者可以略过。</p>
<p>ArrayMap是用两个数组来模拟map，更少的内存占用空间,更高的效率。</p>
<p>具体参考这篇文章：ArrayMap VS HashMap：<a href="http://lvable.com/?p=217%5D" target="_blank" rel="noopener">http://lvable.com/?p=217%5D</a></p>
</li>
<li><p>HashMap的实现原理</p>
<ol>
<li><p>HashMap概述： HashMap是基于哈希表的Map接口的非同步实现。此实现提供所有可选的映射操作，并允许使用null值和null键。此类不保证映射的顺序，特别是它不保证该顺序恒久不变。 </p>
</li>
<li><p>HashMap的数据结构： 在java编程语言中，最基本的结构就是两种，一个是数组，另外一个是模拟指针（引用），所有的数据结构都可以用这两个基本结构来构造的，HashMap也不例外。HashMap实际上是一个“链表散列”的数据结构，即数组和链表的结合体。</p>
</li>
</ol>
<p>当我们往Hashmap中put元素时,首先根据key的hashcode重新计算hash值,根绝hash值得到这个元素在数组中的位置(下标),如果该数组在该位置上已经存放了其他元素,那么在这个位置上的元素将以链表的形式存放,新加入的放在链头,最先加入的放入链尾.如果数组中该位置没有元素,就直接将该元素放到数组的该位置上.</p>
<p>需要注意Jdk 1.8中对HashMap的实现做了优化,当链表中的节点数据超过八个之后,该链表会转为红黑树来提高查询效率,从原来的O(n)到O(logn)</p>
</li>
<li><p>你了解Fail-Fast机制吗？</p>
<p>Fail-Fast即我们常说的快速失败，</p>
<p>更多内容参看fail-fast机制：<a href="http://blog.csdn.net/chenssy/article/details/38151189" target="_blank" rel="noopener">http://blog.csdn.net/chenssy/article/details/38151189</a></p>
</li>
<li><p>Fail-fast和Fail-safe有什么区别</p>
<p>Iterator的fail-fast属性与当前的集合共同起作用，因此它不会受到集合中任何改动的影响。Java.util包中的所有集合类都被设计为fail-&gt;fast的，而java.util.concurrent中的集合类都为fail-safe的。当检测到正在遍历的集合的结构被改变时，Fail-fast迭代器抛出ConcurrentModificationException，而fail-safe迭代器从不抛出ConcurrentModificationException。</p>
</li>
</ol>
<h5 id="关于日期"><a href="#关于日期" class="headerlink" title="关于日期"></a>关于日期</h5><ol>
<li><p>SimpleDateFormat是线程安全的吗?</p>
<p> 非常不幸，DateFormat 的所有实现，包括 SimpleDateFormat 都不是线程安全的，因此你不应该在多线程序中使用，除非是在对外线程安全的环境中使用，如 将 SimpleDateFormat 限制在 ThreadLocal 中。如果你不这么做，在解析或者格式化日期的时候，可能会获取到一个不正确的结果。因此，从日期、时间处理的所有实践来说，我强力推荐 joda-time 库。</p>
</li>
<li><p>如何格式化日期?</p>
<p> Java 中，可以使用 SimpleDateFormat 类或者 joda-time 库来格式日期。DateFormat 类允许你使用多种流行的格式来格式化日期。参见答案中的示例代码，代码中演示了将日期格式化成不同的格式，如 dd-MM-yyyy 或 ddMMyyyy。</p>
</li>
</ol>
<h5 id="关于异常"><a href="#关于异常" class="headerlink" title="关于异常"></a>关于异常</h5><ol>
<li><p>简单描述java异常体系</p>
<p> 相比没有人不了解异常体系,关于异常体系的更多信息可以见</p>
<p> 白话异常机制：<a href="http://blog.csdn.net/dd864140130/article/details/42504189" target="_blank" rel="noopener">http://blog.csdn.net/dd864140130/article/details/42504189</a></p>
</li>
<li><p>throw和throws的区别</p>
<p> throw用于主动抛出java.lang.Throwable 类的一个实例化对象，意思是说你可以通过关键字 throw 抛出一个 Error 或者 一个Exception，如：throw new IllegalArgumentException(“size must be multiple of 2″),<br>而throws 的作用是作为方法声明和签名的一部分，方法被抛出相应的异常以便调用者能处理。Java 中，任何未处理的受检查异常强制在 throws 子句中声明。</p>
</li>
</ol>
<h5 id="关于序列化"><a href="#关于序列化" class="headerlink" title="关于序列化"></a>关于序列化</h5><ol>
<li><p>Java 中，Serializable 与 Externalizable 的区别</p>
<p> Serializable 接口是一个序列化 Java 类的接口，以便于它们可以在网络上传输或者可以将它们的状态保存在磁盘上，是 JVM 内嵌的默认序列化方式，成本高、脆弱而且不安全。Externalizable 允许你控制整个序列化过程，指定特定的二进制格式，增加安全机制。</p>
</li>
</ol>
<h5 id="关于JVM"><a href="#关于JVM" class="headerlink" title="关于JVM"></a>关于JVM</h5><ol>
<li><p>JVM特性</p>
<p> 平台无关性. </p>
<p> Java语言的一个非常重要的特点就是与平台的无关性。而使用Java虚拟机是实现这一特点的关键。一般的高级语言如果要在不同的平台上运行，至少需要编译成不同的目标代码。而引入Java语言虚拟机后，Java语言在不同平台上运行时不需要重新编译。Java语言使用模式Java虚拟机屏蔽了与具体平台相关的信息，使得Java语言编译程序只需生成在Java虚拟机上运行的目标代码（字节码），就可以在多种平台上不加修改地运行。Java虚拟机在执行字节码时，把字节码解释成具体平台上的机器指令执行。</p>
</li>
<li><p>简单解释一下类加载器</p>
<p> 有关类加载器一般会问你四种类加载器的应用场景以及双亲委派模型,</p>
<p> 更多的内容参看深入理解JVM加载器：</p>
<p> <a href="http://blog.csdn.net/dd864140130/article/details/49817357" target="_blank" rel="noopener">http://blog.csdn.net/dd864140130/article/details/49817357</a></p>
</li>
<li><p>简述堆和栈的区别</p>
<p> VM 中堆和栈属于不同的内存区域，使用目的也不同。栈常用于保存方法帧和局部变量，而对象总是在堆上分配。栈通常都比堆小，也不会在多个线程之间共享，而堆被整个 JVM 的所有线程共享。</p>
</li>
<li><p>简述JVM内存分配</p>
<p> 基本数据类型比变量和对象的引用都是在栈分配的。</p>
<p> 堆内存用来存放由new创建的对象和数组。</p>
<p> 类变量（static修饰的变量），程序在一加载的时候就在堆中为类变量分配内存，堆中的内存地址存放在栈中。</p>
<p> 实例变量：当你使用java关键字new的时候，系统在堆中开辟并不一定是连续的空间分配给变量，是根据零散的堆内存地址，通过哈希算法换算为一长串数字以表征这个变量在堆中的”物理位置”,实例变量的生命周期–当实例变量的引用丢失后，将被GC（垃圾回收器）列入可回收“名单”中，但并不是马上就释放堆中内存。</p>
<p> 局部变量: 由声明在某方法，或某代码段里（比如for循环），执行到它的时候在栈中开辟内存，当局部变量一但脱离作用域，内存立即释放。</p>
</li>
</ol>
<h5 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h5><ol>
<li><p>java当中采用的是大端还是小端?<br>XML解析的几种方式和特点</p>
<p> DOM, SAX, PULL三种解析方式：</p>
<p> DOM:消耗内存：先把xml文档都读到内存中，然后再用DOM API来访问树形结构，并获取数据。这个写起来很简单，但是很消耗内存。要是数据过大，手机不够牛逼，可能手机直接死机</p>
<p> SAX:解析效率高，占用内存少，基于事件驱动的：更加简单地说就是对文档进行顺序扫描，当扫描到文档(document)开始与结束、元素(element)开始与结束、文档(document)结束等地方时通知事件处理函数，由事件处理函数做相应动作，然后继续同样的扫描，直至文档结束。</p>
<p> PULL:与 SAX 类似，也是基于事件驱动，我们可以调用它的next（）方法，来获取下一个解析事件（就是开始文档，结束文档，开始标签，结束标签），当处于某个元素时可以调用XmlPullParser的getAttributte()方法来获取属性的值，也可调用它的nextText()获取本节点的值。</p>
</li>
<li><p>JDK 1.7特性</p>
<p> 然 JDK 1.7 不像 JDK 5 和 8 一样的大版本，但是，还是有很多新的特性，如 try-with-resource 语句，这样你在使用流或者资源的时候，就不需要手动关闭，Java 会自动关闭。Fork-Join 池某种程度上实现 Java 版的 Map-reduce。允许 Switch 中有 String 变量和文本。菱形操作符(&lt;&gt;)用于类型推断，不再需要在变量声明的右边申明泛型，因此可以写出可读写更强、更简洁的代码。</p>
</li>
<li><p>JDK 1.8特性</p>
<p> java 8 在 Java 历史上是一个开创新的版本，下面 JDK 8 中 5 个主要的特性： </p>
<p> Lambda 表达式，允许像对象一样传递匿名函数 </p>
<p> Stream API，充分利用现代多核 CPU，可以写出很简洁的代码 </p>
<p> Date 与 Time API，最终，有一个稳定、简单的日期和时间库可供你使用 </p>
<p> 扩展方法，现在，接口中可以有静态、默认方法。 </p>
<p> 重复注解，现在你可以将相同的注解在同一类型上使用多次。</p>
</li>
<li><p>Maven和ANT有什么区别?</p>
<p> 虽然两者都是构建工具，都用于创建 Java 应用，但是 Maven 做的事情更多，在基于“约定优于配置”的概念下，提供标准的Java 项目结构，同时能为应用自动管理依赖（应用中所依赖的 JAR 文件。</p>
</li>
<li><p>JDBC最佳实践</p>
<p> 优先使用批量操作来插入和更新数据</p>
<p> 使用PreparedStatement来避免SQL漏洞</p>
<p> 使用数据连接池</p>
<p> 通过列名来获取结果集</p>
</li>
<li><p>IO操作最佳实践</p>
<p> 使用有缓冲的IO类,不要单独读取字节或字符</p>
<p> 使用NIO和NIO 2或者AIO,而非BIO</p>
<p> 在finally中关闭流</p>
<p> 使用内存映射文件获取更快的IO</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/02/18/Java_基础知识/" data-id="ck8d0ognx0009bcuwg8w0xxme" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-消息队列简单使用" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/02/16/消息队列简单使用/" class="article-date">
  <time datetime="2019-02-16T11:20:26.000Z" itemprop="datePublished">2019-02-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/02/16/消息队列简单使用/">MnsUtil</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="消息队列简单使用"><a href="#消息队列简单使用" class="headerlink" title="消息队列简单使用"></a>消息队列简单使用</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br></pre></td><td class="code"><pre><span class="line">package com.ifenghui.queue;</span><br><span class="line"></span><br><span class="line">import com.aliyun.mns.client.CloudAccount;</span><br><span class="line">import com.aliyun.mns.client.CloudQueue;</span><br><span class="line">import com.aliyun.mns.client.MNSClient;</span><br><span class="line">import com.aliyun.mns.model.Message;</span><br><span class="line">import com.aliyun.mns.model.QueueMeta;</span><br><span class="line">import com.fasterxml.jackson.core.JsonProcessingException;</span><br><span class="line">import com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line">import com.ifenghui.app.comment.exception.FhException;</span><br><span class="line">import org.apache.log4j.Logger;</span><br><span class="line">import org.springframework.beans.factory.annotation.Value;</span><br><span class="line">import org.springframework.integration.support.json.Jackson2JsonObjectMapper;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line">import java.lang.reflect.Method;</span><br><span class="line">import java.util.Date;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line">public class MnsUtil&#123;</span><br><span class="line"></span><br><span class="line">    Logger logger= Logger.getLogger(MnsUtil.class);</span><br><span class="line">    public MNSClient getClient() &#123;</span><br><span class="line">        return client;</span><br><span class="line">    &#125;</span><br><span class="line">    private static MNSClient client = null;</span><br><span class="line">    @Value(&quot;$&#123;mns.accountendpoint&#125;&quot;)</span><br><span class="line">    String endPoint;//=&quot;http://20900454.mns.cn-hangzhou.aliyuncs.com&quot;;</span><br><span class="line">    @Value(&quot;$&#123;mns.accesskeyid&#125;&quot;)</span><br><span class="line">    String accessKeyId;//=&quot;xxxxxxxxx&quot;;</span><br><span class="line">    @Value(&quot;$&#123;mns.accesskeysecret&#125;&quot;)</span><br><span class="line">    String accessKeySecret;//=&quot;xxxxxxxxxxxx&quot;;</span><br><span class="line">    @Value(&quot;$&#123;mns.prefix&#125;&quot;)</span><br><span class="line">    String mnsPrefix;</span><br><span class="line">    public MnsUtil() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public MnsUtil(String endPoint,String accessKeyId,String accessKeySecret,String mnsPrefix) &#123;</span><br><span class="line">        this.endPoint=endPoint;</span><br><span class="line">        this.accessKeySecret=accessKeySecret;</span><br><span class="line">        this.accessKeyId=accessKeyId;</span><br><span class="line">        this.mnsPrefix=mnsPrefix;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void init()&#123;</span><br><span class="line">        if(client!=null)&#123;</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        CloudAccount account = new CloudAccount(</span><br><span class="line">                accessKeyId,</span><br><span class="line">                accessKeySecret,</span><br><span class="line">                endPoint);</span><br><span class="line">        client = account.getMNSClient();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public CloudQueue createQueue(String queueName)&#123;</span><br><span class="line">            this.init();</span><br><span class="line">        CloudQueue queue1=null;</span><br><span class="line">        try&#123;</span><br><span class="line">            QueueMeta meta1 = new QueueMeta();</span><br><span class="line">            meta1.setQueueName(this.mnsPrefix+queueName);</span><br><span class="line">            meta1.setPollingWaitSeconds(30);</span><br><span class="line">            meta1.setMaxMessageSize(2048L);</span><br><span class="line">            queue1 = client.createQueue(meta1);</span><br><span class="line">            return queue1;</span><br><span class="line"></span><br><span class="line">        &#125;catch (Exception e)&#123;</span><br><span class="line">           e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">            return queue1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void deleteMessage(CloudQueue queue,String messageHandle)&#123;</span><br><span class="line">        this.init();</span><br><span class="line">        queue.deleteMessage(messageHandle);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public &lt;M&gt; void popMessageThread(String queueName,Object listener,Class&lt;M&gt; messageType)&#123;</span><br><span class="line"></span><br><span class="line">        MnsUtil mnsUtil=this;</span><br><span class="line">        try&#123;</span><br><span class="line">            this.createQueue(queueName);</span><br><span class="line">        &#125;catch (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Runnable task=new Runnable() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void run() &#123;</span><br><span class="line">                mnsUtil.popMessage(queueName,listener,messageType);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        Thread t=new Thread(task);</span><br><span class="line">        t.start();</span><br><span class="line">    &#125;</span><br><span class="line">    public &lt;M&gt; Message popMessage(String queueName,Object listener,Class&lt;M&gt; messageType)&#123;</span><br><span class="line">        this.init();</span><br><span class="line">        CloudQueue queue= client.getQueueRef(mnsPrefix+queueName);</span><br><span class="line"></span><br><span class="line">                while (true)&#123;</span><br><span class="line">                    try&#123;</span><br><span class="line">                        Message popMsg=null;</span><br><span class="line">                        try&#123;</span><br><span class="line">                            popMsg = queue.popMessage();</span><br><span class="line">                        &#125;catch (Exception e)&#123;</span><br><span class="line">                            logger.info(&quot;popMessage a message error&gt;&gt;&gt;&gt; currentTime&quot;+new Date());</span><br><span class="line">                            Thread.sleep(60000);</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                        if(popMsg==null)&#123;</span><br><span class="line">                            continue;</span><br><span class="line">                        &#125;</span><br><span class="line">                        logger.info(&quot;read a message&gt;&gt;&gt;&gt;&quot;+popMsg.getMessageBody());</span><br><span class="line"></span><br><span class="line">                        Method method=listener.getClass().getMethod(&quot;process&quot;, messageType);</span><br><span class="line">                        M message=this.getMessageBody(popMsg.getMessageBody(),messageType);</span><br><span class="line">                        method.invoke(listener,message);</span><br><span class="line">                        String handle=popMsg.getReceiptHandle();</span><br><span class="line">                        queue.deleteMessage(handle);</span><br><span class="line">                    &#125;catch (Exception e)&#123;</span><br><span class="line">                        logger.error(&quot;error message&gt;&gt;&gt;&gt;&quot;+e.getMessage()+&quot;:&quot;+queueName);</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                        continue;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    System.out.println(&quot;read a message&quot;);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">     public &lt;M&gt; M getMessageBody(String messageBody,Class&lt;M&gt; jsonType) throws Exception &#123;</span><br><span class="line">        Jackson2JsonObjectMapper jackson2JsonObjectMapper=new Jackson2JsonObjectMapper();</span><br><span class="line">        M messageObj=jackson2JsonObjectMapper.fromJson(messageBody,jsonType);</span><br><span class="line"></span><br><span class="line">        return messageObj;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public Message pushMessage(MnsMessage object) throws JsonProcessingException &#123;</span><br><span class="line">        if(object.getQueueName()==null)&#123;</span><br><span class="line">            logger.error(&quot;queue is null&quot;);</span><br><span class="line">            return null;</span><br><span class="line">        &#125;</span><br><span class="line">        this.init();</span><br><span class="line">        ObjectMapper mapper = new ObjectMapper();</span><br><span class="line">        CloudQueue queue= client.getQueueRef(mnsPrefix+MnsMessageListener.mnsQueueName);</span><br><span class="line">        String messageBody=  mapper.writeValueAsString(object);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        Message message = new Message();</span><br><span class="line">        message.setMessageBody(messageBody);</span><br><span class="line">        Message putMsg = queue.putMessage(message);</span><br><span class="line">        return putMsg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public static void main(String[] args)&#123;</span><br><span class="line">        MnsUtil mnsUtil=new MnsUtil();</span><br><span class="line">        System.out.println(&quot;over&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ImMessage imMessage=<span class="keyword">new</span> ImMessage();</span><br><span class="line"></span><br><span class="line">imMessage.setContent(p.getContent());</span><br><span class="line">imMessage.setFrom(<span class="string">"29"</span>);</span><br><span class="line">imMessage.setTo(userList);</span><br><span class="line">mnsUtil.pushMessage(imMessage);</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/02/16/消息队列简单使用/" data-id="ck8d0ogtl0087bcuwntc37yrh" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/消息队列/">消息队列</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-sql_ 关键字执行顺序" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/02/15/sql_ 关键字执行顺序/" class="article-date">
  <time datetime="2019-02-15T07:42:06.000Z" itemprop="datePublished">2019-02-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/02/15/sql_ 关键字执行顺序/">关键字执行顺序</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="mysql-关键字执行顺序"><a href="#mysql-关键字执行顺序" class="headerlink" title="mysql 关键字执行顺序"></a>mysql 关键字执行顺序</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1.from</span><br><span class="line">2.on</span><br><span class="line">3.join</span><br><span class="line">4.where</span><br><span class="line">5.group by</span><br><span class="line">6.having</span><br><span class="line">7.select</span><br><span class="line">8.distinct</span><br><span class="line">9.union</span><br><span class="line">10.order by</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/02/15/sql_ 关键字执行顺序/" data-id="ck8d0ogrq005lbcuw8xdf4aqj" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/">mysql</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-elasticsearch 模糊搜索" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/02/13/elasticsearch 模糊搜索/" class="article-date">
  <time datetime="2019-02-13T13:44:45.000Z" itemprop="datePublished">2019-02-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/02/13/elasticsearch 模糊搜索/">elasticsearch 模糊搜索</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="elasticsearch-模糊搜索"><a href="#elasticsearch-模糊搜索" class="headerlink" title="elasticsearch 模糊搜索"></a>elasticsearch 模糊搜索</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">elastic.search.ex.index=xxx-exception</span><br><span class="line">elastic.search.story.index=xx-search</span><br><span class="line">elastic.search.host=xx.xx.62.93</span><br><span class="line">elastic.search.port=9200</span><br><span class="line">elastic.search.user=elastic:xxxxx</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Value</span>(<span class="string">"$&#123;elastic.search.host&#125;"</span>)</span><br><span class="line">String host;</span><br><span class="line"><span class="meta">@Value</span>(<span class="string">"$&#123;elastic.search.port&#125;"</span>)</span><br><span class="line">Integer port;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Value</span>(<span class="string">"$&#123;elastic.search.user&#125;"</span>)</span><br><span class="line">String elasticUser;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Value</span>(<span class="string">"/$&#123;elastic.search.ex.index&#125;/ex"</span>)</span><br><span class="line">String elasticIndex;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Value</span>(<span class="string">"$&#123;elastic.search.story.index&#125;"</span>)</span><br><span class="line">String elasticIndex_story;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"> RestClient restClient;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    Header header;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    String elasticKey="/"+elasticIndex+"/user";</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RestClient <span class="title">getClient</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="comment">//        if(restClient==null)&#123;&#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">synchronized</span> (ElasticServiceImpl.class) &#123;</span><br><span class="line">            restClient = RestClient.builder(</span><br><span class="line">                    <span class="keyword">new</span> HttpHost(host, port, <span class="string">"http"</span>)</span><br><span class="line"></span><br><span class="line">            ).build();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> restClient;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Header <span class="title">getHeader</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(header==<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (ElasticServiceImpl.class) &#123;</span><br><span class="line">                String token = Base64.getEncoder().encodeToString(elasticUser.getBytes());</span><br><span class="line">                header = <span class="keyword">new</span> BasicHeader(<span class="string">"Authorization"</span>, <span class="string">"Basic "</span> + token);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> header;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Page&lt;Map&gt; <span class="title">searchStoryNotNow</span><span class="params">(String content, <span class="keyword">int</span> pageNo, <span class="keyword">int</span> pageSize)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        restClient = <span class="keyword">this</span>.getClient();</span><br><span class="line"></span><br><span class="line">        Pageable pageable=<span class="keyword">new</span> PageRequest(pageNo,pageSize);</span><br><span class="line"></span><br><span class="line">        Map&lt;String,String&gt; params = Collections.emptyMap();</span><br><span class="line">        String jsonString = <span class="string">"&#123;\n"</span> +</span><br><span class="line">                <span class="string">" \"from\": "</span>+pageable.getOffset()+<span class="string">",\n"</span> +</span><br><span class="line">                <span class="string">" \"size\": "</span>+pageable.getPageSize()+<span class="string">",\n"</span> +</span><br><span class="line">                <span class="string">" \"query\": &#123;\n"</span> +</span><br><span class="line">                <span class="string">"    \"bool\": &#123;\n"</span> +</span><br><span class="line">                <span class="string">"        \"should\": [\n"</span> +</span><br><span class="line">                <span class="string">"             &#123; \"match\": &#123; \"name\": \""</span> + content + <span class="string">"\" &#125; &#125;,\n"</span> +</span><br><span class="line">                <span class="string">"             &#123; \"wildcard\": &#123; \"name\": \""</span>+<span class="string">"*"</span>+ content + <span class="string">"*"</span> + <span class="string">"\" &#125; &#125;,\n"</span> +</span><br><span class="line">                <span class="string">"             &#123; \"wildcard\": &#123;\"py_name\": \""</span> +<span class="string">"*"</span>+ content  +<span class="string">"*"</span>+ <span class="string">"\" &#125; &#125;\n"</span> +</span><br><span class="line">                <span class="string">"          ],\n"</span> +</span><br><span class="line">                <span class="string">"         \"must_not\": [\n"</span> +</span><br><span class="line">                <span class="string">"            &#123; \"match\": &#123; \"is_now\": \"1\" &#125; &#125;\n"</span> +</span><br><span class="line">                <span class="string">"           ]\n"</span> +</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                <span class="string">"     &#125;\n"</span> +</span><br><span class="line"></span><br><span class="line">                <span class="string">"  &#125;\n"</span> +</span><br><span class="line">                <span class="comment">//如果自定义了排序,那么默认的_score排序就会失效</span></span><br><span class="line"><span class="comment">//                " \"sort\": [\n" +</span></span><br><span class="line"><span class="comment">//                "&#123;\"id\": \"desc\"&#125;\n" +</span></span><br><span class="line"><span class="comment">//                "]\n" +</span></span><br><span class="line">                <span class="string">"&#125;"</span>;</span><br><span class="line">        <span class="comment">//为HttpEntity指定ContentType非常重要，因为它将用于设置Content-Type请求头，以便Elasticsearch可以正确解析内容。</span></span><br><span class="line">        HttpEntity entity = <span class="keyword">new</span> NStringEntity(jsonString, ContentType.APPLICATION_JSON);</span><br><span class="line">        logger.info(<span class="string">"try get elastic_search_story_not_now"</span>);</span><br><span class="line">        Response response = restClient.performRequest(<span class="string">"GET"</span>, <span class="string">"/"</span> +elasticIndex_story +<span class="string">"/"</span> + <span class="string">"_search"</span>, params, entity);</span><br><span class="line">        logger.info(response.toString());</span><br><span class="line">        String resp= EntityUtils.toString(response.getEntity());</span><br><span class="line">        JsonObjectMapper jsonObjectMapper=<span class="keyword">new</span> Jackson2JsonObjectMapper();</span><br><span class="line">        ElasticResp&lt;Story&gt; elasticResp=(ElasticResp&lt;Story&gt;)jsonObjectMapper.fromJson(resp, ElasticResp.class);</span><br><span class="line"></span><br><span class="line">        logger.debug(response.toString());</span><br><span class="line">        List&lt;Story&gt; statusList=elasticResp.getHits().getSouceList();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        ElasticResp&lt;Map&gt; elasticResp2=(ElasticResp&lt;Map&gt;)jsonObjectMapper.fromJson(resp,ElasticResp.class);</span><br><span class="line">        List&lt;Map&gt; statusListMap=(List&lt;Map&gt;)elasticResp2.getHits().getSouceList();</span><br><span class="line">        Page&lt;Map&gt; userPage=<span class="keyword">new</span> PageImpl&lt;Map&gt;(statusListMap,pageable,elasticResp.getHits().getTotal());</span><br><span class="line"></span><br><span class="line">        restClient.close();</span><br><span class="line">        <span class="keyword">return</span> userPage;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/02/13/elasticsearch 模糊搜索/" data-id="ck8d0ogp80021bcuwysq90mm1" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/elasticsearch/">elasticsearch</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-我的世界简单指令" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/02/04/我的世界简单指令/" class="article-date">
  <time datetime="2019-02-04T02:50:36.000Z" itemprop="datePublished">2019-02-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/02/04/我的世界简单指令/">我的世界指令</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="我的世界简单指令"><a href="#我的世界简单指令" class="headerlink" title="我的世界简单指令"></a>我的世界简单指令</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/kill  自杀</span><br><span class="line"></span><br><span class="line">/gamerule keepInventory true 死亡掉落</span><br><span class="line"></span><br><span class="line">/spawnpoint  重生地</span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br></pre></td><td class="code"><pre><span class="line">/give 蓝色小火 Obsidian 64   黑曜石  Obsidian</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">铁矿石  iron_ore</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Stone 石头</span><br><span class="line">Dirt 泥土</span><br><span class="line">Cobblestone 原石</span><br><span class="line">Wood 木板</span><br><span class="line">Sapling 树苗</span><br><span class="line">Water 水</span><br><span class="line">Lava 岩浆</span><br><span class="line">Sand 沙子</span><br><span class="line">Gravel 沙砾</span><br><span class="line">Gold Ore 金矿</span><br><span class="line">Iron Ore 铁矿</span><br><span class="line">Log 木头</span><br><span class="line">Red Log 红木</span><br><span class="line">Birch Log 白杨木</span><br><span class="line">Leaves 树叶</span><br><span class="line">Sponge 海绵</span><br><span class="line">Glass 玻璃</span><br><span class="line">Lapis Lazuli Ore 青金石矿</span><br><span class="line">Lapis Lazuli 青金石</span><br><span class="line">Dispenser 发射器</span><br><span class="line">Sandstone 沙石</span><br><span class="line">Note Block 音符盒</span><br><span class="line">White Wool 白羊毛</span><br><span class="line">Orange Wool 橙羊毛</span><br><span class="line">Magenta Wool 淡紫羊毛</span><br><span class="line">Light Blue Wool 淡蓝羊毛</span><br><span class="line">Yellow Wool 黄羊毛</span><br><span class="line">Light Green Wool 浅绿羊毛</span><br><span class="line">pink Wool	粉红羊毛</span><br><span class="line">Gray Wool 灰羊毛</span><br><span class="line">Light Gray Wool 浅灰羊毛</span><br><span class="line">Cyan Wool</span><br><span class="line">urple Wool	紫羊毛</span><br><span class="line">Blue Wool 蓝羊毛</span><br><span class="line">Brown Wool 棕羊毛</span><br><span class="line">Dark Green Wool 墨绿羊毛</span><br><span class="line">Red Wool 红羊毛</span><br><span class="line">Black Wool 黑羊毛</span><br><span class="line">Yellow Flower 黄花</span><br><span class="line">Red Rose 红玫瑰</span><br><span class="line">Brown Mushroom 棕蘑菇</span><br><span class="line">Red Mushroom 红蘑菇</span><br><span class="line">Gold Block	黄金块</span><br><span class="line">Iron Block	铁块</span><br><span class="line">Stone Slab	石板</span><br><span class="line">Sandstone Slab	砂岩板</span><br><span class="line">Wooden Slab	木制板</span><br><span class="line">Cobblestone Slab	鹅卵石板</span><br><span class="line">Brick	砖</span><br><span class="line">TNT	TNT</span><br><span class="line">Bookcase	书架</span><br><span class="line">Mossy Cobblestone	长满青苔</span><br><span class="line">的鹅卵石</span><br><span class="line">Obsidian	黑曜岩</span><br><span class="line">Torch	火炬</span><br><span class="line">Wooden Stairs	木楼梯</span><br><span class="line">Chest	胸部</span><br><span class="line">Diamond Block	钻石块</span><br><span class="line">Workbench	工作台</span><br><span class="line">Furnace	炉</span><br><span class="line">Ladder	梯子</span><br><span class="line">Minecart Tracks	矿车轨道</span><br><span class="line">Cobblestone Stairs	鹅卵石楼</span><br><span class="line">梯</span><br><span class="line">Lever	杠杆</span><br><span class="line">Stone Pressure Plate	石头压板</span><br><span class="line">Wooden Pressure Plate	木制压板</span><br><span class="line">Redstone Torch	红石火把</span><br><span class="line">Stone Button	石头按钮</span><br><span class="line">Ice	冰</span><br><span class="line">Snow Block	雪块</span><br><span class="line">Cactus	仙人掌</span><br><span class="line">Jukebox	自动点唱机</span><br><span class="line">Fence	栅栏</span><br><span class="line">umpkin	南瓜子仁</span><br><span class="line">Red Mossy Cobblestone	红色长满</span><br><span class="line">青苔的鹅卵石</span><br><span class="line">Slow Sand	慢砂</span><br><span class="line">Lightstone Ore	浅石色矿</span><br><span class="line">Jack-O-Lantern	杰克灯笼</span><br><span class="line">Iron Spade	铁铲</span><br><span class="line">Iron Pickaxe	铁锄</span><br><span class="line">Iron Axe	铁斧</span><br><span class="line">Flint and Steel	打火石</span><br><span class="line">Red Apple	红苹果</span><br><span class="line">Bow	弓</span><br><span class="line">Arrow	箭头</span><br><span class="line">Coal	煤炭</span><br><span class="line">Diamond	钻石</span><br><span class="line">Iron Ingot	铁锭</span><br><span class="line">Gold Ingot	金元宝</span><br><span class="line">Iron Sword	铁剑</span><br><span class="line">Wooden Sword	木剑</span><br><span class="line">Wooden Spade	木铲</span><br><span class="line">Wooden Pickaxe	木柄鹤嘴锄</span><br><span class="line">Wooden Axe	木斧</span><br><span class="line">Stone Sword	石剑</span><br><span class="line">Stone Spade	石锹</span><br><span class="line">Stone Pickaxe	石镐</span><br><span class="line">Stone Axe	石斧头</span><br><span class="line">Diamond Sword	钻石剑</span><br><span class="line">Diamond Spade	钻石锹</span><br><span class="line">Diamond Pickaxe	钻石镐</span><br><span class="line">Diamond Axe	钻石斧</span><br><span class="line">Stick	棍子</span><br><span class="line">Bowl	碗</span><br><span class="line">Mushroom Soup	蘑菇汤</span><br><span class="line">Gold Sword	金剑</span><br><span class="line">Gold Spade	金锹</span><br><span class="line">Gold Pickaxe	金镐</span><br><span class="line">Gold Axe	金斧子</span><br><span class="line">String	线</span><br><span class="line">Feather	羽毛</span><br><span class="line">Gunpowder	火药</span><br><span class="line">Wooden Hoe	木锄</span><br><span class="line">Stone Hoe	石锄</span><br><span class="line">Iron Hoe	铁锄头</span><br><span class="line">Diamond Hoe	钻石锄头</span><br><span class="line">Gold Hoe	金锄头</span><br><span class="line">Seeds	种子</span><br><span class="line">Wheat	小麦</span><br><span class="line">Bread	面包</span><br><span class="line">Leather Helmet	皮革头盔</span><br><span class="line">Leather Chestplate</span><br><span class="line">Leather Pants	皮裤</span><br><span class="line">Leather Boots	皮靴子</span><br><span class="line">Iron Helmet	铁头盔</span><br><span class="line">Iron Chestplate	铁护胸</span><br><span class="line">Iron Pants	铁裤</span><br><span class="line">Iron Boots	铁靴</span><br><span class="line">Diamond Helmet	钻石头盔</span><br><span class="line">Diamond Chestplate</span><br><span class="line">Diamond Pants	钻石的裤子</span><br><span class="line">Diamond Boots	钻石的靴子</span><br><span class="line">Gold Helmet	金头盔</span><br><span class="line">Gold Chestplate	金护胸</span><br><span class="line">Gold Pants	黄金的裤子</span><br><span class="line">Gold Boots	金靴子</span><br><span class="line">Flint	燧石</span><br><span class="line">ork	兽人</span><br><span class="line">Grilled Pork	烤的猪肉</span><br><span class="line">aintings	油画</span><br><span class="line">Golden Apple	金苹果</span><br><span class="line">Sign	标志</span><br><span class="line">Wooden Door	木门</span><br><span class="line">Bucket	桶</span><br><span class="line">Water Bucket	水桶</span><br><span class="line">Lava Bucket	岩浆桶</span><br><span class="line">Mine Cart	矿山车</span><br><span class="line">Saddle	马鞍</span><br><span class="line">Iron Door	铁门</span><br><span class="line">Redstone	红石</span><br><span class="line">Snowball	雪球</span><br><span class="line">Boat	小船</span><br><span class="line">Leather	皮革</span><br><span class="line">Milk Bucket	牛奶桶</span><br><span class="line">Clay Brick	粘土砖</span><br><span class="line">Clay Balls	粘土球</span><br><span class="line">Reed	芦苇</span><br><span class="line">aper	野猪</span><br><span class="line">Book	本书</span><br><span class="line">Slime Ball	泥球</span><br><span class="line">Storage Minecart</span><br><span class="line">owered Minecart	动力矿车</span><br><span class="line">Egg	鸡蛋</span><br><span class="line">Compass	指南针</span><br><span class="line">Fishing Rod	钓鱼杆</span><br><span class="line">Watch	手表</span><br><span class="line">Lightstone Dust	星彩蓝宝石</span><br><span class="line">Raw Fish	生鱼</span><br><span class="line">Cooked Fish	煮熟的鱼</span><br><span class="line">Ink Sac Dye	墨囊染料</span><br><span class="line">Rose Red Dye	玫瑰红染料</span><br><span class="line">Cactus Green Dye</span><br><span class="line">Cocoa Beans Dye	可可豆染料</span><br><span class="line">Lapis Lazuli Dye</span><br><span class="line">urple Dye	紫色染料</span><br><span class="line">Cyan Dye	青色染料</span><br><span class="line">Light Gray Dye	淡灰色染料</span><br><span class="line">Gray Dye	灰色染料</span><br><span class="line">ink Dye	染料墨水</span><br><span class="line">Lime Dye	石灰染料</span><br><span class="line">Dandelion Yellow Dye</span><br><span class="line">Light Blue Dye	淡蓝色染料</span><br><span class="line">MagentaDye	品红色染料</span><br><span class="line">Orange Dye	橙色染料</span><br><span class="line">Bone Meal Dye	肉骨粉染料</span><br><span class="line">Bone	骨</span><br><span class="line">Sugar	糖</span><br><span class="line">Cake	蛋糕</span><br><span class="line">Gold Record	金唱片</span><br><span class="line">Green RecordIf	绿色记录如果</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/02/04/我的世界简单指令/" data-id="ck8d0ogt9007obcuw9hpoo4gs" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/我的世界/">我的世界</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-http_Java信任SSL证书" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/01/28/http_Java信任SSL证书/" class="article-date">
  <time datetime="2019-01-28T10:21:46.000Z" itemprop="datePublished">2019-01-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/01/28/http_Java信任SSL证书/">Java 信任SSL证书</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="Java-信任所有SSL证书-解决PKIX-path-building-failed问题"><a href="#Java-信任所有SSL证书-解决PKIX-path-building-failed问题" class="headerlink" title="Java 信任所有SSL证书(解决PKIX path building failed问题)"></a>Java 信任所有SSL证书(解决PKIX path building failed问题)</h5><p><a href="http://javaweb.org/?p=1237" target="_blank" rel="noopener">http://javaweb.org/?p=1237</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target</span><br><span class="line">    at sun.security.ssl.Alerts.getSSLException(Alerts.java:<span class="number">192</span>)</span><br><span class="line">    at sun.security.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:<span class="number">1884</span>)</span><br><span class="line">    at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:<span class="number">276</span>)</span><br><span class="line">    at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:<span class="number">270</span>)</span><br><span class="line">    at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:<span class="number">1341</span>)</span><br><span class="line">    at sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:<span class="number">153</span>)</span><br><span class="line">    at sun.security.ssl.Handshaker.processLoop(Handshaker.java:<span class="number">868</span>)</span><br><span class="line">    at sun.security.ssl.Handshaker.process_record(Handshaker.java:<span class="number">804</span>)</span><br><span class="line">    at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:<span class="number">1016</span>)</span><br><span class="line">    at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:<span class="number">1312</span>)</span><br><span class="line">    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:<span class="number">1339</span>)</span><br><span class="line">    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:<span class="number">1323</span>)</span><br><span class="line">    at sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:<span class="number">563</span>)</span><br><span class="line">    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:<span class="number">185</span>)</span><br><span class="line">    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:<span class="number">1300</span>)</span><br><span class="line">    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:<span class="number">254</span>)</span><br><span class="line">    at SslTest.getRequest(SslTest.java:<span class="number">16</span>)</span><br><span class="line">    at SslTest.main(SslTest.java:<span class="number">40</span>)</span><br><span class="line">Caused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target</span><br><span class="line">    at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:<span class="number">385</span>)</span><br><span class="line">    at sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:<span class="number">230</span>)</span><br><span class="line">    at sun.security.validator.Validator.validate(Validator.java:<span class="number">260</span>)</span><br><span class="line">    at sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:<span class="number">326</span>)</span><br><span class="line">    at sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:<span class="number">231</span>)</span><br><span class="line">    at sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:<span class="number">126</span>)</span><br><span class="line">    at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:<span class="number">1323</span>)</span><br><span class="line">    ... <span class="number">13</span> more</span><br><span class="line">Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target</span><br><span class="line">    at sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:<span class="number">196</span>)</span><br><span class="line">    at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:<span class="number">268</span>)</span><br><span class="line">    at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:<span class="number">380</span>)</span><br><span class="line">    ... <span class="number">19</span> more</span><br></pre></td></tr></table></figure>
<p>解决办法：</p>
<p>1、导入证书到本地证书库</p>
<p>2、信任所有SSL证书</p>
<p>最好的解决办法或许是信任所有SSL证书，因为某些时候不能每次都手动的导入证书非常麻烦。现在封装了个方法，在连接openConnection的时候忽略掉证书就行了。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SslUtils.ignoreSsl();</span><br></pre></td></tr></table></figure>
<p><strong>SslUtils.java:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.security.cert.CertificateException;</span><br><span class="line"><span class="keyword">import</span> java.security.cert.X509Certificate;</span><br><span class="line"><span class="keyword">import</span> javax.net.ssl.HostnameVerifier;</span><br><span class="line"><span class="keyword">import</span> javax.net.ssl.HttpsURLConnection;</span><br><span class="line"><span class="keyword">import</span> javax.net.ssl.SSLContext;</span><br><span class="line"><span class="keyword">import</span> javax.net.ssl.SSLSession;</span><br><span class="line"><span class="keyword">import</span> javax.net.ssl.TrustManager;</span><br><span class="line"><span class="keyword">import</span> javax.net.ssl.X509TrustManager;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SslUtils</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">trustAllHttpsCertificates</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        TrustManager[] trustAllCerts = <span class="keyword">new</span> TrustManager[<span class="number">1</span>];</span><br><span class="line">        TrustManager tm = <span class="keyword">new</span> miTM();</span><br><span class="line">        trustAllCerts[<span class="number">0</span>] = tm;</span><br><span class="line">        SSLContext sc = SSLContext.getInstance(<span class="string">"SSL"</span>);</span><br><span class="line">        sc.init(<span class="keyword">null</span>, trustAllCerts, <span class="keyword">null</span>);</span><br><span class="line">        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">miTM</span> <span class="keyword">implements</span> <span class="title">TrustManager</span>,<span class="title">X509TrustManager</span> </span>&#123;</span><br><span class="line">        <span class="keyword">public</span> X509Certificate[] getAcceptedIssuers() &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isServerTrusted</span><span class="params">(X509Certificate[] certs)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isClientTrusted</span><span class="params">(X509Certificate[] certs)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">checkServerTrusted</span><span class="params">(X509Certificate[] certs, String authType)</span></span></span><br><span class="line"><span class="function">                <span class="keyword">throws</span> CertificateException </span>&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">checkClientTrusted</span><span class="params">(X509Certificate[] certs, String authType)</span></span></span><br><span class="line"><span class="function">                <span class="keyword">throws</span> CertificateException </span>&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 忽略HTTPS请求的SSL证书，必须在openConnection之前调用</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ignoreSsl</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        HostnameVerifier hv = <span class="keyword">new</span> HostnameVerifier() &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">verify</span><span class="params">(String urlHostName, SSLSession session)</span> </span>&#123;</span><br><span class="line">                System.out.println(<span class="string">"Warning: URL Host: "</span> + urlHostName + <span class="string">" vs. "</span> + session.getPeerHost());</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        trustAllHttpsCertificates();</span><br><span class="line">        HttpsURLConnection.setDefaultHostnameVerifier(hv);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>SslTest.java:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.OutputStreamWriter;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"><span class="keyword">import</span> java.net.URLConnection;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.IOUtils;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SslTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getRequest</span><span class="params">(String url,<span class="keyword">int</span> timeOut)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        URL u = <span class="keyword">new</span> URL(url);</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">"https"</span>.equalsIgnoreCase(u.getProtocol()))&#123;</span><br><span class="line">            SslUtils.ignoreSsl();</span><br><span class="line">        &#125;</span><br><span class="line">        URLConnection conn = u.openConnection();</span><br><span class="line">        conn.setConnectTimeout(timeOut);</span><br><span class="line">        conn.setReadTimeout(timeOut);</span><br><span class="line">        <span class="keyword">return</span> IOUtils.toString(conn.getInputStream());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">postRequest</span><span class="params">(String urlAddress,String args,<span class="keyword">int</span> timeOut)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        URL url = <span class="keyword">new</span> URL(urlAddress);</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">"https"</span>.equalsIgnoreCase(url.getProtocol()))&#123;</span><br><span class="line">            SslUtils.ignoreSsl();</span><br><span class="line">        &#125;</span><br><span class="line">        URLConnection u = url.openConnection();</span><br><span class="line">        u.setDoInput(<span class="keyword">true</span>);</span><br><span class="line">        u.setDoOutput(<span class="keyword">true</span>);</span><br><span class="line">        u.setConnectTimeout(timeOut);</span><br><span class="line">        u.setReadTimeout(timeOut);</span><br><span class="line">        OutputStreamWriter osw = <span class="keyword">new</span> OutputStreamWriter(u.getOutputStream(), <span class="string">"UTF-8"</span>);</span><br><span class="line">        osw.write(args);</span><br><span class="line">        osw.flush();</span><br><span class="line">        osw.close();</span><br><span class="line">        u.getOutputStream();</span><br><span class="line">        <span class="keyword">return</span> IOUtils.toString(u.getInputStream());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            SslTest st = <span class="keyword">new</span> SslTest();</span><br><span class="line">            String a = st.getRequest(<span class="string">"https://xxx.com/login.action"</span>, <span class="number">3000</span>);</span><br><span class="line">            System.out.println(a);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/01/28/http_Java信任SSL证书/" data-id="ck8d0ogph002ebcuwlch9rrpq" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Http/">Http</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Design-Patterns/">Design Patterns</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Html/">Html</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Http/">Http</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Sort/">Sort</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/algorithm/">algorithm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/elasticsearch/">elasticsearch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/idea/">idea</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jvm/">jvm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/logstash/">logstash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/">php</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pytest/">pytest</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springboot/">springboot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/util/">util</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/">vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wechat/">wechat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/我的世界/">我的世界</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/支付转账/">支付转账</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/消息队列/">消息队列</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/简单算法题/">简单算法题</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/线程/">线程</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Design-Patterns/" style="font-size: 16.36px;">Design Patterns</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/Html/" style="font-size: 10px;">Html</a> <a href="/tags/Http/" style="font-size: 12.73px;">Http</a> <a href="/tags/JavaScript/" style="font-size: 15.45px;">JavaScript</a> <a href="/tags/Sort/" style="font-size: 18.18px;">Sort</a> <a href="/tags/algorithm/" style="font-size: 10.91px;">algorithm</a> <a href="/tags/docker/" style="font-size: 17.27px;">docker</a> <a href="/tags/elasticsearch/" style="font-size: 10px;">elasticsearch</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/idea/" style="font-size: 10px;">idea</a> <a href="/tags/java/" style="font-size: 20px;">java</a> <a href="/tags/jvm/" style="font-size: 11.82px;">jvm</a> <a href="/tags/linux/" style="font-size: 13.64px;">linux</a> <a href="/tags/logstash/" style="font-size: 12.73px;">logstash</a> <a href="/tags/mysql/" style="font-size: 14.55px;">mysql</a> <a href="/tags/php/" style="font-size: 11.82px;">php</a> <a href="/tags/pytest/" style="font-size: 10px;">pytest</a> <a href="/tags/python/" style="font-size: 13.64px;">python</a> <a href="/tags/springboot/" style="font-size: 17.27px;">springboot</a> <a href="/tags/util/" style="font-size: 19.09px;">util</a> <a href="/tags/vue/" style="font-size: 10px;">vue</a> <a href="/tags/wechat/" style="font-size: 10.91px;">wechat</a> <a href="/tags/我的世界/" style="font-size: 10px;">我的世界</a> <a href="/tags/支付转账/" style="font-size: 13.64px;">支付转账</a> <a href="/tags/消息队列/" style="font-size: 10.91px;">消息队列</a> <a href="/tags/简单算法题/" style="font-size: 10px;">简单算法题</a> <a href="/tags/线程/" style="font-size: 11.82px;">线程</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/03/29/UML/">UML</a>
          </li>
        
          <li>
            <a href="/2020/03/29/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2019/10/27/python_字典/">python_dict</a>
          </li>
        
          <li>
            <a href="/2019/10/27/python_时间/">python-时间</a>
          </li>
        
          <li>
            <a href="/2019/10/26/git取消修改/">git-取消修改</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 chen v<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>